!function(n){function e(e){for(var i,o,s=e[0],c=e[1],l=e[2],d=0,m=[];d<s.length;d++)o=s[d],a[o]&&m.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(n[i]=c[i]);for(u&&u(e);m.length;)m.shift()();return r.push.apply(r,l||[]),t()}function t(){for(var n,e=0;e<r.length;e++){for(var t=r[e],i=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),n=o(o.s=t[0]))}return n}var i={},a={2:0},r=[];function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var i=new Promise(function(e,i){t=a[n]=[e,i]});e.push(t[2]=i);var r,s=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(n){return o.p+""+({}[n]||n)+".0ef3eb475669e7bb1aea.js"}(n),r=function(e){c.onerror=c.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,o=new Error("Loading chunk "+n+" failed.\n("+i+": "+r+")");o.type=i,o.request=r,t[1](o)}a[n]=void 0}};var l=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,s.appendChild(c)}return Promise.all(e)},o.m=n,o.c=i,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="/",o.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([246,0,1]),t()}({168:function(n,e,t){"use strict";n.exports={datasource:{collections:"http://catalog.paradisec.org.au/collections",itemIdentifier:"oai:paradisec.org.au:{{collectionId}}-{{itemId}}",getItem:"http://catalog.paradisec.org.au/oai/item?verb=GetRecord&identifier={{itemId}}&metadataPrefix=olac",mode:"librarybox"},header:{}}},189:function(n,e,t){"use strict";function i(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}var a=t(258),r=t(6),o=r.includes,s=(r.isEmpty,r.compact),c=r.isArray,l=r.each,u=r.map,d=r.flattenDeep,m=r.groupBy,p=t(6);n.exports={parseOAI:function(n){var e=v(n);try{return{data:g(e=e["OAI-PMH"].GetRecord.record.metadata["olac:olac"])}}catch(n){return{data:""}}},parseXML:v,createItemDataStructure:g,createItemDataStructureFromGraphQL:function(n){var e=n.identifier.split("-")[0],t=n.identifier.split("-")[1],a=function(n){var e=n.data,t="http://catalog.paradisec.org.au/repository/"+n.collectionId+"/"+n.itemId;return c(e.files)||(e.files=[e.files]),e.files.map(function(n){return{name:n.filename,path:t+"/"+n.filename,type:n.mimetype}})}({data:n,collectionId:e,itemId:t}),r=s(g([].concat(i(f.videoTypes),i(f.audioTypes)),a)),l=s(g(f.imageTypes,a)),d=(l=s(l.filter(function(n){return!n.name.match("thumb")}))).map(function(n){var e,t,i=void 0,a=void 0;return e=(i=n.name.split(".")).pop(),t=i.join(".")+"-thumb-PDSC_ADMIN."+e,(a=n.path.split("/")).pop(),a=a.join("/"),{name:t,type:n.type,path:a+"/"+t}}),p=s(g(f.documentTypes,a)),v=s(g(f.transcriptionTypes,a));return{audioVisualisations:{},citation:n.citation,collectionId:e,collectionLink:n.permalink,contributor:function(n){var e=n.data;return[{name:e.collector.name,role:"compiler"}].concat(i(e.roles.map(function(n){return{name:n.user_name,role:n.role_name}})))}({data:n}),date:n.date,description:n.description,documents:p.map(function(n){return n.path}),identifier:[n.identifier,n.permalink],images:l.map(function(n){return n.path}),itemId:t,media:function(n){return n=m(n,function(n){return n.name.split(".")[0]}),u(n,function(n,t){return{name:t,files:e([].concat(i(n)),"media"),eaf:e([].concat(i(n)),"eaf"),ixt:e([].concat(i(n)),"ixt"),trs:e([].concat(i(n)),"trs"),type:n[0].type.split("/")[0]}});function e(n,e){if("media"===e){var t=[].concat(i(f.videoTypes),i(f.audioTypes));return(n=n.filter(function(n){return o(t,n.name.split(".")[1])})).map(function(n){return n.path})}return(n=n.filter(function(n){return n.name.split(".")[1]===e})).map(function(n){return{name:n.name,url:n.path}})}}([].concat(i(r),i(v))),openAccess:"open"===n.access_class,rights:n.rights,thumbnails:d.map(function(n){return n.path}),title:n.title,transcriptions:v.map(function(n){return{name:n.name,url:n.path}})};function g(n,e){var t=void 0;return e.filter(function(e){return t=e.name.split(".").pop(),o(n,t)})}},groupByIdentifier:function(n){var e=m(n,"collectionId"),t={};return _(e).keys().sort().each(function(n){t[n]=e[n]}),t},groupByGenre:function(n){var e=n.filter(function(n){return n.data.classifications});e=m(e,function(n){return n.data.classifications.filter(function(n){return n.genre})[0].genre});var t={};return p(e).keys().sort().each(function(n){t[n]=e[n]}),t},groupBySpeaker:function(n){var e={},t=void 0,i=void 0;n.filter(function(n){return n.data.classifications}).forEach(function(n){t=n.index.speakerRoles,n.data.speakers.filter(function(n){return o(t,n.role)}).forEach(function(t){i=t.name+" ("+t.role+")",e[i]||(e[i]=[]),e[i].push(n)})});var a={};return p(e).keys().sort().each(function(n){a[n]=e[n]}),a}};var f={imageTypes:["jpg","jpeg","png"],videoTypes:["mp4","ogg","ogv","mov","webm"],audioTypes:["mp3","ogg","oga"],transcriptionTypes:["eaf","trs","ixt"],documentTypes:["pdf"]};function v(n,e){var t=(new DOMParser).parseFromString(n,"text/xml");return"xml"===e?n:a.convert(t)}function g(n){c(n["dc:identifier"])||(n["dc:identifier"]=[n["dc:identifier"]]),c(n["dc:contributor"])||(n["dc:contributor"]=[n["dc:contributor"]]);var e={openAccess:!0,identifier:n["dc:identifier"].map(function(n){return n["#text"]}),title:t(n,"dc:title"),date:t(n,"dcterms:created"),description:t(n,"dc:description"),citation:t(n,"dcterms:bibliographicCitation"),contributor:n["dc:contributor"].map(function(n){return{name:n["#text"],role:n["@attributes"]["olac:code"]}}),images:h("images",n),documents:h("documents",n),media:function(n){var e=h("audio",n),t=h("video",n),i=c("eaf",n),a=c("trs",n),r=c("ixt",n),o=c("flextext",n),s=[];return l(e,function(n,e){s.push(d(e,n,"audio"))}),l(t,function(n,e){s.push(d(e,n,"video"))}),s;function c(n,e){var t=h(n,e);return l(t,function(n,e){t[e]=u(n,function(n){return{name:n.split("/").pop(),url:n}})}),t}function d(n,e,t){return{name:n,type:t,files:e,eaf:i[n]?i[n]:[],trs:a[n]?a[n]:[],ixt:r[n]?r[n]:[],flextext:o[n]?o[n]:[]}}}(n),rights:t(n,"dcterms:accessRights")};return e.transcriptions=d(e.media.map(function(n){return s([n.eaf,n.trs,n.ixt,n.flextext])})).sort(),e.rights.match("Closed.*")&&(e.openAccess=!1),e.thumbnails=e.images.map(function(n){var e=n.split("/").pop(),t=e.split(".")[0]+"-thumb-PDSC_ADMIN."+e.split(".")[1];return n.replace(e,t)}),e.audioVisualisations=function(n){var e=p.map(n,function(n){var e=n[0].split("/").pop(),t=e.split(".")[0]+"-soundimage-PDSC_ADMIN.jpg";return n[0].replace(e,t)});return e=p(e).chain().groupBy(function(n){return n.split("/").pop().split(".")[0].split("-soundimage")[0]}).value(),p.each(e,function(n,t){e[t]=n[0]}),e}(e.audio),e;function t(n,e){try{return n[e]["#text"]}catch(n){return""}}}function h(n,e){var t;"images"===n?t=f.imageTypes:"video"===n?t=f.videoTypes:"audio"===n?t=f.audioTypes:"documents"===n?t=f.documentTypes:"eaf"===n?t="eaf":"trs"===n?t="trs":"ixt"===n?t="ixt":"flextext"===n&&(t="flextext"),c(e["dcterms:tableOfContents"])||(e["dcterms:tableOfContents"]=[e["dcterms:tableOfContents"]]);var i=s(e["dcterms:tableOfContents"].map(function(n){var e=n["#text"].split(".").pop();if(void 0!==e&&void 0!==t&&o(t,e.toLowerCase()))return n["#text"]}));return o(["audio","video","eaf","trs","ixt","flextext"],n)?p(i).chain().groupBy(function(n){return p.last(n.split("/")).split(".")[0]}).value():i}},190:function(n,e,t){var i={"./af":36,"./af.js":36,"./ar":37,"./ar-dz":38,"./ar-dz.js":38,"./ar-kw":39,"./ar-kw.js":39,"./ar-ly":40,"./ar-ly.js":40,"./ar-ma":41,"./ar-ma.js":41,"./ar-sa":42,"./ar-sa.js":42,"./ar-tn":43,"./ar-tn.js":43,"./ar.js":37,"./az":44,"./az.js":44,"./be":45,"./be.js":45,"./bg":46,"./bg.js":46,"./bm":47,"./bm.js":47,"./bn":48,"./bn.js":48,"./bo":49,"./bo.js":49,"./br":50,"./br.js":50,"./bs":51,"./bs.js":51,"./ca":52,"./ca.js":52,"./cs":53,"./cs.js":53,"./cv":54,"./cv.js":54,"./cy":55,"./cy.js":55,"./da":56,"./da.js":56,"./de":57,"./de-at":58,"./de-at.js":58,"./de-ch":59,"./de-ch.js":59,"./de.js":57,"./dv":60,"./dv.js":60,"./el":61,"./el.js":61,"./en-au":62,"./en-au.js":62,"./en-ca":63,"./en-ca.js":63,"./en-gb":64,"./en-gb.js":64,"./en-ie":65,"./en-ie.js":65,"./en-il":66,"./en-il.js":66,"./en-nz":67,"./en-nz.js":67,"./eo":68,"./eo.js":68,"./es":69,"./es-do":70,"./es-do.js":70,"./es-us":71,"./es-us.js":71,"./es.js":69,"./et":72,"./et.js":72,"./eu":73,"./eu.js":73,"./fa":74,"./fa.js":74,"./fi":75,"./fi.js":75,"./fo":76,"./fo.js":76,"./fr":77,"./fr-ca":78,"./fr-ca.js":78,"./fr-ch":79,"./fr-ch.js":79,"./fr.js":77,"./fy":80,"./fy.js":80,"./gd":81,"./gd.js":81,"./gl":82,"./gl.js":82,"./gom-latn":83,"./gom-latn.js":83,"./gu":84,"./gu.js":84,"./he":85,"./he.js":85,"./hi":86,"./hi.js":86,"./hr":87,"./hr.js":87,"./hu":88,"./hu.js":88,"./hy-am":89,"./hy-am.js":89,"./id":90,"./id.js":90,"./is":91,"./is.js":91,"./it":92,"./it.js":92,"./ja":93,"./ja.js":93,"./jv":94,"./jv.js":94,"./ka":95,"./ka.js":95,"./kk":96,"./kk.js":96,"./km":97,"./km.js":97,"./kn":98,"./kn.js":98,"./ko":99,"./ko.js":99,"./ky":100,"./ky.js":100,"./lb":101,"./lb.js":101,"./lo":102,"./lo.js":102,"./lt":103,"./lt.js":103,"./lv":104,"./lv.js":104,"./me":105,"./me.js":105,"./mi":106,"./mi.js":106,"./mk":107,"./mk.js":107,"./ml":108,"./ml.js":108,"./mn":109,"./mn.js":109,"./mr":110,"./mr.js":110,"./ms":111,"./ms-my":112,"./ms-my.js":112,"./ms.js":111,"./mt":113,"./mt.js":113,"./my":114,"./my.js":114,"./nb":115,"./nb.js":115,"./ne":116,"./ne.js":116,"./nl":117,"./nl-be":118,"./nl-be.js":118,"./nl.js":117,"./nn":119,"./nn.js":119,"./pa-in":120,"./pa-in.js":120,"./pl":121,"./pl.js":121,"./pt":122,"./pt-br":123,"./pt-br.js":123,"./pt.js":122,"./ro":124,"./ro.js":124,"./ru":125,"./ru.js":125,"./sd":126,"./sd.js":126,"./se":127,"./se.js":127,"./si":128,"./si.js":128,"./sk":129,"./sk.js":129,"./sl":130,"./sl.js":130,"./sq":131,"./sq.js":131,"./sr":132,"./sr-cyrl":133,"./sr-cyrl.js":133,"./sr.js":132,"./ss":134,"./ss.js":134,"./sv":135,"./sv.js":135,"./sw":136,"./sw.js":136,"./ta":137,"./ta.js":137,"./te":138,"./te.js":138,"./tet":139,"./tet.js":139,"./tg":140,"./tg.js":140,"./th":141,"./th.js":141,"./tl-ph":142,"./tl-ph.js":142,"./tlh":143,"./tlh.js":143,"./tr":144,"./tr.js":144,"./tzl":145,"./tzl.js":145,"./tzm":146,"./tzm-latn":147,"./tzm-latn.js":147,"./tzm.js":146,"./ug-cn":148,"./ug-cn.js":148,"./uk":149,"./uk.js":149,"./ur":150,"./ur.js":150,"./uz":151,"./uz-latn":152,"./uz-latn.js":152,"./uz.js":151,"./vi":153,"./vi.js":153,"./x-pseudo":154,"./x-pseudo.js":154,"./yo":155,"./yo.js":155,"./zh-cn":156,"./zh-cn.js":156,"./zh-hk":157,"./zh-hk.js":157,"./zh-tw":158,"./zh-tw.js":158};function a(n){var e=r(n);return t(e)}function r(n){var e=i[n];if(!(e+1)){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}return e}a.keys=function(){return Object.keys(i)},a.resolve=r,n.exports=a,a.id=190},194:function(n,e){},195:function(n,e){},203:function(n,e){},204:function(n,e){},205:function(n,e){},246:function(n,e,t){"use strict";!function(n){n&&n.__esModule}(t(167));var i=t(239),a=t(238),r=t(240);function o(n,e,t){n.theme("default").primaryPalette("blue-grey").accentPalette("orange"),e.hashPrefix("");var o=new i.ApolloClient({link:new r.HttpLink({uri:"http://catalog.paradisec.org.au/graphql",credentials:"include"}),cache:new a.InMemoryCache});t.defaultClient(o)}t(252),t(253),t(271),t(278),t(285),t(290),t(298),t(303),t(306),t(309),t(325),angular.module("pdsc",["ngAnimate","ngCookies","ngMessages","ui.router","ngSanitize","angular-apollo","moment","lodash","pdfjs","ngMaterial","highlightjs","pdsc.routes","pdsc.main","pdsc.services","pdsc.filters","pdsc.fileViewer","pdsc.imageViewer","pdsc.informationViewer","pdsc.documentViewer","pdsc.transcriptionViewer","pdsc.mediaViewer"]).config(o),o.$inject=["$mdThemingProvider","$locationProvider","apolloProvider"]},252:function(n,e,t){"use strict";function i(n,e){n.otherwise("/"),e.state("root",{url:"/",component:"pdscCollectionViewerRootComponent"}),e.state("main",{url:"/{collectionId}/{itemId}",component:"pdscCollectionViewerMainComponent"}),e.state("main.information",{url:"/information",component:"pdscInformationViewerComponent"}),e.state("main.files",{url:"/files",component:"pdscFileViewerComponent"}),e.state("main.images",{url:"/images",component:"pdscImageViewerComponent"}),e.state("main.images.instance",{url:"/:imageId"}),e.state("main.documents",{url:"/documents",component:"pdscDocumentViewerComponent"}),e.state("main.documents.instance",{url:"/:documentId"}),e.state("main.transcriptions",{url:"/transcriptions",component:"pdscTranscriptionViewerComponent"}),e.state("main.transcriptions.instance",{url:"/:transcriptionId"}),e.state("main.media",{url:"/media",component:"pdscMediaViewerComponent"}),e.state("main.media.instance",{url:"/:mediaId?transcription&segment"})}n.exports=angular.module("pdsc.routes",["ui.router"]).config(i),i.$inject=["$urlRouterProvider","$stateProvider"]},253:function(n,e,t){"use strict";t(254),n.exports=angular.module("pdsc.main",[]).constant("configuration",t(168)).controller("MetadataCtrl",t(256)).component("pdscCollectionViewerRootComponent",t(257)).component("pdscCollectionViewerMainComponent",t(260)).component("pdscIndexByItemIdComponent",t(262)).component("pdscIndexByGenreComponent",t(264)).component("pdscIndexBySpeakerComponent",t(266)).directive("sizeToParent",t(268)).directive("blurOnClick",t(269)).directive("storeHeight",t(270))},256:function(n,e,t){"use strict";var i=t(6).isEmpty;function a(n,e,t,a){n.$on("item data loaded",function(){var n=a.params.collectionId,r=a.params.itemId;t.getItem(n,r).then(function(n){i(n)||(e.item=n)})})}n.exports=a,a.$inject=["$rootScope","$scope","dataService","$state"]},257:function(n,e,t){"use strict";var i=t(168),a=t(6),r=(a.groupBy,a.sortBy,a.isEmpty),o=t(189),s=o.groupByIdentifier,c=o.groupByGenre,l=o.groupBySpeaker;function u(n,e,t,a){var o,u=this;function d(n){"root"===n&&"online"===u.mode?t.location.href="http://catalog.paradisec.org.au":a.libraryBoxLoader().then(function(n){switch(u.data=s(n),u.genreData=!r(c(n))&&c(n),u.speakerData=!r(l(n))&&l(n),n[0].index.type){case"id":u.activeTabIndex=0;break;case"genre":u.activeTabIndex=1;break;case"speaker":u.activeTabIndex=2}})}u.showErrorMessage=!1,u.$onInit=function(){u.mode=i.datasource.mode,o=e.onBefore({},function(n){d(n.$to().name)}),d(n.current.name)},u.$onDestroy=function(){o()}}n.exports={template:t(259),bindings:{},controller:u,controllerAs:"vm"},u.$inject=["$state","$transitions","$window","dataService"]},258:function(n,e,t){"use strict";n.exports={convert:function n(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var i=0;i<e.attributes.length;i++){var a=e.attributes.item(i);t["@attributes"][a.nodeName]=a.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes.item(r),s=o.nodeName;if(void 0===t[s])t[s]=n(o);else{if(void 0===t[s].push){var c=t[s];t[s]=[],t[s].push(c)}t[s].push(n(o))}}return t}}},259:function(n,e){n.exports='<div layout="row" layout-align="center center" ng-if="vm.showErrorMessage">\n    <p>The viewer requires the collection and item to display in the URL.</p>\n    <p>Typically this is something like /viewer/#/{collection id}/{item id}</p>\n</div>\n<div ui-view ng-if="vm.currentState !== \'root\'"></div>\n<div ng-if="vm.mode === \'librarybox\'">\n    <md-toolbar\n        class="main-toolbar main-root-toolbar"\n        layout="row"\n        layout-align="center center">\n            PARADISEC Offline Catalog\n    </md-toolbar>\n    <div\n        layout="row"\n        class="file-viewer-link-styling"\n        ng-if="vm.data">\n            <md-tabs md-dynamic-height md-center-tabs md-border-bottom md-selected="vm.activeTabIndex" class="main-index-styling">\n                <md-tab label="Browse by Identifier">\n                    <md-content class="md-padding main-viewer-color">\n                        <pdsc-index-by-item-id-component collections="vm.data"></pdsc-index-by-item-id-component>\n                    <md-content>\n                </md-tab>\n                <md-tab label="Browse by Genre" ng-if="vm.genreData">\n                    <md-content class="md-padding main-viewer-color">\n                        <pdsc-index-by-genre-component collections="vm.genreData"></pdsc-index-by-genre-component>\n                    <md-content>\n                </md-tab>\n                <md-tab label="Browse by Speaker" ng-if="vm.speakerData">\n                    <md-content class="md-padding main-viewer-color">\n                        <pdsc-index-by-speaker-component collections="vm.speakerData"></pdsc-index-by-speaker-component>\n                    <md-content>\n                </md-tab>\n            </md-tabs>\n    </div>\n</div>\n'},260:function(n,e,t){"use strict";var i=t(6),a=(i.includes,i.isEmpty),r=(i.isUndefined,t(168));function o(n,e,t,i,o){var s,c,l=this;function u(){return l.collectionId=n.params.collectionId,l.itemId=n.params.itemId,i.getItem(l.collectionId,l.itemId).then(function(e){a(e)||(l.itemData=e,l.loadingData=!1,"main"===n.current.name&&n.go("main.files"))})}l.showItemInformation=!1,l.levelUp=!1,l.$onInit=function(){l.mode=r.datasource.mode,l.loadingData=!0,l.showOptions=!1,c=t.$on("item data loaded",u),s=e.onSuccess({},function(e){l.state=n.current.name.split(".")[1]}),l.state=n.current.name.split(".")[1],u()},l.$onDestroy=function(){s(),c()},l.toggleItemInformation=function(){o("left").toggle()}}n.exports={template:t(261),bindings:{},controller:o,controllerAs:"vm"},o.$inject=["$state","$transitions","$rootScope","dataService","$mdSidenav"]},261:function(n,e){n.exports='<div flex layout="column">\n    <md-toolbar class="main-toolbar">\n        <div\n            layout="row"\n            layout-padding-xs\n            layout-padding-sm\n            ng-hide="vm.loadingData">\n            <md-button\n                aria-label="show menu options"\n                class="hide-md hide-lg hide-xl small-button"\n                ng-click="vm.showOptions = !vm.showOptions"\n                blur-on-click>\n                <i class="fa fa-bars" aria-hidden="true"></i>\n            </md-button>\n            <div\n                ng-class="{\'hide-sm\': !vm.showOptions, \'hide-xs\': !vm.showOptions}">\n                <md-button\n                    class="small-font"\n                    ui-sref="root"\n                    blur-on-click\n                    ng-if="vm.mode === \'librarybox\'">\n                        <i class="fa fa-arrow-left fa-lg"></i> Collections\n                        <md-tooltip>Up to Collection List</md-tooltip>\n                </md-button>\n\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'information\'}"\n                    ui-sref="main.information"\n                    blur-on-click>\n                        <i class="fa fa-info fa-lg"></i> Information\n                        <md-tooltip>View Information</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'files\'}"\n                    ui-sref="main.files"\n                    blur-on-click>\n                        <i class="fa fa-file-o fa-lg"></i> File Browser\n                        <md-tooltip>View Files</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'images\'}"\n                    ui-sref="main.images"\n                    blur-on-click\n                    ng-if="vm.itemData.images.length">\n                        <i class="fa fa-file-image-o fa-lg"></i> Images\n                        <md-tooltip>View Images</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'media\'}"\n                    ui-sref="main.media"\n                    blur-on-click\n                    ng-if="vm.itemData.media.length">\n                        <i class="fa fa-file-audio-o fa-lg"></i> Audio / Video\n                        <md-tooltip>View Audio / Video</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'documents\'}"\n                    ui-sref="main.documents"\n                    blur-on-click\n                    ng-if="vm.itemData.documents.length">\n                        <i class="fa fa-file-pdf-o fa-lg"></i> Documents\n                        <md-tooltip>View Documents</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'transcriptions\'}"\n                    ui-sref="main.transcriptions"\n                    blur-on-click\n                    ng-if="vm.itemData.transcriptions.length">\n                        <i class="fa fa-file-code-o fa-lg"></i> Transcriptions\n                        <md-tooltip>View Transcriptions</md-tooltip>\n                </md-button>\n            </div>\n        </div>\n    </md-toolbar>\n    <div layout="row" layout-align="center center" store-height element="headline">\n        <h3 class="md-headline">{{vm.itemData.title}}</h3>\n    </div>\n    <div layout="row" layout-align="center top">\n        <div ui-view class="main-viewer-panel"></div>\n    </div>\n</div>\n'},262:function(n,e,t){"use strict";function i(){this.$onInit=function(){},this.$onDestroy=function(){}}t(6).groupBy,t(6),n.exports={template:t(263),bindings:{collections:"<"},controller:i,controllerAs:"vm"},i.$inject=[]},263:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <div>\n        <div\n            layout="column"\n            layout-padding\n            ng-repeat="(k, collection) in vm.collections">\n            Collection: {{k}}\n            <div ng-repeat="item in collection" class="">\n                <span class="">\n                    <i class="fa fa-angle-right" aria-hidden="true"></i>\n                </span>\n                <a\n                    class="file-viewer-link-styling"\n                    ui-sref="main({collectionId: k, itemId: item.itemId})">\n                    {{item.itemId}} - {{item.data.title}}\n                </a>\n            </div>\n        </div>\n    </div>\n</div>'},264:function(n,e,t){"use strict";var i=t(6);function a(){this.$onInit=function(){},this.$onDestroy=function(){}}i.groupBy,i.orderBy,t(6),n.exports={template:t(265),bindings:{collections:"<"},controller:a,controllerAs:"vm"},a.$inject=[]},265:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <div>\n        <div \n            layout="column" \n            layout-padding\n            ng-repeat="(k, items) in vm.collections">\n            <div layout="column">\n                Genre: {{k}}\n                <div class="row" ng-repeat="item in items">\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a\n                        class="file-viewer-link-styling"\n                        ui-sref="main({collectionId: item.collectionId, itemId: item.itemId})">\n                        {{item.collectionId}} / {{item.itemId}} - {{item.data.title}} \n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},266:function(n,e,t){"use strict";var i=t(6);function a(){this.$onInit=function(){},this.$onDestroy=function(){}}i.groupBy,i.includes,t(6),n.exports={template:t(267),bindings:{collections:"<"},controller:a,controllerAs:"vm"},a.$inject=[]},267:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <div>\n        <div \n            layout="column" \n            layout-padding\n            ng-repeat="(k, items) in vm.collections">\n            <div layout="column">\n                Speaker: {{k}}\n                <div class="row" ng-repeat="item in items">\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a\n                        class="file-viewer-link-styling"\n                        ui-sref="main({collectionId: item.collectionId, itemId: item.itemId})">\n                        {{item.collectionId}} / {{item.itemId}} - {{item.data.title}} \n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},268:function(n,e,t){"use strict";n.exports=["configuration","$window",function(n,e){return{template:"",restrict:"A",link:function(n){function t(){n.vm.panelStyle={position:"relative","max-width":window.innerWidth-15+"px","max-height":"800px",overflow:"scroll"}}t(),angular.element(e).bind("resize",function(){n.$apply(function(){t()})})}}}]},269:function(n,e,t){"use strict";function i(n,e){e.bind("click",function(){e.blur()})}n.exports=function(){return{template:"",restrict:"A",scope:{},link:i}},i.$inject=["scope","element"]},270:function(n,e,t){"use strict";n.exports=["configuration","$window",function(n,e){return{template:"",restrict:"A",scope:{element:"@"},link:function(t,i){function a(){n.header[t.element]=parseInt(i[0].clientHeight)}a(),angular.element(e).bind("resize",function(){t.$apply(function(){a()})})}}}]},271:function(n,e,t){"use strict";n.exports=angular.module("pdsc.services",[]).service("dataService",t(272)).service("eafParserService",t(274)).service("flextextParserService",t(275)).service("ixtParserService",t(276)).service("trsParserService",t(277))},272:function(n,e,t){"use strict";var i=Object.freeze(Object.defineProperties(["\n                    query($identifier: String!) {\n                        items(full_identifier: $identifier, limit: 1, page: 1) {\n                            results {\n                                identifier: full_identifier\n                                title\n                                description\n                                rights: access_condition_name\n                                access_condition_details: access_narrative\n                                permalink\n                                access_class\n                                date: originated_on\n                                citation\n                                collector {\n                                    name\n                                }\n                                roles: item_agents {\n                                    role_name\n                                    user_name\n                                }\n                                collection {\n                                    identifier\n                                    permalink\n                                }\n                                files: essences {\n                                    filename\n                                    mimetype\n                                }\n                            }\n                        }\n                    }\n                "],{raw:{value:Object.freeze(["\n                    query($identifier: String!) {\n                        items(full_identifier: $identifier, limit: 1, page: 1) {\n                            results {\n                                identifier: full_identifier\n                                title\n                                description\n                                rights: access_condition_name\n                                access_condition_details: access_narrative\n                                permalink\n                                access_class\n                                date: originated_on\n                                citation\n                                collector {\n                                    name\n                                }\n                                roles: item_agents {\n                                    role_name\n                                    user_name\n                                }\n                                collection {\n                                    identifier\n                                    permalink\n                                }\n                                files: essences {\n                                    filename\n                                    mimetype\n                                }\n                            }\n                        }\n                    }\n                "])}})),a=function(n){return n&&n.__esModule?n:{default:n}}(t(273)),r=t(6),o=(r.includes,r.isEmpty),s=(r.compact,r.isArray,r.each,r.map,r.flattenDeep,t(189)),c=(s.parseOAI,s.parseXML),l=s.createItemDataStructureFromGraphQL;function u(n,e,t,r,s,u,d,m,p,f,v){var g={getItem:function(t,s){if(g.data[t]||(g.data[t]={},g.data[t][s]={}),g.loading[t]||(g.loading[t]={}),g.loading[t][s]){var c=g.data[t][s];return Promise.resolve(c)}if(!g.loading[t][s]&&!o(g.data[t][s])){var u=g.data[t][s];return Promise.resolve(Object.assign({},u))}return g.loading[t][s]=!0,"online"===r.datasource.mode?function(n,e){return f.query({query:(0,a.default)(i),variables:{identifier:n+"-"+e}}).then(function(n){return l(n.data.items.results[0])}).catch(function(n){n.message.match(/401/)&&(v.location.href="http://catalog.paradisec.org.au")})}(t,s).then(d):"librarybox"===r.datasource.mode?h(t,s).then(d):(e.error("Unexpected mode set: "+r.datasource.mode),{});function d(e){return e.collectionId=t,e.itemId=s,e.collectionLink=r.datasource.collections+"/"+t,g.data[t][s]=e,g.loading[t][s]=!1,n.$broadcast("item data loaded"),Object.assign({},e)}},libraryBoxLoader:h,loadTranscription:function(n,i,a){var r=void 0;if("eaf"===n)r=function(n){return"xml"===a?{data:c(n,"xml")}:{data:s.parse(c(n))}};else if("trs"===n)r=function(n){return"xml"===a?{data:c(n,"xml")}:{data:u.parse(c(n))}};else if("ixt"===n)r=function(n){return"xml"===a?{data:c(n,"xml")}:{data:d.parse(c(n))}};else{if("flextext"!==n)return;r=function(n){return"xml"===a?{data:c(n,"xml")}:{data:m.parse(c(n))}}}return t.get(i.url,{transformResponse:r,withCredentials:!0}).then(function(n){return n.data.data}).catch(function(t){e.error("ParadisecService: error, couldn't get",i[n]),console.log(t)})},broadcastMediaElementTime:function(e){g.mediaElementTime=e,n.$broadcast("media time updated")},listenForMediaElementBroadcast:function(e){return n.$on("media time updated",e)},broadcastPlayFrom:function(e){g.playFrom=e,n.$broadcast("media play from")},listenForPlayFrom:function(e){return n.$on("media play from",e)},data:{},loading:{}};return g;function h(n,i){var a="/repository/index.json";return e.info("ds getItem "+a),t.get(a).then(function(e){return n&&i?e.data.filter(function(e){return e.collectionId===n&&e.itemId===i})[0].data:e.data}).catch(function(){return e.error("dataService: error, couldn't get",a)})}}n.exports=u,u.$inject=["$rootScope","$log","$http","configuration","eafParserService","trsParserService","ixtParserService","flextextParserService","lodash","apollo","$window"]},273:function(n,e,t){var i=t(606).parse;function a(n){return n.replace(/[\s,]+/g," ").trim()}var r={},o={};function s(n){return a(n.source.body.substring(n.start,n.end))}var c=!0,l=!1;function u(n){var e=a(n);if(r[e])return r[e];var t=i(n,{experimentalFragmentVariables:l});if(!t||"Document"!==t.kind)throw new Error("Not a valid GraphQL document.");return t=function n(e,t){var i=Object.prototype.toString.call(e);if("[object Array]"===i)return e.map(function(e){return n(e,t)});if("[object Object]"!==i)throw new Error("Unexpected input.");t&&e.loc&&delete e.loc,e.loc&&(delete e.loc.startToken,delete e.loc.endToken);var a,r,o,s=Object.keys(e);for(a in s)s.hasOwnProperty(a)&&(r=e[s[a]],"[object Object]"!==(o=Object.prototype.toString.call(r))&&"[object Array]"!==o||(e[s[a]]=n(r,!0)));return e}(t=function(n){for(var e={},t=[],i=0;i<n.definitions.length;i++){var a=n.definitions[i];if("FragmentDefinition"===a.kind){var r=a.name.value,l=s(a.loc);o.hasOwnProperty(r)&&!o[r][l]?(c&&console.warn("Warning: fragment with name "+r+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),o[r][l]=!0):o.hasOwnProperty(r)||(o[r]={},o[r][l]=!0),e[l]||(e[l]=!0,t.push(a))}else t.push(a)}return n.definitions=t,n}(t),!1),r[e]=t,t}function d(){for(var n=Array.prototype.slice.call(arguments),e=n[0],t="string"==typeof e?e:e[0],i=1;i<n.length;i++)n[i]&&n[i].kind&&"Document"===n[i].kind?t+=n[i].loc.source.body:t+=n[i],t+=e[i];return u(t)}d.default=d,d.resetCaches=function(){r={},o={}},d.disableFragmentWarnings=function(){c=!1},d.enableExperimentalFragmentVariables=function(){l=!0},d.disableExperimentalFragmentVariables=function(){l=!1},n.exports=d},274:function(n,e,t){"use strict";function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}var r=t(6),o=(r.flatten,r.flattenDeep),s=(r.compact,r.groupBy),c=r.orderBy,l=r.map,u=r.isArray,d=r.isObject,m=r.each,p=(r.keys,r.trim);function f(){return{parse:v}}function v(n){var e=function(n){var e=l(n.ANNOTATION_DOCUMENT.TIME_ORDER.TIME_SLOT,function(n){return{id:n["@attributes"].TIME_SLOT_ID,time:parseFloat(n["@attributes"].TIME_VALUE/1e3)}});return s(e,function(n){return n.id})}(n);u(n.ANNOTATION_DOCUMENT.TIER)||(n.ANNOTATION_DOCUMENT.TIER=[n.ANNOTATION_DOCUMENT.TIER]);var t=function(n){var e=void 0,t=[];return m(n.ANNOTATION_DOCUMENT.TIER,function(n){try{n["@attributes"].PARENT_REF||(t=[].concat(a(t),[o(function(n){return d(n.ANNOTATION)&&(n.ANNOTATION=[n.ANNOTATION]),n.ANNOTATION=o(n.ANNOTATION),n.ANNOTATION.map(function(t){return{id:(e=t.ALIGNABLE_ANNOTATION)["@attributes"].ANNOTATION_ID,tierId:n["@attributes"].TIER_ID,time:{begin:e["@attributes"].TIME_SLOT_REF1,end:e["@attributes"].TIME_SLOT_REF2},value:i({},n["@attributes"].TIER_ID,{language:n["@attributes"].DEFAULT_LOCALE,text:p(e.ANNOTATION_VALUE["#text"])})}})}(n))]))}catch(e){console.log(JSON.stringify(n,null,2))}}),o(t)}(n),r=function(n,e){var t=[];return m(n.ANNOTATION_DOCUMENT.TIER,function(n){try{n["@attributes"].PARENT_REF&&(t=[].concat(a(t),[o(function(n){var e=void 0;return d(n.ANNOTATION)&&(n.ANNOTATION=[n.ANNOTATION]),n.ANNOTATION=o(n.ANNOTATION),n.ANNOTATION.map(function(t){return{id:(e=t.REF_ANNOTATION)["@attributes"].ANNOTATION_REF,value:i({},n["@attributes"].TIER_ID,{language:n["@attributes"].DEFAULT_LOCALE,text:p(e.ANNOTATION_VALUE["#text"])})}})}(n))]))}catch(e){console.log(JSON.stringify(n,null,2))}}),o(t)}(n),f=void 0,v=void 0;return t=t.map(function(n){return v=r.filter(function(e){return n.id===e.id}),f=Object.assign({},n),m(v,function(n){f.value=Object.assign({},f.value,n.value)}),f.value=l(f.value,function(n){return n}),f.time.begin=e[f.time.begin][0].time,f.time.end=e[f.time.end][0].time,f}),c(t,function(n){return n.time.begin})}n.exports=f,f.$inject=[]},275:function(n,e,t){"use strict";function i(n){return{parse:function(e){return n.map(e.document["interlinear-text"].paragraphs.paragraph,function(e){var t=n.map(e.phrases.phrase.words.word,function(e){try{n.isArray(e.morphemes.morph)||(e.morphemes.morph=[e.morphemes.morph])}catch(n){return{}}var t=n.map(e.morphemes.morph,function(n){try{return{text:n.item[0]["#text"],morpheme:n.item[2]["#text"],gloss:n.item[3]["#text"]}}catch(n){}});try{e={words:t}}catch(n){}return e});return{id:e.phrases.phrase["@attributes"]["begin-time-offset"],transcription:e.phrases.phrase.item[0]["#text"],translation:e.phrases.phrase.item[1]["#text"],time:{begin:parseFloat(e.phrases.phrase["@attributes"]["begin-time-offset"])},words:t}})}}}n.exports=i,i.$inject=["lodash"]},276:function(n,e,t){"use strict";function i(n){return{parse:function(e){return n.map(e.eopas.interlinear.phrase,function(e){var t=n.map(e.wordlist.word,function(e){try{n.isArray(e.morphemelist.morpheme)||(e.morphemelist.morpheme=[e.morphemelist.morpheme])}catch(n){return{}}var t=n.map(e.morphemelist.morpheme,function(n){return{morpheme:n.text[0]["#text"],gloss:n.text[1]["#text"]}});return{text:e.text["#text"],words:t}});return{id:e["@attributes"].startTime?e["@attributes"].startTime:0,transcription:e.transcription["#text"],translation:e.translation["#text"],time:{begin:parseFloat(e["@attributes"].startTime)},words:t}})}}}n.exports=i,i.$inject=["lodash"]},277:function(n,e,t){"use strict";function i(n){return{parse:function(e){if(!(e.html||e.parsererror&&e.parsererror["#text"].match(/Error/))){var t;e.Trans[1].Speakers?(t=n.map(e.Trans[1].Speakers.Speaker,function(n){return{id:n["@attributes"].id,name:n["@attributes"].name}}),t=n.groupBy(t,function(n){return n.id})):t={};var i=[];return n.isArray(e.Trans[1].Episode.Section.Turn)||(e.Trans[1].Episode.Section.Turn=[e.Trans[1].Episode.Section.Turn]),n.each(e.Trans[1].Episode.Section.Turn,function(e){var t;t=e["@attributes"]?e["@attributes"].speaker:"";var a,r=n.map(e["#text"],function(n){return n.trim()});r=n.without(r,""),n.isArray(e.Sync)?a=n.map(e.Sync,function(n){return n["@attributes"].time}):n.isObject(e.Sync)&&(a=[e.Sync["@attributes"].time]);var o=n.zip(a,r);o=n.map(o,function(n){return{id:n[0]?n[0]:0,time:{begin:n[0]?n[0]:0},value:n[1],referenceValue:"",speaker:t}}),i.push(o)}),e=n.groupBy(n.flatten(i),function(n){return n.id}),n.map(e,function(n){return n[0]})}}}}n.exports=i,i.$inject=["lodash"]},278:function(n,e,t){"use strict";n.exports=angular.module("pdsc.filters",[]).filter("extension",t(279)).filter("minutesSeconds",t(280)).filter("notEmpty",t(281)).filter("stripTime",t(282)).filter("trustAsHtml",t(283)).filter("escapeHtml",t(284))},279:function(n,e,t){"use strict";n.exports=[function(){return function(n){if(n)return n.split("/").pop().split(".")[1]}}]},280:function(n,e,t){"use strict";n.exports=["moment",function(n){return function(e){var t=Math.floor(parseInt(e)/60);return t+":"+n(e-60*t,"ss").format("ss")}}]},281:function(n,e,t){"use strict";n.exports=["lodash",function(n){return function(e){return!n.isEmpty(e)}}]},282:function(n,e,t){"use strict";n.exports=[function(){return function(n){return n.split("#")[0]}}]},283:function(n,e,t){"use strict";n.exports=["$sce",function(n){return function(e){return n.trustAsResourceUrl(e)}}]},284:function(n,e,t){"use strict";n.exports=[function(){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n[e]})}}]},285:function(n,e,t){"use strict";t(286),n.exports=angular.module("pdsc.fileViewer",[]).component("pdscFileViewerComponent",t(288))},288:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty;function r(n,e,t,i,r,o){var s,c=this;function l(){var t=n.params.collectionId,i=n.params.itemId;o.getItem(t,i).then(function(n){c.loadingData=!1,a(n)||e.$apply(function(){c.item=n,c.item.images=c.item.images.map(function(n){return n.split("/").pop()}),c.item.documents=c.item.documents.map(function(n){return n.split("/").pop()}),c.hasAudio=c.item.media.filter(function(n){return"audio"===n.type}),c.hasVideo=c.item.media.filter(function(n){return"video"===n.type})})})}c.$onInit=function(){c.loadingData=!0,s=t.$on("item data loaded",l),l()},c.$onDestroy=function(){s()}}i.each,i.map,n.exports={template:t(289),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$state","$rootScope","$scope","$location","$timeout","dataService"]},289:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    Available resources\n</div>\n<div\n    layout="column"\n    layout-gt-sm="row"\n    layout-padding\n    layout-margin\n    layout-align="center center"\n    layout-align-gt-sm="center start"\n    class="file-viewer-link-styling"\n    ng-if="!vm.loadingData">\n    <div >\n        Images ({{vm.item.images.length}})\n        <div>\n            <div ng-repeat="image in vm.item.images" track by $index>\n                <span class="">\n                    <i class="fa fa-angle-right" aria-hidden="true"></i>\n                </span>\n                <a\n                    class="file-viewer-link-styling"\n                    ui-sref="main.images.instance({imageId: image})">{{image}}</a>\n            </div>\n        </div>\n        <div ng-if="!vm.item.images.length">\n            No images registered.\n        </div>\n    </div>\n\n    <div class="column">\n        <div>\n            Audio ({{vm.hasAudio.length}})\n            <div>\n                <div ng-repeat="item in vm.item.media" track by $index>\n                    <span ng-if="item.type === \'audio\'">\n                        <span class="">\n                            <i class="fa fa-angle-right" aria-hidden="true"></i>\n                        </span>\n                        <a ui-sref="main.media.instance({mediaId: item.name})">{{item.name}}</a>\n                    </span>\n                </div>\n            </div>\n            <div ng-if="!vm.hasAudio.length">\n                No audio registered.\n            </div>\n        </div>\n        <div class="file-viewer-media-separator"></div>\n        <div>\n            Video ({{vm.hasVideo.length}})\n            <div>\n                <div ng-repeat="item in vm.item.media" track by $index>\n                    <span ng-if="item.type === \'video\'">\n                        <span class="">\n                            <i class="fa fa-angle-right" aria-hidden="true"></i>\n                        </span>\n                        <a ui-sref="main.media.instance({mediaId: item.name})">{{item.name}}</a>\n                    </span>\n                </div>\n            </div>\n            <div ng-if="!vm.hasVideo.length">\n                No video registered.\n            </div>\n        </div>\n    </div>\n    <div class="column">\n        <div>\n            Documents ({{vm.item.documents.length}})\n            <div>\n                <div ng-repeat="item in vm.item.documents" track by $index>\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a ui-sref="main.documents.instance({documentId: item})">{{item}}</a>\n                </div>\n            </div>\n            <div ng-if="!vm.item.documents.length">\n                No documents registered.\n            </div>\n        </div>\n        <div class="file-viewer-media-separator"></div>\n        <div>\n            Transcriptions ({{vm.item.transcriptions.length}})\n            <div>\n                <div ng-repeat="item in vm.item.transcriptions" track by $index>\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a ui-sref="main.transcriptions.instance({transcriptionId: item.name})">{{item.name}}</a>\n                </div>\n            </div>\n            <div ng-if="!vm.item.transcriptions.length">\n                No transcriptions registered.\n            </div>\n        </div>\n    </div>\n\n</div>\n'},290:function(n,e,t){"use strict";t(291),n.exports=angular.module("pdsc.imageViewer",[]).component("pdscImageViewerComponent",t(293)).component("pdscImageViewerThumbnailStripComponent",t(295)).directive("showWhenReady",t(297))},293:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty,r=i.each,o=i.map;function s(n,e,t,i,s,c,l,u,d){var m,p=this;function f(){var e=n.params.collectionId,t=n.params.itemId;p.showImage=!1,p.loadingData=!0,u.getItem(e,t).then(function(e){if(p.loadingData=!1,!a(e)){if(p.item=e,a(p.item.images))return n.go("main");p.images=o(p.item.images,function(n){return n.split("/").pop()}),n.params.imageId||n.go("main.images.instance",{imageId:p.images[0]}),l(function(){var e=n.params.imageId;p.config.current=p.images.indexOf(e),function(){var e=n.params.imageId;r(p.images,function(n,t){n===e&&(p.config.current=t)})}(),p.image=p.item.images[p.config.current],function(){if(1===p.item.images.length)return p.showNext=!1,p.showPrevious=!1,void(p.disableThumbnailView=!0);0===p.current?(p.showNext=!0,p.showPrevious=!1):p.current===p.item.images.length-1?(p.showNext=!1,p.showPrevious=!0):(p.showNext=!0,p.showPrevious=!0)}()})}})}function v(){r(p.images,function(e,t){p.config.current===t&&(p.image=null,l(function(){p.image=p.item.images[p.config.current],n.go("main.images.instance",{imageId:e})}))})}p.$onInit=function(){m=e.$on("item data loaded",f),p.showImage=!1,p.config={disableThumbnailView:!1,scaleStep:.2,sideNavIsOpen:!1,current:null},f()},p.$onDestroy=function(){m()},p.previous=function(){0!==p.config.current&&(p.config.current-=1,v())},p.next=function(){p.config.current!==p.item.images.length-1&&(p.config.current+=1,v())},p.jumpToStart=function(){p.config.current=0,v()},p.jumpToEnd=function(){p.config.current=p.item.images.length-1,v()},p.toggleFilmstrip=function(){d("thumbnailFilmstrip").toggle()},p.jump=v,p.toggleFullScreen=function(n){ImageViewer().show(n)},p.selectItem=function(n){r(p.images,function(e,t){e===n&&(p.config.current=t)}),v()}}n.exports={template:t(294),bindings:{},controller:s,controllerAs:"vm"},s.$inject=["$state","$rootScope","$log","$window","$location","$anchorScroll","$timeout","dataService","$mdSidenav"]},294:function(n,e){n.exports='<div layout="column">\n    <div layout-gt-sm="column" layout-align="top center" flex-gt-sm="40">\n        <span ng-if="!vm.loadingData">\n            <div layout="row" layout-align="center center" ng-if="!vm.disableThumbnailView">\n                    <md-button class="small-button"\n                        aria-label="jump to start"\n                        ng-click="vm.jumpToStart()"\n                        ng-disabled="vm.config.current === 0"\n                        blur-on-click>\n                            <span class="fa fa-fast-backward fa-lg"></span>\n                            <md-tooltip>First Image</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="previous"\n                        ng-click="vm.previous()"\n                        ng-disabled="vm.config.current === 0"\n                        blur-on-click>\n                            <span class="fa fa-step-backward fa-lg"></span>\n                            <md-tooltip>Previous Image</md-tooltip>\n                    </md-button>\n                    <div class="md-subhead">\n                        Image {{vm.config.current + 1}}&nbsp;of&nbsp;{{vm.item.images.length}}\n                    </div>\n                    <md-button class="small-button"\n                        aria-label="next"\n                        ng-click="vm.next()"\n                        ng-disabled="vm.config.current === vm.images.length - 1"\n                        blur-on-click>\n                            <span class="fa fa-step-forward fa-lg"></span>\n                            <md-tooltip>Next Image</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="jump to end"\n                        ng-click="vm.jumpToEnd()"\n                        ng-disabled="vm.config.current === vm.images.length - 1"\n                        blur-on-click>\n                            <span class="fa fa-fast-forward fa-lg"></span>\n                            <md-tooltip>Last Image</md-tooltip>\n                    </md-button>\n            </div>\n            <div layout="row" layout-align="center center">\n                    <md-button class="small-button"\n                        aria-label="toggle filmstrip"\n                        ng-click="vm.toggleFilmstrip()"\n                        blur-on-click\n                        ng-if="!vm.disableThumbnailView">\n                            <span ng-show="showFilmstrip">hide thumbnails</span>\n                            <span ng-hide="showFilmstrip">show thumbnails</span>\n                            <md-tooltip>Toggle Thumbnail Strip</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="download item"\n                        ng-href="{{vm.item.images[vm.config.current]}}"\n                        download\n                        blur-on-click\n                        show-gt-sm>\n                            <i class="fa fa-download fa-lg"></i> Download {{vm.item.images[vm.config.current] | extension}}\n                            <md-tooltip>Download Image</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="view item in full screen mode"\n                        ng-click="vm.toggleFullScreen(vm.image)">\n                            <i class="fa fa-expand fa-lg"></i>\n                            <md-tooltip>Toggle Fullscreen and Zoom</md-tooltip>\n                    </md-button>\n            </div>\n        </span>\n    </div>\n    <div layout="row" layout-align="center center" flex>\n        <div ng-show="!vm.showImage" style="width: 500px; margin: 10px 0;">\n            <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n        </div>\n        <img\n            class="pannable-image image-style"\n            id=\'largeImage\'\n            ng-src="{{vm.image}}"\n            ng-hide="!vm.showImage"\n            ng-if="vm.image && !vm.loadingData && !vm.showError"\n            show-when-ready>\n        <p ng-if="vm.showError">\n            Unfortunately we\'re unable to display this image at this time.\n        </p>\n    </div>\n</div>\n\n<md-sidenav\n    class="md-sidenav-right main-viewer-color"\n    md-component-id="thumbnailFilmstrip"\n    md-is-open="vm.config.sideNavIsOpen"\n    ng-if="!vm.loadingData">\n        <pdsc-image-viewer-thumbnail-strip-component\n            item="vm.item"\n            selected-item="vm.config.current"\n            load-item="vm.selectItem(item)"\n            is-open="vm.config.sideNavIsOpen"\n            ng-if="vm.config.sideNavIsOpen">\n        </pdsc-image-viewer-thumbnail-strip-component>\n</md-sidenav>\n'},295:function(n,e,t){"use strict";function i(n,e,t,i,a){var r=this;function o(){r.thumbnails=r.thumbnails.map(function(n,e){return n.selected=e===r.selectedItem?"image-viewer-filmstrip-highlight-current":"",n}),e(function(){var n=t.hash();t.hash(r.selectedItem),i(),t.hash(n)},1500)}r.$onInit=function(){r.thumbnails=r.item.thumbnails.map(function(n,e){return{id:e,source:n,name:n.split("/").pop().replace("-thumb-PDSC_ADMIN","")}}),o()},r.$onDestroy=function(){},r.loadImage=function(n){r.loadItem({item:n}),e(function(){o()})},r.highlightSelectedItem=o}n.exports={template:t(296),bindings:{item:"<",selectedItem:"<",loadItem:"&",isOpen:"<"},controller:i,controllerAs:"vm"},i.$inject=["$state","$timeout","$location","$anchorScroll","$mdSidenav"]},296:function(n,e){n.exports='<div layout="column" layout-align="center center" layout-margin ng-if="vm.isOpen">\n    <span ng-repeat="img in vm.thumbnails">\n        <div layout="row" layout-align="center center">\n            <span flex="20">\n                {{$index + 1}}\n            </span>\n            <a\n                flex="80"\n                ng-click="vm.loadImage(img.name)"\n                id="{{img.id}}"\n                ng-class="img.selected">\n                    <img ng-src="{{img.source}}" class="image-viewer-filmstrip-thumbnail" />\n            </a>\n        </div>\n    </span>\n</div>\n'},297:function(n,e,t){"use strict";function i(n,e){e.on("load",function(){n.$apply(function(){n.vm.showImage=!0})}),e.on("error",function(e){n.$apply(function(){n.vm.showImage=!0,n.vm.showError=!0})})}n.exports=function(){return{template:"",restrict:"A",link:i}},i.$inject=["scope","element"]},298:function(n,e,t){"use strict";n.exports=angular.module("pdsc.informationViewer",[]).component("pdscInformationViewerComponent",t(299)).component("pdscItemInformationComponent",t(301))},299:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty;function r(n,e,t,i){var r,o=this;function s(){var e=n.params.collectionId,r=n.params.itemId;o.showImage=!1,o.loadingData=!0,t.getItem(e,r).then(function(n){o.loadingData=!1,a(n)||i.$apply(function(){o.item=n})})}o.$onInit=function(){r=e.$on("item data loaded",s),s()},o.$onDestroy=function(){r()}}i.each,i.map,n.exports={template:t(300),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$state","$rootScope","dataService","$scope"]},300:function(n,e){n.exports='<pdsc-item-information-component item-data="vm.item"></pdsc-item-information-component>\n'},301:function(n,e,t){"use strict";function i(n){var e=this;e.$onInit=function(){e.url=n.absUrl()}}n.exports={template:t(302),bindings:{itemData:"<"},controller:i,controllerAs:"vm"},i.$inject=["$location"]},302:function(n,e){n.exports='<div layout="column" layout-padding>\n    <div layout="row" layout-align="center center">\n        <md-button\n            class="small-button md-primary md-raised"\n            ng-href="{{vm.itemData.collectionLink}}"\n            target="_blank">\n                <i class="fa fa-external-link fa-sm"></i>\n                View Collection in Catalog: {{vm.itemData.collectionId}}\n        </md-button>\n        <md-button\n            class="small-button md-primary md-raised"\n            ng-href="{{vm.itemData.identifier[1]}}"\n            target="_blank">\n                <i class="fa fa-external-link fa-sm"></i>\n                View Item in Catalog: {{vm.itemData.itemId}}\n        </md-button>\n    </div>\n    <div layout="column">\n        <div class="md-subhead">Contributors</div>\n        <div ng-repeat="contributor in vm.itemData.contributor" class="md-caption">\n            <li>{{contributor.name}} ({{contributor.role}})</li>\n        </div>\n    </div>\n    <div layout="column">\n        <div class="md-subhead">Description</div>\n        <div class="md-caption">{{vm.itemData.description}}</div>\n    </div>\n    <div layout="column">\n        <div class="md-subhead">\n            <div layout="row">\n                <div style="line-height: 40px;">Cite this item</div>\n                <div flex></div>\n                <md-button\n                    style="margin: 0; padding: 0;"\n                    class="small-button"\n                    data-clipboard-text="{{vm.itemData.citation}}"\n                    aria-label="copy citation to clipboard">\n                    <md-tooltip>\n                        Copy citation\n                    </md-tooltip>\n                    <i class="fa fa-clipboard fa-lg"></i>\n                </md-button>\n            </div>\n        </div>\n        <div style="word-wrap: break-word;" class="md-caption">{{vm.itemData.citation}}</div>\n\n    </div>\n    <md-divider></md-divider>\n    <div layout="column">\n        <div class="md-subhead">Zotero and Mendeley Integration.</div>\n        <div class="md-caption">\n            <p>This page has embedded metadata that is able to be read by both Zotero and Mendeley.</p>\n            <p>Zotero users with the appropriate browser plugin (<a href="https://www.zotero.org/download/" target="_blank">\n            https://www.zotero.org/download/</a>)\n            can save to Zotero directly whilst Mendeley users should install the <em>one click Web Importer</em>\n            (<a href="https://www.mendeley.com/import/" target="_blank">https://www.mendeley.com/import/</a>) to\n            enable the same functionality.</p>\n        </div>\n    </div>\n</div>\n'},303:function(n,e,t){"use strict";n.exports=angular.module("pdsc.documentViewer",[]).component("pdscDocumentViewerComponent",t(304))},304:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty,r=i.each;function o(n,e,t,i,o,s,c,l){var u,d=this,m="the-canvas";function p(){d.loadingData=!0;var n=t.params.collectionId,e=t.params.itemId;d.loadingData=!0,i.getItem(n,e).then(function(n){if(d.loadingData=!1,!a(n)){if(d.item=n,a(d.item.documents))return t.go("main");d.documents=d.item.documents.map(function(n){return n.split("/").pop()}),t.params.documentId||t.go("main.documents.instance",{documentId:d.documents[0]}),l(function(){var n=t.params.documentId;d.config.current=d.documents.indexOf(n),d.loadingData=!1,f()})}})}function f(){c.imageResourcePath="images/",c.cMapUrl="cmaps/",c.cMapPacked=!0,c.disableWorker=!0,c.disableRange=!0;var n={url:o.trustAsResourceUrl(d.item.documents[d.config.current]),withCredentials:!0};n.url&&c.getDocument(n).then(function(n){d.pdf=n,d.pdf.getMetadata().then(function(n){e.$apply(function(){d.config.pdfInfo.totalPages=d.pdf.numPages,d.config.pdfInfo.metadata=n})}),v()}).catch(function(n){e.$apply(function(){d.showError=!0})})}function v(){d.pdf.getPage(d.config.currentPage).then(function(n){var e=n.getViewport(d.config.scale),t=document.getElementById(m),i=t.getContext("2d");t.height=e.height,t.width=e.width;var a={canvasContext:i,viewport:e};n.render(a)})}function g(){r(d.documents,function(n,e){d.config.current===e&&(d.pdf=null,d.config.currentPage=1,l(function(){f(),t.go("main.documents.instance",{documentId:n})}))})}d.$onInit=function(){u=n.$on("item data loaded",p),d.config={showDocuments:!0,showItemInformation:!1,pdfInfo:{},current:0,scale:1,currentPage:1},p()},d.$onDestroy=function(){u()},d.nextDocument=function(){d.config.current!==d.item.documents.length-1&&(d.config.current+=1,g())},d.previousDocument=function(){0!==d.config.current&&(d.config.current-=1,g())},d.zoomIn=function(){d.config.scale+=.5,d.config.scale>3&&(d.config.scale=3),v()},d.zoomOut=function(){d.config.scale-=.5,d.config.scale<.5&&(d.config.scale=.5),v()},d.nextPage=function(){d.config.currentPage!==d.pdf.numPages&&(d.config.currentPage+=1,v())},d.previousPage=function(){1!==d.config.currentPage&&(d.config.currentPage-=1,v())},d.firstPage=function(){d.config.currentPage=1,v()},d.lastPage=function(){d.config.currentPage=d.pdf.numPages,v()}}n.exports={template:t(305),bindings:{},controller:o,controllerAs:"vm"},o.$inject=["$rootScope","$scope","$state","dataService","$sce","$window","pdfjs","$timeout"]},305:function(n,e){n.exports='<div\n    layout-gt-sm="row"\n    layout="column">\n    <div layout-gt-sm="column" layout-align="top center" flex-gt-sm="40">\n        <span ng-if="!vm.loadingData">\n            <div layout="row" layout-align="center center">\n                <md-button\n                    class="small-button"\n                    aria-label="previous document"\n                    ng-click="vm.previousDocument()"\n                    ng-disabled="vm.config.current === 0"\n                    blur-on-click>\n                        <span class="fa fa-step-backward fa-lg"></span>\n                        <md-tooltip>Previous Document</md-tooltip>\n                </md-button>\n                <div class="md-subhead">\n                    Document {{vm.config.current + 1}}&nbsp;of&nbsp;{{vm.item.documents.length}}\n                </div>\n                <md-button\n                    class="small-button"\n                    aria-label="next document"\n                    ng-click="vm.nextDocument()"\n                    ng-disabled="vm.config.current === vm.documents.length - 1"\n                    blur-on-click>\n                        <span class="fa fa-step-forward fa-lg"></span>\n                        <md-tooltip>Next Document</md-tooltip>\n                </md-button>\n            </div>\n            <div layout="row" layout-align="center center">\n                <md-button\n                    class="small-button"\n                    aria-label="first page"\n                    ng-click="vm.firstPage()"\n                    ng-disabled="vm.config.currentPage === 1"\n                    blur-on-click>\n                        <span class="fa fa-fast-backward fa-lg"></span>\n                        <md-tooltip>First Page</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-button"\n                    aria-label="previous page"\n                    ng-click="vm.previousPage()"\n                    ng-disabled="vm.config.currentPage === 1"\n                    blur-on-click>\n                        <span class="fa fa-step-backward fa-lg"></span>\n                        <md-tooltip>Previous Page</md-tooltip>\n                </md-button>\n                <span ng-if="vm.config.pdfInfo.totalPages">\n                    &nbsp;\n                    Page {{vm.config.currentPage}} of {{vm.config.pdfInfo.totalPages}}\n                    &nbsp;\n                </span>\n                <md-button\n                    class="small-button"\n                    aria-label="next page"\n                    ng-click="vm.nextPage()"\n                    ng-disabled="vm.config.currentPage === vm.config.pdfInfo.totalPages"\n                    blur-on-click>\n                        <span class="fa fa-step-forward fa-lg"></span>\n                        <md-tooltip>Next Page</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-button"\n                    aria-label="last page"\n                    ng-click="vm.lastPage()"\n                    ng-disabled="vm.config.currentPage === vm.config.pdfInfo.totalPages"\n                    blur-on-click>\n                        <span class="fa fa-fast-forward fa-lg"></span>\n                        <md-tooltip>Last Page</md-tooltip>\n                </md-button>\n            </div>\n            <div layout="row" layout-align="center center">\n                <md-button\n                    class="small-button"\n                    aria-label="zoom out"\n                    ng-click="vm.zoomOut()"\n                    blur-on-click>\n                        <span class="fa fa-minus fa-lg"></span>\n                        <md-tooltip>Zoom Out</md-tooltip>\n                </md-button>\n                <span>\n                    <small>{{vm.config.scale | number:1}}x</small>\n                </span>\n                <md-button\n                    class="small-button"\n                    aria-label="zoom in"\n                    ng-click="vm.zoomIn()"\n                    blur-on-click>\n                        <span class="fa fa-plus fa-lg"></span>\n                        <md-tooltip>Zoom In</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-button"\n                    aria-label="download document"\n                    ng-href="{{vm.item.documents[vm.config.current]}}"\n                    download>\n                        <i class="fa fa-download fa-lg"></i>\n                        Download {{vm.item.documents[vm.config.current] | extension}}\n                </md-button>\n            </div>\n        </span>\n    </div>\n    <div layout="row" layout-align="center center" flex ng-if="vm.showError">\n        <p>Unfortunately we are unable to display this document at this time.</p>\n    </div>\n    <div layout="row" layout-align="center center" flex ng-if="!vm.showError" style="margin: 10px;">\n        <div size-to-parent ng-style="panelStyle" style="overflow: auto;">\n            <canvas id="the-canvas" />\n        </div>\n    </div>\n</div>\n'},306:function(n,e,t){"use strict";n.exports=angular.module("pdsc.transcriptionViewer",[]).component("pdscTranscriptionViewerComponent",t(307))},307:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty;function r(n,e,t,i,r,o){var s,c=this;function l(){c.loadingData=!0,delete c.data;var e=n.params.collectionId,i=n.params.itemId;t.getItem(e,i).then(function(e){if(c.loadingData=!1,!a(e)){if(c.item=e,a(c.item.transcriptions))return n.go("main");n.params.transcriptionId||r(function(){n.go("main.transcriptions.instance",{transcriptionId:c.item.transcriptions[0].name})}),r(function(){u()})}})}function u(){c.selectedTranscription=c.item.transcriptions.filter(function(e){return e.name===n.params.transcriptionId})[0];var e=c.selectedTranscription.name.split(".").pop(),a=c.selectedTranscription;t.loadTranscription(e,a,"xml").then(function(n){i.configure({tabReplace:"    ",useBr:!0}),n=i.highlight("xml",n).value,c.data=n,i.initHighlighting()})}c.$onInit=function(){s=e.$on("item data loaded",l),c.config={current:0},l()},c.$onDestroy=function(){s()},c.jump=function(){r(function(){n.go("main.transcriptions.instance",{transcriptionId:c.selectedTranscription.name})}),r(function(){u()})}}i.each,n.exports={template:t(308),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$state","$rootScope","dataService","hljs","$timeout","$scope"]},308:function(n,e){n.exports='<div layout="column" layout-align="center center" ng-if="!vm.loadingData">\n    <md-select\n        ng-model="vm.selectedTranscription"\n        ng-change="vm.jump()"\n        aria-label="select the transcription to display">\n        <md-option\n            ng-repeat="transcription in vm.item.transcriptions"\n            ng-value="transcription">\n          {{transcription.name}}\n        </md-option>\n    </md-select>\n    <div layout="row" layout-align="center center" flex>\n        <div ng-show="!vm.loadingData" style="width: 500px; margin: 10px 0;">\n            <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n        </div>\n\n        <pre ng-if="vm.data">\n            <code ng-bind-html="vm.data" class="xml hljs"></code>\n        </pre>\n    </div>\n</div>\n'},309:function(n,e,t){"use strict";t(310),n.exports=angular.module("pdsc.mediaViewer",[]).directive("mediaReady",t(312)).directive("timeUpdate",t(313)).directive("transcriptionReady",t(314)).component("pdscMediaViewerComponent",t(315)).component("pdscAudioPlayerComponent",t(317)).component("pdscVideoPlayerComponent",t(319)).component("pdscTranscriptionRenderComponent",t(321)).component("pdscFragmentCitationComponent",t(323))},312:function(n,e,t){"use strict";n.exports=["$timeout","dataService",function(n,e){return{template:"",restrict:"A",link:function(n,e){e.on("canplaythrough",function(){n.$apply(function(){n.vm.mediaReadyToPlay=!0})})}}}]},313:function(n,e,t){"use strict";t(6).throttle,n.exports=["dataService",function(n){return{template:"",restrict:"A",link:function(e,t){t.on("timeupdate",function(t){e.$apply(function(){n.broadcastMediaElementTime(t.currentTarget.currentTime)})})}}}]},314:function(n,e,t){"use strict";n.exports=["$timeout",function(n){return{template:"",restrict:"A",link:function(e,t){t.ready(function(){e.$apply(function(){e.vm.loadingTranscriptions=!1,n(function(){e.vm.scrollTranscription()},500)})})}}}]},315:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty,r=(i.keys,i.each);function o(n,e,t,i,o){var s,c=this;function l(){var e=n.params.collectionId,r=n.params.itemId;c.showMedia=!1,c.loadingData=!0,t.getItem(e,r).then(function(e){if(c.loadingData=!1,!a(e)){if(c.item=e,a(c.item.media))return n.go("main");c.media=c.item.media.map(function(n){return n.name}),n.params.mediaId||(o.search({}),n.go("main.media.instance",{mediaId:c.media[0]})),i(function(){var e=n.params.mediaId;c.config.current=c.media.indexOf(e),c.config.item=c.item.media[c.config.current]})}})}function u(){r(c.media,function(e,t){c.config.current===t&&(o.search({}),c.config.item=null,i(function(){c.config.item=c.item.media[c.config.current],n.go("main.media.instance",{mediaId:e})}))})}c.$onInit=function(){s=e.$on("item data loaded",l),c.config={current:0,item:null,showItemInformation:!1},l()},c.$onDestroy=function(){s()},c.previousItem=function(){0!==c.config.current&&(c.config.current-=1,u())},c.nextItem=function(){c.config.current!==c.item.media.length-1&&(c.config.current+=1,u())}}n.exports={template:t(316),bindings:{},controller:o,controllerAs:"vm"},o.$inject=["$state","$rootScope","dataService","$timeout","$location"]},316:function(n,e){n.exports='<div layout="column">\n    <div layout="row" layout-align="center center" flex ng-if="!vm.loadingData">\n        <md-button\n            class="small-button"\n            aria-label="previous item"\n            ng-click="vm.previousItem()"\n            ng-disabled="vm.config.current === 0"\n            blur-on-click>\n                <span class="fa fa-step-backward fa-lg"></span>\n                <md-tooltip>Previous Item</md-tooltip>\n        </md-button>\n        <div class="md-subhead">\n            Multimedia item {{vm.config.current + 1}}&nbsp;of&nbsp;{{vm.item.media.length}}\n        </div>\n        <md-button\n            class="small-button"\n            aria-label="next item"\n            ng-click="vm.nextItem()"\n            ng-disabled="vm.config.current === vm.item.media.length - 1"\n            blur-on-click>\n                <span class="fa fa-step-forward fa-lg"></span>\n                <md-tooltip>Next Item</md-tooltip>\n        </md-button>\n    </div>\n    <div ng-if="vm.config.item.type === \'audio\'">\n        <div layout="row" layout-align="center start" flex ng-hide="vm.config.showItemInformation">\n            <pdsc-audio-player-component\n                element="vm.config.item">\n            </pdsc-audio-player-component>\n        </div>\n        <div\n            layout="row"\n            layout-align="center center"\n            ng-if="\n                vm.config.item.eaf.length ||\n                vm.config.item.trs.length ||\n                vm.config.item.ixt.length ||\n                vm.config.item.flextext.length\n            "\n            ng-hide="vm.config.showItemInformation">\n            <pdsc-transcription-render-component\n                element="vm.config.item"\n                ng-if="vm.config.item">\n            </pdsc-transcription-render-component>\n        </div>\n    </div>\n    <div ng-if="vm.config.item.type === \'video\'">\n        <div layout="row"\n                layout-align="center start"\n                layout-padding\n                flex ng-hide="vm.config.showItemInformation">\n            <pdsc-video-player-component\n                element="vm.config.item">\n            </pdsc-video-player-component>\n            <div\n                layout="row"\n                class="hide-xs hide-sm"\n                ng-if="\n                    vm.config.item.eaf.length ||\n                    vm.config.item.trs.length ||\n                    vm.config.item.ixt.length ||\n                    vm.config.item.flextext.length\n                "\n                ng-hide="vm.config.showItemInformation">\n                <pdsc-transcription-render-component\n                    element="vm.config.item"\n                    ng-if="vm.config.item">\n                </pdsc-transcription-render-component>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},317:function(n,e,t){"use strict";function i(n,e,t,i){var a,r=this;function o(){var n=i.playFrom.start,t=i.playFrom.end,a=document.getElementById(r.element.name);a.currentTime=n,a.play(),e(function(){a.pause()},1e3*(t-n))}r.$onInit=function(){a=i.listenForPlayFrom(o),r.mediaReadyToPlay=!1,r.loginRequired=!1},r.$onDestroy=function(){a()}}n.exports={template:t(318),bindings:{element:"<"},controller:i,controllerAs:"vm"},i.$inject=["$state","$timeout","$location","dataService"]},318:function(n,e){n.exports='<div\n    layout="column"\n    layout-align="center center"\n    ng-show="!vm.mediaReadyToPlay">\n        <div layout="row" layout-padding>\n            <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>\n            <span>\n                Loading media... please wait.\n            </span>\n        </div>\n</div>\n<div\n    layout="column"\n    ng-show="vm.mediaReadyToPlay">\n\n    <div layout="row">\n        <div ng-repeat="src in vm.element.files">\n            <md-button class="small-button" href="{{src | stripTime}}" download>\n                <i class="fa fa-download fa-lg"></i> Download {{src | stripTime | extension}}\n            </md-button>\n        </div>\n    </div>\n    \x3c!--\n    <div class="col-sm-12 col-md-12 col-lg-12" style="margin: 5px 0px;">\n        <img ng-src="{{itemData.audioVisualisations[k]}}" style="width: 100%;" alt="&nbsp;Visualisation unavailable at this time">\n    </div>\n    --\x3e\n    <div layout="row" layout-align="start center">\n        <audio\n            id="{{vm.element.name}}"\n            class="media-viewer-player-style"\n            controls\n            controlsList="nodownload"\n            preload="metadata"\n            media-ready\n            time-update>\n                <source ng-repeat="src in vm.element.files" ng-src="{{src}}" />\n        </audio>\n    </div>\n</div>\n'},319:function(n,e,t){"use strict";function i(n,e,t,i){var a,r=this;function o(){var n=i.playFrom.start,t=i.playFrom.end,a=document.getElementById(r.element.name);a.currentTime=n,a.play(),e(function(){a.pause()},1e3*(t-n))}r.$onInit=function(){a=i.listenForPlayFrom(o),r.mediaReadyToPlay=!1,r.loginRequired=!1},r.$onDestroy=function(){a()}}n.exports={template:t(320),bindings:{element:"<"},controller:i,controllerAs:"vm"},i.$inject=["$state","$timeout","$location","dataService"]},320:function(n,e){n.exports='<div\n    layout="column"\n    layout-align="center center"\n    ng-show="!vm.mediaReadyToPlay">\n        <div layout="row" layout-padding>\n            <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>\n            <span>\n                Loading media... please wait.\n            </span>\n        </div>\n</div>\n<div\n    layout="column"\n    ng-show="vm.mediaReadyToPlay">\n\n    <div layout="row">\n        <div ng-repeat="src in vm.element.files">\n            <md-button class="small-button" href="{{src | stripTime}}" download>\n                <i class="fa fa-download fa-lg"></i> Download {{src | stripTime | extension}}\n            </md-button>\n        </div>\n    </div>\n    <div layout="row" layout-align="start center">\n        <video\n            id="{{vm.element.name}}"\n            class="media-viewer-player-style"\n            controls\n            controlsList="nodownload"\n            preload="metadata"\n            media-ready\n            time-update>\n                <source ng-repeat="src in vm.element.files" src="{{src}}" />\n        </video>\n    </div>\n</div>\n'},321:function(n,e,t){"use strict";var i=t(6),a=i.includes,r=i.map,o=i.isEmpty;function s(n,e,t,i,s,c){var l,u=this;function d(){u.selectedTranscription&&(u.loadingTranscriptions=!0,u.showTranscription=!1,u.showInterlinearText=!1,e(function(){a(["eaf","trs"],u.selectedType)?(u.showTranscription=!0,u.showInterlinearText=!1):a(["ixt","flextext"],u.selectedType)&&(u.showTranscription=!1,u.showInterlinearText=!0),p()},1e3))}function m(e,t){n.broadcastPlayFrom({start:0}),u.selectedType=e,u.selectedTranscriptionName=t||u.element[u.selectedType][0].name,u.selectedTranscription=u.transcriptionsByName[u.selectedTranscriptionName],i.search("transcription",u.selectedTranscriptionName),d()}function p(){var e=u.selectedTranscription.map(function(e){return e.time.begin>n.mediaElementTime?1:0});u.selectedIndex=_.indexOf(e,1,!0)-1;var t=i.hash();i.hash(u.selectedIndex),s(),i.hash(t)}u.$onInit=function(){c.params.segment&&n.broadcastMediaElementTime(c.params.segment),l=n.listenForMediaElementBroadcast(p),u.transcriptions={},u.transcriptionsByName={};var e=function(){var n=[];return o(u.element.eaf)||u.transcriptions.eaf||(u.transcriptions.eaf={},n.push("eaf")),o(u.element.trs)||u.transcriptions.trs||(u.transcriptions.trs={},n.push("trs")),o(u.element.ixt)||u.transcriptions.ixt||(u.transcriptions.ixt={},n.push("ixt")),o(u.element.flextext)||u.transcriptions.flextext||(u.transcriptions.flextext={},n.push("flextext")),n}();if(!o(e)){c.params.segment&&(n.mediaElementTime=c.params.segment);var i=t.when();return e.forEach(function(e){i=i.then(function(e){return function(){return function(e){var t=r(u.element[e],function(t){return n.loadTranscription(e,t).then(function(n){u.transcriptions[e][t.name]=n,u.transcriptionsByName[t.name]=n})});return Promise.all(t)}(e)}}(e))}),i.then(function(){c.params.transcription?(u.selectedTranscription=u.transcriptionsByName[c.params.transcription],u.selectedType=c.params.transcription.split(".").pop(),u.selectedTranscriptionName=c.params.transcription,d()):m(e[0])})}},u.$onDestroy=function(){l()},u.queueTranscription=m,u.play=function(e){n.broadcastPlayFrom(e)},u.scrollTranscription=p,u.transcriptionOptions=["eaf","trs","ixt","flextext"]}n.exports={template:t(322),bindings:{element:"<"},controller:s,controllerAs:"vm"},s.$inject=["dataService","$timeout","$q","$location","$anchorScroll","$state"]},322:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.eaf.length"\n        ng-disabled="!vm.transcriptions[\'eaf\'] || vm.selectedType === \'eaf\'"\n        ng-click="vm.queueTranscription(\'eaf\')">\n            EAF\n    </md-button>\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.trs.length"\n        ng-disabled="!vm.transcriptions[\'trs\'] || vm.selectedType === \'trs\'"\n        ng-click="vm.queueTranscription(\'trs\')">\n            TRS\n    </md-button>\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.ixt.length"\n        ng-disabled="!vm.transcriptions[\'ixt\'] || vm.selectedType === \'ixt\'"\n        ng-click="vm.queueTranscription(\'ixt\')">\n            IXT\n    </md-button>\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.flextext.length"\n        ng-disabled="!vm.transcriptions[\'flextext\'] || vm.selectedType === \'flextext\'"\n        ng-click="vm.queueTranscription(\'flextext\')">\n            FLEXTEXT\n    </md-button>\n</div>\n<div layout="row" layout-align="center center">\n    <md-input-container ng-show="vm.element[vm.selectedType].length > 1">\n        <md-select\n            ng-model="vm.selectedTranscriptionName"\n            ng-change="vm.queueTranscription(vm.selectedType, vm.selectedTranscriptionName)"\n            aria-label="select the transcription to display">\n            <md-option\n                ng-repeat="transcription in vm.element[vm.selectedType]"\n                ng-value="transcription.name">\n              {{transcription.name}}\n            </md-option>\n        </md-select>\n    </md-input-container>\n</div>\n\n<div layout="row" layout-align="center center" flex>\n    <div ng-show="vm.loadingTranscriptions" style="width: 500px;">\n        <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n    </div>\n</div>\n\n<div ng-if="!vm.selectedTranscription && !vm.loadingTranscriptions && (vm.showTranscription || vm.showInterlinearText)">\n    Unfortunately we\'re unable to show you the selected transcription. It\'s likely there is an error\n    in the file.\n</div>\n\n<div\n    class="media-viewer-transcription-panel media-viewer-transcription-panel-width"\n    ng-if="vm.showTranscription"\n    transcription-ready>\n    <div\n        layout="column" class="md-margin"\n        ng-repeat="(k, annotation) in vm.selectedTranscription" track by $index>\n        <div id="{{k}}"></div>\n        <div layout="row">\n            <div ng-if="vm.selectedType === \'eaf\'">\n                <md-button class="small-button" ng-click="vm.play({\n                    \'start\': annotation.time.begin,\n                    \'end\': annotation.time.end\n                })">\n                    <i class="fa fa-play fa-sm"></i>\n                    Play ({{annotation.time.begin | minutesSeconds}})\n                </md-button>\n            </div>\n            <div ng-if="vm.selectedType === \'trs\'">\n                <md-button class="small-button" ng-click="vm.play({\n                    \'start\': vm.selectedTranscription[k].time.begin,\n                    \'end\': vm.selectedTranscription[k+1].time.begin\n                })">\n                    <i class="fa fa-play fa-sm"></i>\n                    Play ({{annotation.time.begin | minutesSeconds}})\n                </md-button>\n            </div>\n            <div flex></div>\n            <div>\n                <pdsc-fragment-citation-component\n                    selected="vm.selectedTranscriptionName"\n                    element="vm.element"\n                    fragment="vm.selectedTranscription[k]">\n                </pdsc-fragment-citation>\n            </div>\n        </div>\n        <div ng-class="{ \'media-viewer-transcription-selected\': $index === vm.selectedIndex}" class="md-subhead">\n            <div ng-if="vm.selectedType === \'eaf\'">\n                <div layout="column" layout-padding>\n                    {{annotation.tierId}}\n                    <div ng-repeat="value in annotation.value" track by $index>\n                        <span ng-class="{\'media-viewer-highlight-translation md-title\': value.language === \'us\'}">\n                            {{value.text}}\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div ng-if="vm.selectedType === \'trs\'">\n                <div layout="row" layout-padding>\n                    {{annotation.value}}\n                    <br/>\n                    {{annotation.referenceValue}}\n                </div>\n            </div>\n        </div>\n        <md-divider ng-if="$index !== vm.selectedIndex"></md-divider>\n    </div>\n</div>\n\n<div\n    class="media-viewer-transcription-panel media-viewer-transcription-panel-width"\n    ng-if="vm.showInterlinearText"\n    transcription-ready>\n    <div ng-repeat="(k, sentence) in vm.selectedTranscription" layout="column" class="md-margin">\n        <div id="{{k}}"></div>\n        <div layout="row">\n            <div>\n                <md-button class="small-button" ng-click="vm.play({\n                    \'start\': vm.selectedTranscription[k].time.begin,\n                    \'end\': vm.selectedTranscription[k+1].time.begin\n                })">\n                    <i class="fa fa-play fa-sm"></i> Play ({{sentence.time.begin | minutesSeconds}})\n                </md-button>\n            </div>\n            <div flex></div>\n            <div>\n                <pdsc-fragment-citation-component\n                    selected="vm.selectedTranscriptionName"\n                    element="vm.element"\n                    fragment="vm.selectedTranscription[k]">\n                </pdsc-fragment-citation>\n            </div>\n        </div>\n        <div layout-padding>\n            <div class="" ng-class="{ \'media-viewer-transcription-selected\': $index === vm.selectedIndex}">{{sentence.transcription}}</div>\n            <div class="md-title media-viewer-highlight-translation">{{sentence.translation}}</div>\n            <div layout="row" layout-padding layout-wrap>\n                <table ng-repeat="word in sentence.words" class="media-viewer-table-style">\n                    <tbody class="md-caption media-viewer-highlight-word">\n                        <tr class="" ng-if="word.text">\n                            <td class="media-viewer-td-style" colspan="{{word.words.length}}">{{word.text}}</td>\n                        </tr>\n                        <tr class="" ng-if="!word.text">\n                            <td class="media-viewer-td-style" ng-repeat="w in word.words">{{w.text}}</td>\n                        </tr>\n                        <tr class="media-viewer-highlight-morpheme">\n                            <td class="media-viewer-td-style" ng-repeat="w in word.words">{{w.morpheme}}</td>\n                        </tr>\n                        <tr class="media-viewer-highlight-gloss">\n                            <td class="media-viewer-td-style" ng-repeat="w in word.words">{{w.gloss}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <md-divider ng-if="$index !== vm.selectedIndex"></md-divider>\n    </div>\n</div>\n'},323:function(n,e,t){"use strict";function i(n,e){var t=this;t.$onInit=function(){var i=n.absUrl().split(n.url())[0],a=e.params.collectionId,r=e.params.itemId,o=t.element.name,s=t.selected.split("/").pop(),c=t.fragment.time.begin;t.citation=i+"/"+a+"/"+r+"/media/"+o+"?transcription="+s+"&segment="+c},t.$onDestroy=function(){}}n.exports={template:t(324),bindings:{selected:"<",element:"<",fragment:"<"},controller:i,controllerAs:"vm"},i.$inject=["$location","$state"]},324:function(n,e){n.exports='<md-button\n    class="small-button"\n    data-clipboard-text="{{vm.citation}}"\n    aria-label="copy citation to clipboard"\n    ng-if="vm.citation">\n        <md-tooltip>\n            Copy fragment citation\n        </md-tooltip>\n        <i class="fa fa-clipboard fa-sm"></i>\n</md-button>\n'},325:function(n,e,t){"use strict";t(326),t(327),t(328),t(358),t(398)},326:function(n,e,t){"use strict";n.exports=angular.module("lodash",[]).factory("lodash",function(){return t(6)})},327:function(n,e,t){"use strict";n.exports=angular.module("moment",[]).factory("moment",function(){return t(2)})},328:function(n,e,t){"use strict";n.exports=angular.module("pdfjs",[]).factory("pdfjs",function(){return t(170)})},358:function(n,e,t){"use strict";n.exports=angular.module("jquery",[]).factory("jquery",function(){return t(206)})},398:function(n,e,t){"use strict";n.exports=angular.module("highlightjs",[]).factory("hljs",function(){return t(235)})},606:function(n,e,t){"use strict";function i(n,e){if(!n)throw new Error(e)}t.r(e);var a=function n(e,t,a){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.body=e,this.name=t||"GraphQL request",this.locationOffset=a||{line:1,column:1},this.locationOffset.line>0||i(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||i(0,"column in locationOffset is 1-indexed and must be positive")};function r(n,e){for(var t=/\r\n|[\n\r]/g,i=1,a=e+1,r=void 0;(r=t.exec(n.body))&&r.index<e;)i+=1,a=e+1-(r.index+r[0].length);return{line:i,column:a}}function o(n,e){var t=e.line,i=n.locationOffset.line-1,a=function(n,e){return 1===e.line?n.locationOffset.column-1:0}(n,e),r=t+i,o=e.column+a,l=(r-1).toString(),u=r.toString(),d=(r+1).toString(),m=d.length,p=n.body.split(/\r\n|[\n\r]/g);return p[0]=s(n.locationOffset.column-1)+p[0],[n.name+" ("+r+":"+o+")",t>=2&&c(m,l)+": "+p[t-2],c(m,u)+": "+p[t-1],s(2+m+o-1)+"^",t<p.length&&c(m,d)+": "+p[t]].filter(Boolean).join("\n")}function s(n){return Array(n+1).join(" ")}function c(n,e){return s(n-e.length)+e}function l(n,e,t,i,a,o,s){var c=Array.isArray(e)?0!==e.length?e:void 0:e?[e]:void 0,u=t;if(!u&&c){var d=c[0];u=d&&d.loc&&d.loc.source}var m=i;!m&&c&&(m=c.reduce(function(n,e){return e.loc&&n.push(e.loc.start),n},[])),m&&0===m.length&&(m=void 0);var p=void 0;i&&t?p=i.map(function(n){return r(t,n)}):c&&(p=c.reduce(function(n,e){return e.loc&&n.push(r(e.loc.source,e.loc.start)),n},[])),Object.defineProperties(this,{message:{value:n,enumerable:!0,writable:!0},locations:{value:p||void 0,enumerable:!0},path:{value:a||void 0,enumerable:!0},nodes:{value:c||void 0},source:{value:u||void 0},positions:{value:m||void 0},originalError:{value:o},extensions:{value:s||o&&o.extensions}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}function u(n,e,t){return new l("Syntax Error: "+t,void 0,n,[e])}function d(n){for(var e=n.split(/\r\n|[\n\r]/g),t=null,i=1;i<e.length;i++){var a=e[i],r=m(a);if(r<a.length&&(null===t||r<t)&&0===(t=r))break}if(t)for(var o=1;o<e.length;o++)e[o]=e[o].slice(t);for(;e.length>0&&p(e[0]);)e.shift();for(;e.length>0&&p(e[e.length-1]);)e.pop();return e.join("\n")}function m(n){for(var e=0;e<n.length&&(" "===n[e]||"\t"===n[e]);)e++;return e}function p(n){return m(n)===n.length}function f(n,e){var t=new T(h.SOF,0,0,0,0,null);return{source:n,options:e,lastToken:t,token:t,line:1,lineStart:0,advance:v,lookahead:g}}function v(){return this.lastToken=this.token,this.token=this.lookahead()}function g(){var n=this.token;if(n.kind!==h.EOF)do{n=n.next||(n.next=E(this,n))}while(n.kind===h.COMMENT);return n}l.prototype=Object.create(Error.prototype,{constructor:{value:l},name:{value:"GraphQLError"},toString:{value:function(){return function(n){var e=[];if(n.nodes)n.nodes.forEach(function(n){n.loc&&e.push(o(n.loc.source,r(n.loc.source,n.loc.start)))});else if(n.source&&n.locations){var t=n.source;n.locations.forEach(function(n){e.push(o(t,n))})}return 0===e.length?n.message:[n.message].concat(e).join("\n\n")+"\n"}(this)}}}),Object.assign;var h=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function b(n){var e=n.value;return e?n.kind+' "'+e+'"':n.kind}var y=String.prototype.charCodeAt,I=String.prototype.slice;function T(n,e,t,i,a,r,o){this.kind=n,this.start=e,this.end=t,this.line=i,this.column=a,this.value=o,this.prev=r,this.next=null}function w(n){return isNaN(n)?h.EOF:n<127?JSON.stringify(String.fromCharCode(n)):'"\\u'+("00"+n.toString(16).toUpperCase()).slice(-4)+'"'}function E(n,e){var t=n.source,i=t.body,a=i.length,r=function(n,e,t){for(var i=n.length,a=e;a<i;){var r=y.call(n,a);if(9===r||32===r||44===r||65279===r)++a;else if(10===r)++a,++t.line,t.lineStart=a;else{if(13!==r)break;10===y.call(n,a+1)?a+=2:++a,++t.line,t.lineStart=a}}return a}(i,e.end,n),o=n.line,s=1+r-n.lineStart;if(r>=a)return new T(h.EOF,a,a,o,s,e);var c=y.call(i,r);if(c<32&&9!==c&&10!==c&&13!==c)throw u(t,r,"Cannot contain the invalid character "+w(c)+".");switch(c){case 33:return new T(h.BANG,r,r+1,o,s,e);case 35:return function(n,e,t,i,a){var r=n.body,o=void 0,s=e;do{o=y.call(r,++s)}while(null!==o&&(o>31||9===o));return new T(h.COMMENT,e,s,t,i,a,I.call(r,e+1,s))}(t,r,o,s,e);case 36:return new T(h.DOLLAR,r,r+1,o,s,e);case 38:return new T(h.AMP,r,r+1,o,s,e);case 40:return new T(h.PAREN_L,r,r+1,o,s,e);case 41:return new T(h.PAREN_R,r,r+1,o,s,e);case 46:if(46===y.call(i,r+1)&&46===y.call(i,r+2))return new T(h.SPREAD,r,r+3,o,s,e);break;case 58:return new T(h.COLON,r,r+1,o,s,e);case 61:return new T(h.EQUALS,r,r+1,o,s,e);case 64:return new T(h.AT,r,r+1,o,s,e);case 91:return new T(h.BRACKET_L,r,r+1,o,s,e);case 93:return new T(h.BRACKET_R,r,r+1,o,s,e);case 123:return new T(h.BRACE_L,r,r+1,o,s,e);case 124:return new T(h.PIPE,r,r+1,o,s,e);case 125:return new T(h.BRACE_R,r,r+1,o,s,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(n,e,t,i,a){for(var r=n.body,o=r.length,s=e+1,c=0;s!==o&&null!==(c=y.call(r,s))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++s;return new T(h.NAME,e,s,t,i,a,I.call(r,e,s))}(t,r,o,s,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(n,e,t,i,a,r){var o=n.body,s=t,c=e,l=!1;if(45===s&&(s=y.call(o,++c)),48===s){if((s=y.call(o,++c))>=48&&s<=57)throw u(n,c,"Invalid number, unexpected digit after 0: "+w(s)+".")}else c=N(n,c,s),s=y.call(o,c);return 46===s&&(l=!0,s=y.call(o,++c),c=N(n,c,s),s=y.call(o,c)),69!==s&&101!==s||(l=!0,43!==(s=y.call(o,++c))&&45!==s||(s=y.call(o,++c)),c=N(n,c,s)),new T(l?h.FLOAT:h.INT,e,c,i,a,r,I.call(o,e,c))}(t,r,c,o,s,e);case 34:return 34===y.call(i,r+1)&&34===y.call(i,r+2)?function(n,e,t,i,a){for(var r=n.body,o=e+3,s=o,c=0,l="";o<r.length&&null!==(c=y.call(r,o));){if(34===c&&34===y.call(r,o+1)&&34===y.call(r,o+2))return l+=I.call(r,s,o),new T(h.BLOCK_STRING,e,o+3,t,i,a,d(l));if(c<32&&9!==c&&10!==c&&13!==c)throw u(n,o,"Invalid character within String: "+w(c)+".");92===c&&34===y.call(r,o+1)&&34===y.call(r,o+2)&&34===y.call(r,o+3)?(l+=I.call(r,s,o)+'"""',s=o+=4):++o}throw u(n,o,"Unterminated string.")}(t,r,o,s,e):function(n,e,t,i,a){for(var r=n.body,o=e+1,s=o,c=0,l="";o<r.length&&null!==(c=y.call(r,o))&&10!==c&&13!==c;){if(34===c)return l+=I.call(r,s,o),new T(h.STRING,e,o+1,t,i,a,l);if(c<32&&9!==c)throw u(n,o,"Invalid character within String: "+w(c)+".");if(++o,92===c){switch(l+=I.call(r,s,o-1),c=y.call(r,o)){case 34:l+='"';break;case 47:l+="/";break;case 92:l+="\\";break;case 98:l+="\b";break;case 102:l+="\f";break;case 110:l+="\n";break;case 114:l+="\r";break;case 116:l+="\t";break;case 117:var d=x(y.call(r,o+1),y.call(r,o+2),y.call(r,o+3),y.call(r,o+4));if(d<0)throw u(n,o,"Invalid character escape sequence: \\u"+r.slice(o+1,o+5)+".");l+=String.fromCharCode(d),o+=4;break;default:throw u(n,o,"Invalid character escape sequence: \\"+String.fromCharCode(c)+".")}s=++o}}throw u(n,o,"Unterminated string.")}(t,r,o,s,e)}throw u(t,r,39===c?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character "+w(c)+".")}function N(n,e,t){var i=n.body,a=e,r=t;if(r>=48&&r<=57){do{r=y.call(i,++a)}while(r>=48&&r<=57);return a}throw u(n,a,"Invalid number, expected digit but got: "+w(r)+".")}function x(n,e,t,i){return k(n)<<12|k(e)<<8|k(t)<<4|k(i)}function k(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}T.prototype.toJSON=T.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var O=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",VARIABLE:"Variable",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension",DIRECTIVE_DEFINITION:"DirectiveDefinition"}),A=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function _(n,e){var t="string"==typeof n?new a(n):n;if(!(t instanceof a))throw new TypeError("Must provide Source. Received: "+String(t));return function(n){var e=n.token;In(n,h.SOF);var t=[];do{t.push(P(n))}while(!yn(n,h.EOF));return{kind:O.DOCUMENT,definitions:t,loc:gn(n,e)}}(f(t,e||{}))}function j(n,e){var t=f("string"==typeof n?new a(n):n,e||{});In(t,h.SOF);var i=Y(t,!1);return In(t,h.EOF),i}function D(n,e){var t=f("string"==typeof n?new a(n):n,e||{});In(t,h.SOF);var i=W(t);return In(t,h.EOF),i}function S(n){var e=In(n,h.NAME);return{kind:O.NAME,value:e.value,loc:gn(n,e)}}function P(n){if(bn(n,h.NAME))switch(n.token.value){case"query":case"mutation":case"subscription":case"fragment":return C(n);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"extend":case"directive":return en(n)}else{if(bn(n,h.BRACE_L))return C(n);if(tn(n))return en(n)}throw wn(n)}function C(n){if(bn(n,h.NAME))switch(n.token.value){case"query":case"mutation":case"subscription":return R(n);case"fragment":return function(n){var e=n.token;return Tn(n,"fragment"),n.options.experimentalFragmentVariables?{kind:O.FRAGMENT_DEFINITION,name:q(n),variableDefinitions:L(n),typeCondition:(Tn(n,"on"),nn(n)),directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}:{kind:O.FRAGMENT_DEFINITION,name:q(n),typeCondition:(Tn(n,"on"),nn(n)),directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}}(n)}else if(bn(n,h.BRACE_L))return R(n);throw wn(n)}function R(n){var e=n.token;if(bn(n,h.BRACE_L))return{kind:O.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:B(n),loc:gn(n,e)};var t=$(n),i=void 0;return bn(n,h.NAME)&&(i=S(n)),{kind:O.OPERATION_DEFINITION,operation:t,name:i,variableDefinitions:L(n),directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}}function $(n){var e=In(n,h.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw wn(n,e)}function L(n){return bn(n,h.PAREN_L)?En(n,h.PAREN_L,F,h.PAREN_R):[]}function F(n){var e=n.token;return{kind:O.VARIABLE_DEFINITION,variable:M(n),type:(In(n,h.COLON),W(n)),defaultValue:yn(n,h.EQUALS)?Y(n,!0):void 0,loc:gn(n,e)}}function M(n){var e=n.token;return In(n,h.DOLLAR),{kind:O.VARIABLE,name:S(n),loc:gn(n,e)}}function B(n){var e=n.token;return{kind:O.SELECTION_SET,selections:En(n,h.BRACE_L,V,h.BRACE_R),loc:gn(n,e)}}function V(n){return bn(n,h.SPREAD)?function(n){var e=n.token;if(In(n,h.SPREAD),bn(n,h.NAME)&&"on"!==n.token.value)return{kind:O.FRAGMENT_SPREAD,name:q(n),directives:H(n,!1),loc:gn(n,e)};var t=void 0;return"on"===n.token.value&&(n.advance(),t=nn(n)),{kind:O.INLINE_FRAGMENT,typeCondition:t,directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}}(n):function(n){var e=n.token,t=S(n),i=void 0,a=void 0;return yn(n,h.COLON)?(i=t,a=S(n)):a=t,{kind:O.FIELD,alias:i,name:a,arguments:U(n,!1),directives:H(n,!1),selectionSet:bn(n,h.BRACE_L)?B(n):void 0,loc:gn(n,e)}}(n)}function U(n,e){var t=e?z:G;return bn(n,h.PAREN_L)?En(n,h.PAREN_L,t,h.PAREN_R):[]}function G(n){var e=n.token;return{kind:O.ARGUMENT,name:S(n),value:(In(n,h.COLON),Y(n,!1)),loc:gn(n,e)}}function z(n){var e=n.token;return{kind:O.ARGUMENT,name:S(n),value:(In(n,h.COLON),X(n)),loc:gn(n,e)}}function q(n){if("on"===n.token.value)throw wn(n);return S(n)}function Y(n,e){var t=n.token;switch(t.kind){case h.BRACKET_L:return function(n,e){var t=n.token,i=e?X:K;return{kind:O.LIST,values:function(n,e,t,i){In(n,e);for(var a=[];!yn(n,i);)a.push(t(n));return a}(n,h.BRACKET_L,i,h.BRACKET_R),loc:gn(n,t)}}(n,e);case h.BRACE_L:return function(n,e){var t=n.token;In(n,h.BRACE_L);for(var i=[];!yn(n,h.BRACE_R);)i.push(Q(n,e));return{kind:O.OBJECT,fields:i,loc:gn(n,t)}}(n,e);case h.INT:return n.advance(),{kind:O.INT,value:t.value,loc:gn(n,t)};case h.FLOAT:return n.advance(),{kind:O.FLOAT,value:t.value,loc:gn(n,t)};case h.STRING:case h.BLOCK_STRING:return J(n);case h.NAME:return"true"===t.value||"false"===t.value?(n.advance(),{kind:O.BOOLEAN,value:"true"===t.value,loc:gn(n,t)}):"null"===t.value?(n.advance(),{kind:O.NULL,loc:gn(n,t)}):(n.advance(),{kind:O.ENUM,value:t.value,loc:gn(n,t)});case h.DOLLAR:if(!e)return M(n)}throw wn(n)}function J(n){var e=n.token;return n.advance(),{kind:O.STRING,value:e.value,block:e.kind===h.BLOCK_STRING,loc:gn(n,e)}}function X(n){return Y(n,!0)}function K(n){return Y(n,!1)}function Q(n,e){var t=n.token;return{kind:O.OBJECT_FIELD,name:S(n),value:(In(n,h.COLON),Y(n,e)),loc:gn(n,t)}}function H(n,e){for(var t=[];bn(n,h.AT);)t.push(Z(n,e));return t}function Z(n,e){var t=n.token;return In(n,h.AT),{kind:O.DIRECTIVE,name:S(n),arguments:U(n,e),loc:gn(n,t)}}function W(n){var e=n.token,t=void 0;return yn(n,h.BRACKET_L)?(t=W(n),In(n,h.BRACKET_R),t={kind:O.LIST_TYPE,type:t,loc:gn(n,e)}):t=nn(n),yn(n,h.BANG)?{kind:O.NON_NULL_TYPE,type:t,loc:gn(n,e)}:t}function nn(n){var e=n.token;return{kind:O.NAMED_TYPE,name:S(n),loc:gn(n,e)}}function en(n){var e=tn(n)?n.lookahead():n.token;if(e.kind===h.NAME)switch(e.value){case"schema":return function(n){var e=n.token;Tn(n,"schema");var t=H(n,!0),i=En(n,h.BRACE_L,rn,h.BRACE_R);return{kind:O.SCHEMA_DEFINITION,directives:t,operationTypes:i,loc:gn(n,e)}}(n);case"scalar":return function(n){var e=n.token,t=an(n);Tn(n,"scalar");var i=S(n),a=H(n,!0);return{kind:O.SCALAR_TYPE_DEFINITION,description:t,name:i,directives:a,loc:gn(n,e)}}(n);case"type":return function(n){var e=n.token,t=an(n);Tn(n,"type");var i=S(n),a=on(n),r=H(n,!0),o=sn(n);return{kind:O.OBJECT_TYPE_DEFINITION,description:t,name:i,interfaces:a,directives:r,fields:o,loc:gn(n,e)}}(n);case"interface":return function(n){var e=n.token,t=an(n);Tn(n,"interface");var i=S(n),a=H(n,!0),r=sn(n);return{kind:O.INTERFACE_TYPE_DEFINITION,description:t,name:i,directives:a,fields:r,loc:gn(n,e)}}(n);case"union":return function(n){var e=n.token,t=an(n);Tn(n,"union");var i=S(n),a=H(n,!0),r=dn(n);return{kind:O.UNION_TYPE_DEFINITION,description:t,name:i,directives:a,types:r,loc:gn(n,e)}}(n);case"enum":return function(n){var e=n.token,t=an(n);Tn(n,"enum");var i=S(n),a=H(n,!0),r=mn(n);return{kind:O.ENUM_TYPE_DEFINITION,description:t,name:i,directives:a,values:r,loc:gn(n,e)}}(n);case"input":return function(n){var e=n.token,t=an(n);Tn(n,"input");var i=S(n),a=H(n,!0),r=fn(n);return{kind:O.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:i,directives:a,fields:r,loc:gn(n,e)}}(n);case"extend":return function(n){var e=n.lookahead();if(e.kind===h.NAME)switch(e.value){case"scalar":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"scalar");var t=S(n),i=H(n,!0);if(0===i.length)throw wn(n);return{kind:O.SCALAR_TYPE_EXTENSION,name:t,directives:i,loc:gn(n,e)}}(n);case"type":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"type");var t=S(n),i=on(n),a=H(n,!0),r=sn(n);if(0===i.length&&0===a.length&&0===r.length)throw wn(n);return{kind:O.OBJECT_TYPE_EXTENSION,name:t,interfaces:i,directives:a,fields:r,loc:gn(n,e)}}(n);case"interface":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"interface");var t=S(n),i=H(n,!0),a=sn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.INTERFACE_TYPE_EXTENSION,name:t,directives:i,fields:a,loc:gn(n,e)}}(n);case"union":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"union");var t=S(n),i=H(n,!0),a=dn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.UNION_TYPE_EXTENSION,name:t,directives:i,types:a,loc:gn(n,e)}}(n);case"enum":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"enum");var t=S(n),i=H(n,!0),a=mn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.ENUM_TYPE_EXTENSION,name:t,directives:i,values:a,loc:gn(n,e)}}(n);case"input":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"input");var t=S(n),i=H(n,!0),a=fn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:i,fields:a,loc:gn(n,e)}}(n)}throw wn(n,e)}(n);case"directive":return function(n){var e=n.token,t=an(n);Tn(n,"directive"),In(n,h.AT);var i=S(n),a=ln(n);Tn(n,"on");var r=function(n){yn(n,h.PIPE);var e=[];do{e.push(vn(n))}while(yn(n,h.PIPE));return e}(n);return{kind:O.DIRECTIVE_DEFINITION,description:t,name:i,arguments:a,locations:r,loc:gn(n,e)}}(n)}throw wn(n,e)}function tn(n){return bn(n,h.STRING)||bn(n,h.BLOCK_STRING)}function an(n){if(tn(n))return J(n)}function rn(n){var e=n.token,t=$(n);In(n,h.COLON);var i=nn(n);return{kind:O.OPERATION_TYPE_DEFINITION,operation:t,type:i,loc:gn(n,e)}}function on(n){var e=[];if("implements"===n.token.value){n.advance(),yn(n,h.AMP);do{e.push(nn(n))}while(yn(n,h.AMP)||n.options.allowLegacySDLImplementsInterfaces&&bn(n,h.NAME))}return e}function sn(n){return n.options.allowLegacySDLEmptyFields&&bn(n,h.BRACE_L)&&n.lookahead().kind===h.BRACE_R?(n.advance(),n.advance(),[]):bn(n,h.BRACE_L)?En(n,h.BRACE_L,cn,h.BRACE_R):[]}function cn(n){var e=n.token,t=an(n),i=S(n),a=ln(n);In(n,h.COLON);var r=W(n),o=H(n,!0);return{kind:O.FIELD_DEFINITION,description:t,name:i,arguments:a,type:r,directives:o,loc:gn(n,e)}}function ln(n){return bn(n,h.PAREN_L)?En(n,h.PAREN_L,un,h.PAREN_R):[]}function un(n){var e=n.token,t=an(n),i=S(n);In(n,h.COLON);var a=W(n),r=void 0;yn(n,h.EQUALS)&&(r=X(n));var o=H(n,!0);return{kind:O.INPUT_VALUE_DEFINITION,description:t,name:i,type:a,defaultValue:r,directives:o,loc:gn(n,e)}}function dn(n){var e=[];if(yn(n,h.EQUALS)){yn(n,h.PIPE);do{e.push(nn(n))}while(yn(n,h.PIPE))}return e}function mn(n){return bn(n,h.BRACE_L)?En(n,h.BRACE_L,pn,h.BRACE_R):[]}function pn(n){var e=n.token,t=an(n),i=S(n),a=H(n,!0);return{kind:O.ENUM_VALUE_DEFINITION,description:t,name:i,directives:a,loc:gn(n,e)}}function fn(n){return bn(n,h.BRACE_L)?En(n,h.BRACE_L,un,h.BRACE_R):[]}function vn(n){var e=n.token,t=S(n);if(A.hasOwnProperty(t.value))return t;throw wn(n,e)}function gn(n,e){if(!n.options.noLocation)return new hn(e,n.lastToken,n.source)}function hn(n,e,t){this.start=n.start,this.end=e.end,this.startToken=n,this.endToken=e,this.source=t}function bn(n,e){return n.token.kind===e}function yn(n,e){var t=n.token.kind===e;return t&&n.advance(),t}function In(n,e){var t=n.token;if(t.kind===e)return n.advance(),t;throw u(n.source,t.start,"Expected "+e+", found "+b(t))}function Tn(n,e){var t=n.token;if(t.kind===h.NAME&&t.value===e)return n.advance(),t;throw u(n.source,t.start,'Expected "'+e+'", found '+b(t))}function wn(n,e){var t=e||n.token;return u(n.source,t.start,"Unexpected "+b(t))}function En(n,e,t,i){In(n,e);for(var a=[t(n)];!yn(n,i);)a.push(t(n));return a}t.d(e,"parse",function(){return _}),t.d(e,"parseValue",function(){return j}),t.d(e,"parseType",function(){return D}),t.d(e,"parseConstValue",function(){return X}),t.d(e,"parseTypeReference",function(){return W}),t.d(e,"parseNamedType",function(){return nn}),hn.prototype.toJSON=hn.prototype.inspect=function(){return{start:this.start,end:this.end}}}});
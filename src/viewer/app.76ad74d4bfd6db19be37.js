!function(n){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],u=0,m=[];u<s.length;u++)r=s[u],a[r]&&m.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(n[i]=c[i]);for(d&&d(e);m.length;)m.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],i=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),n=r(r.s=t[0]))}return n}var i={},a={2:0},o=[];function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.e=function(n){var e=[],t=a[n];if(0!==t)if(t)e.push(t[2]);else{var i=new Promise(function(e,i){t=a[n]=[e,i]});e.push(t[2]=i);var o,s=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(n){return r.p+""+({}[n]||n)+".76ad74d4bfd6db19be37.js"}(n),o=function(e){c.onerror=c.onload=null,clearTimeout(l);var t=a[n];if(0!==t){if(t){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+n+" failed.\n("+i+": "+o+")");r.type=i,r.request=o,t[1](r)}a[n]=void 0}};var l=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,s.appendChild(c)}return Promise.all(e)},r.m=n,r.c=i,r.d=function(n,e,t){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var i in n)r.d(t,i,function(e){return n[e]}.bind(null,i));return t},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="/",r.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;o.push([246,0,1]),t()}({189:function(n,e,t){"use strict";function i(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}var a=t(258),o=t(6),r=o.includes,s=(o.isEmpty,o.compact),c=o.isArray,l=o.each,d=o.map,u=o.flattenDeep,m=o.groupBy,f=t(6);n.exports={parseOAI:function(n){var e=v(n);try{return{data:g(e=e["OAI-PMH"].GetRecord.record.metadata["olac:olac"])}}catch(n){return{data:""}}},parseXML:v,createItemDataStructure:g,createItemDataStructureFromGraphQL:function(n){var e=n.identifier.split("-")[0],t=n.identifier.split("-")[1],a=function(n){var e=n.data,t="http://catalog.paradisec.org.au/repository/"+n.collectionId+"/"+n.itemId;return c(e.files)||(e.files=[e.files]),e.files.map(function(n){return{name:n.filename,path:t+"/"+n.filename,type:n.mimetype}})}({data:n,collectionId:e,itemId:t}),o=s(g([].concat(i(p.videoTypes),i(p.audioTypes)),a)),l=s(g(p.imageTypes,a)),u=(l=s(l.filter(function(n){return!n.name.match("thumb")}))).map(function(n){var e,t,i=void 0,a=void 0;return e=(i=n.name.split(".")).pop(),t=i.join(".")+"-thumb-PDSC_ADMIN."+e,(a=n.path.split("/")).pop(),a=a.join("/"),{name:t,type:n.type,path:a+"/"+t}}),f=s(g(p.documentTypes,a)),v=s(g(p.transcriptionTypes,a));return{audioVisualisations:{},citation:n.citation,collectionId:e,collectionLink:n.permalink,contributor:function(n){var e=n.data;return[{name:e.collector.name,role:"compiler"}].concat(i(e.roles.map(function(n){return{name:n.user_name,role:n.role_name}})))}({data:n}),date:n.date,description:n.description,documents:f.map(function(n){return n.path}),identifier:[n.identifier,n.permalink],images:l.map(function(n){return n.path}),itemId:t,media:function(n){return n=m(n,function(n){return n.name.split(".")[0]}),d(n,function(n,t){return{name:t,files:e([].concat(i(n)),"media"),eaf:e([].concat(i(n)),"eaf"),ixt:e([].concat(i(n)),"ixt"),trs:e([].concat(i(n)),"trs"),type:n[0].type.split("/")[0]}});function e(n,e){if("media"===e){var t=[].concat(i(p.videoTypes),i(p.audioTypes));return(n=n.filter(function(n){return r(t,n.name.split(".")[1])})).map(function(n){return n.path})}return(n=n.filter(function(n){return n.name.split(".")[1]===e})).map(function(n){return{name:n.name,url:n.path}})}}([].concat(i(o),i(v))),openAccess:"open"===n.access_class,rights:n.rights,thumbnails:u.map(function(n){return n.path}),title:n.title,transcriptions:v.map(function(n){return{name:n.name,url:n.path}})};function g(n,e){var t=void 0;return e.filter(function(e){return t=e.name.split(".").pop(),r(n,t)})}},groupByIdentifier:function(n){var e=m(n,"collectionId"),t={};return _(e).keys().sort().each(function(n){t[n]=e[n]}),t},groupByGenre:function(n){var e=n.filter(function(n){return n.data.classifications});e=m(e,function(n){return n.data.classifications.filter(function(n){return n.genre})[0].genre});var t={};return f(e).keys().sort().each(function(n){t[n]=e[n]}),t},groupBySpeaker:function(n){var e={},t=void 0,i=void 0;n.filter(function(n){return n.data.classifications}).forEach(function(n){t=n.index.speakerRoles,n.data.speakers.filter(function(n){return r(t,n.role)}).forEach(function(t){i=t.name+" ("+t.role+")",e[i]||(e[i]=[]),e[i].push(n)})});var a={};return f(e).keys().sort().each(function(n){a[n]=e[n]}),a}};var p={imageTypes:["jpg","jpeg","png"],videoTypes:["mp4","ogg","ogv","mov","webm"],audioTypes:["mp3","ogg","oga"],transcriptionTypes:["eaf","trs","ixt"],documentTypes:["pdf"]};function v(n,e){var t=(new DOMParser).parseFromString(n,"text/xml");return"xml"===e?n:a.convert(t)}function g(n){c(n["dc:identifier"])||(n["dc:identifier"]=[n["dc:identifier"]]),c(n["dc:contributor"])||(n["dc:contributor"]=[n["dc:contributor"]]);var e={openAccess:!0,identifier:n["dc:identifier"].map(function(n){return n["#text"]}),title:t(n,"dc:title"),date:t(n,"dcterms:created"),description:t(n,"dc:description"),citation:t(n,"dcterms:bibliographicCitation"),contributor:n["dc:contributor"].map(function(n){return{name:n["#text"],role:n["@attributes"]["olac:code"]}}),images:h("images",n),documents:h("documents",n),media:function(n){var e=h("audio",n),t=h("video",n),i=c("eaf",n),a=c("trs",n),o=c("ixt",n),r=c("flextext",n),s=[];return l(e,function(n,e){s.push(u(e,n,"audio"))}),l(t,function(n,e){s.push(u(e,n,"video"))}),s;function c(n,e){var t=h(n,e);return l(t,function(n,e){t[e]=d(n,function(n){return{name:n.split("/").pop(),url:n}})}),t}function u(n,e,t){return{name:n,type:t,files:e,eaf:i[n]?i[n]:[],trs:a[n]?a[n]:[],ixt:o[n]?o[n]:[],flextext:r[n]?r[n]:[]}}}(n),rights:t(n,"dcterms:accessRights")};return e.transcriptions=u(e.media.map(function(n){return s([n.eaf,n.trs,n.ixt,n.flextext])})).sort(),e.rights.match("Closed.*")&&(e.openAccess=!1),e.thumbnails=e.images.map(function(n){var e=n.split("/").pop(),t=e.split(".")[0]+"-thumb-PDSC_ADMIN."+e.split(".")[1];return n.replace(e,t)}),e.audioVisualisations=function(n){var e=f.map(n,function(n){var e=n[0].split("/").pop(),t=e.split(".")[0]+"-soundimage-PDSC_ADMIN.jpg";return n[0].replace(e,t)});return e=f(e).chain().groupBy(function(n){return n.split("/").pop().split(".")[0].split("-soundimage")[0]}).value(),f.each(e,function(n,t){e[t]=n[0]}),e}(e.audio),e;function t(n,e){try{return n[e]["#text"]}catch(n){return""}}}function h(n,e){var t;"images"===n?t=p.imageTypes:"video"===n?t=p.videoTypes:"audio"===n?t=p.audioTypes:"documents"===n?t=p.documentTypes:"eaf"===n?t="eaf":"trs"===n?t="trs":"ixt"===n?t="ixt":"flextext"===n&&(t="flextext"),c(e["dcterms:tableOfContents"])||(e["dcterms:tableOfContents"]=[e["dcterms:tableOfContents"]]);var i=s(e["dcterms:tableOfContents"].map(function(n){var e=n["#text"].split(".").pop();if(void 0!==e&&void 0!==t&&r(t,e.toLowerCase()))return n["#text"]}));return r(["audio","video","eaf","trs","ixt","flextext"],n)?f(i).chain().groupBy(function(n){return f.last(n.split("/")).split(".")[0]}).value():i}},190:function(n,e,t){var i={"./af":37,"./af.js":37,"./ar":38,"./ar-dz":39,"./ar-dz.js":39,"./ar-kw":40,"./ar-kw.js":40,"./ar-ly":41,"./ar-ly.js":41,"./ar-ma":42,"./ar-ma.js":42,"./ar-sa":43,"./ar-sa.js":43,"./ar-tn":44,"./ar-tn.js":44,"./ar.js":38,"./az":45,"./az.js":45,"./be":46,"./be.js":46,"./bg":47,"./bg.js":47,"./bm":48,"./bm.js":48,"./bn":49,"./bn.js":49,"./bo":50,"./bo.js":50,"./br":51,"./br.js":51,"./bs":52,"./bs.js":52,"./ca":53,"./ca.js":53,"./cs":54,"./cs.js":54,"./cv":55,"./cv.js":55,"./cy":56,"./cy.js":56,"./da":57,"./da.js":57,"./de":58,"./de-at":59,"./de-at.js":59,"./de-ch":60,"./de-ch.js":60,"./de.js":58,"./dv":61,"./dv.js":61,"./el":62,"./el.js":62,"./en-au":63,"./en-au.js":63,"./en-ca":64,"./en-ca.js":64,"./en-gb":65,"./en-gb.js":65,"./en-ie":66,"./en-ie.js":66,"./en-il":67,"./en-il.js":67,"./en-nz":68,"./en-nz.js":68,"./eo":69,"./eo.js":69,"./es":70,"./es-do":71,"./es-do.js":71,"./es-us":72,"./es-us.js":72,"./es.js":70,"./et":73,"./et.js":73,"./eu":74,"./eu.js":74,"./fa":75,"./fa.js":75,"./fi":76,"./fi.js":76,"./fo":77,"./fo.js":77,"./fr":78,"./fr-ca":79,"./fr-ca.js":79,"./fr-ch":80,"./fr-ch.js":80,"./fr.js":78,"./fy":81,"./fy.js":81,"./gd":82,"./gd.js":82,"./gl":83,"./gl.js":83,"./gom-latn":84,"./gom-latn.js":84,"./gu":85,"./gu.js":85,"./he":86,"./he.js":86,"./hi":87,"./hi.js":87,"./hr":88,"./hr.js":88,"./hu":89,"./hu.js":89,"./hy-am":90,"./hy-am.js":90,"./id":91,"./id.js":91,"./is":92,"./is.js":92,"./it":93,"./it.js":93,"./ja":94,"./ja.js":94,"./jv":95,"./jv.js":95,"./ka":96,"./ka.js":96,"./kk":97,"./kk.js":97,"./km":98,"./km.js":98,"./kn":99,"./kn.js":99,"./ko":100,"./ko.js":100,"./ky":101,"./ky.js":101,"./lb":102,"./lb.js":102,"./lo":103,"./lo.js":103,"./lt":104,"./lt.js":104,"./lv":105,"./lv.js":105,"./me":106,"./me.js":106,"./mi":107,"./mi.js":107,"./mk":108,"./mk.js":108,"./ml":109,"./ml.js":109,"./mn":110,"./mn.js":110,"./mr":111,"./mr.js":111,"./ms":112,"./ms-my":113,"./ms-my.js":113,"./ms.js":112,"./mt":114,"./mt.js":114,"./my":115,"./my.js":115,"./nb":116,"./nb.js":116,"./ne":117,"./ne.js":117,"./nl":118,"./nl-be":119,"./nl-be.js":119,"./nl.js":118,"./nn":120,"./nn.js":120,"./pa-in":121,"./pa-in.js":121,"./pl":122,"./pl.js":122,"./pt":123,"./pt-br":124,"./pt-br.js":124,"./pt.js":123,"./ro":125,"./ro.js":125,"./ru":126,"./ru.js":126,"./sd":127,"./sd.js":127,"./se":128,"./se.js":128,"./si":129,"./si.js":129,"./sk":130,"./sk.js":130,"./sl":131,"./sl.js":131,"./sq":132,"./sq.js":132,"./sr":133,"./sr-cyrl":134,"./sr-cyrl.js":134,"./sr.js":133,"./ss":135,"./ss.js":135,"./sv":136,"./sv.js":136,"./sw":137,"./sw.js":137,"./ta":138,"./ta.js":138,"./te":139,"./te.js":139,"./tet":140,"./tet.js":140,"./tg":141,"./tg.js":141,"./th":142,"./th.js":142,"./tl-ph":143,"./tl-ph.js":143,"./tlh":144,"./tlh.js":144,"./tr":145,"./tr.js":145,"./tzl":146,"./tzl.js":146,"./tzm":147,"./tzm-latn":148,"./tzm-latn.js":148,"./tzm.js":147,"./ug-cn":149,"./ug-cn.js":149,"./uk":150,"./uk.js":150,"./ur":151,"./ur.js":151,"./uz":152,"./uz-latn":153,"./uz-latn.js":153,"./uz.js":152,"./vi":154,"./vi.js":154,"./x-pseudo":155,"./x-pseudo.js":155,"./yo":156,"./yo.js":156,"./zh-cn":157,"./zh-cn.js":157,"./zh-hk":158,"./zh-hk.js":158,"./zh-tw":159,"./zh-tw.js":159};function a(n){var e=o(n);return t(e)}function o(n){var e=i[n];if(!(e+1)){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}return e}a.keys=function(){return Object.keys(i)},a.resolve=o,n.exports=a,a.id=190},194:function(n,e){},195:function(n,e){},203:function(n,e){},204:function(n,e){},205:function(n,e){},246:function(n,e,t){"use strict";!function(n){n&&n.__esModule}(t(168));var i=t(239),a=t(238),o=t(240);function r(n,e,t){n.theme("default").primaryPalette("blue-grey").accentPalette("orange"),e.hashPrefix("");var r=new i.ApolloClient({link:new o.HttpLink({uri:"http://catalog.paradisec.org.au/graphql",credentials:"include"}),cache:new a.InMemoryCache});t.defaultClient(r)}t(252),t(253),t(271),t(278),t(285),t(290),t(298),t(303),t(306),t(309),t(325),angular.module("pdsc",["ngAnimate","ngCookies","ngMessages","ui.router","ngSanitize","angular-apollo","moment","lodash","pdfjs","ngMaterial","highlightjs","pdsc.routes","pdsc.main","pdsc.services","pdsc.filters","pdsc.fileViewer","pdsc.imageViewer","pdsc.informationViewer","pdsc.documentViewer","pdsc.transcriptionViewer","pdsc.mediaViewer"]).config(r),r.$inject=["$mdThemingProvider","$locationProvider","apolloProvider"]},252:function(n,e,t){"use strict";function i(n,e){n.otherwise("/"),e.state("root",{url:"/",component:"pdscCollectionViewerRootComponent"}),e.state("main",{url:"/{collectionId}/{itemId}",component:"pdscCollectionViewerMainComponent"}),e.state("main.information",{url:"/information",component:"pdscInformationViewerComponent"}),e.state("main.files",{url:"/files",component:"pdscFileViewerComponent"}),e.state("main.images",{url:"/images",component:"pdscImageViewerComponent"}),e.state("main.images.instance",{url:"/:imageId"}),e.state("main.documents",{url:"/documents",component:"pdscDocumentViewerComponent"}),e.state("main.documents.instance",{url:"/:documentId"}),e.state("main.transcriptions",{url:"/transcriptions",component:"pdscTranscriptionViewerComponent"}),e.state("main.transcriptions.instance",{url:"/:transcriptionId"}),e.state("main.media",{url:"/media",component:"pdscMediaViewerComponent"}),e.state("main.media.instance",{url:"/:mediaId?transcription&segment"})}n.exports=angular.module("pdsc.routes",["ui.router"]).config(i),i.$inject=["$urlRouterProvider","$stateProvider"]},253:function(n,e,t){"use strict";t(254),n.exports=angular.module("pdsc.main",[]).constant("configuration",t(36)).controller("MetadataCtrl",t(256)).component("pdscCollectionViewerRootComponent",t(257)).component("pdscCollectionViewerMainComponent",t(260)).component("pdscIndexByItemIdComponent",t(262)).component("pdscIndexByGenreComponent",t(264)).component("pdscIndexBySpeakerComponent",t(266)).directive("sizeToParent",t(268)).directive("blurOnClick",t(269)).directive("storeHeight",t(270))},256:function(n,e,t){"use strict";var i=t(6).isEmpty;function a(n,e,t,a){n.$on("item data loaded",function(){var n=a.params.collectionId,o=a.params.itemId;t.getItem(n,o).then(function(n){i(n)||(e.item=n)})})}n.exports=a,a.$inject=["$rootScope","$scope","dataService","$state"]},257:function(n,e,t){"use strict";var i=t(36),a=t(6),o=(a.groupBy,a.sortBy,a.isEmpty),r=t(189),s=r.groupByIdentifier,c=r.groupByGenre,l=r.groupBySpeaker;function d(n,e,t,a){var r,d=this;function u(n){"root"===n&&"online"===d.mode?t.location.href="http://catalog.paradisec.org.au":a.libraryBoxLoader().then(function(n){switch(d.data=s(n),d.genreData=!o(c(n))&&c(n),d.speakerData=!o(l(n))&&l(n),n[0].index.type){case"id":d.activeTabIndex=0;break;case"genre":d.activeTabIndex=1;break;case"speaker":d.activeTabIndex=2}})}d.showErrorMessage=!1,d.$onInit=function(){d.mode=i.datasource.mode,r=e.onBefore({},function(n){u(n.$to().name)}),u(n.current.name)},d.$onDestroy=function(){r()}}n.exports={template:t(259),bindings:{},controller:d,controllerAs:"vm"},d.$inject=["$state","$transitions","$window","dataService"]},258:function(n,e,t){"use strict";n.exports={convert:function n(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var i=0;i<e.attributes.length;i++){var a=e.attributes.item(i);t["@attributes"][a.nodeName]=a.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var r=e.childNodes.item(o),s=r.nodeName;if(void 0===t[s])t[s]=n(r);else{if(void 0===t[s].push){var c=t[s];t[s]=[],t[s].push(c)}t[s].push(n(r))}}return t}}},259:function(n,e){n.exports='<div layout="row" layout-align="center center" ng-if="vm.showErrorMessage">\n    <p>The viewer requires the collection and item to display in the URL.</p>\n    <p>Typically this is something like /viewer/#/{collection id}/{item id}</p>\n</div>\n<div ui-view ng-if="vm.currentState !== \'root\'"></div>\n<div ng-if="vm.mode === \'librarybox\'">\n    <md-toolbar\n        class="main-toolbar main-root-toolbar"\n        layout="row"\n        layout-align="center center">\n            PARADISEC Offline Catalog\n    </md-toolbar>\n    <div\n        layout="row"\n        class="file-viewer-link-styling"\n        ng-if="vm.data">\n            <md-tabs md-dynamic-height md-center-tabs md-border-bottom md-selected="vm.activeTabIndex" class="main-index-styling">\n                <md-tab label="Browse by Identifier">\n                    <md-content class="md-padding main-viewer-color">\n                        <pdsc-index-by-item-id-component collections="vm.data"></pdsc-index-by-item-id-component>\n                    <md-content>\n                </md-tab>\n                <md-tab label="Browse by Genre" ng-if="vm.genreData">\n                    <md-content class="md-padding main-viewer-color">\n                        <pdsc-index-by-genre-component collections="vm.genreData"></pdsc-index-by-genre-component>\n                    <md-content>\n                </md-tab>\n                <md-tab label="Browse by Speaker" ng-if="vm.speakerData">\n                    <md-content class="md-padding main-viewer-color">\n                        <pdsc-index-by-speaker-component collections="vm.speakerData"></pdsc-index-by-speaker-component>\n                    <md-content>\n                </md-tab>\n            </md-tabs>\n    </div>\n</div>\n'},260:function(n,e,t){"use strict";var i=t(6),a=(i.includes,i.isEmpty),o=(i.isUndefined,t(36));function r(n,e,t,i,r){var s,c,l=this;function d(){return l.collectionId=n.params.collectionId,l.itemId=n.params.itemId,i.getItem(l.collectionId,l.itemId).then(function(e){a(e)||(l.itemData=e,l.loadingData=!1,"main"===n.current.name&&n.go("main.files"))})}l.showItemInformation=!1,l.levelUp=!1,l.$onInit=function(){l.mode=o.datasource.mode,l.loadingData=!0,l.showOptions=!1,c=t.$on("item data loaded",d),s=e.onSuccess({},function(e){l.state=n.current.name.split(".")[1]}),l.state=n.current.name.split(".")[1],d()},l.$onDestroy=function(){s(),c()},l.toggleItemInformation=function(){r("left").toggle()}}n.exports={template:t(261),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$state","$transitions","$rootScope","dataService","$mdSidenav"]},261:function(n,e){n.exports='<div flex layout="column">\n    <md-toolbar class="main-toolbar">\n        <div\n            layout="row"\n            layout-padding-xs\n            layout-padding-sm\n            ng-hide="vm.loadingData">\n            <md-button\n                aria-label="show menu options"\n                class="hide-md hide-lg hide-xl small-button"\n                ng-click="vm.showOptions = !vm.showOptions"\n                blur-on-click>\n                <i class="fa fa-bars" aria-hidden="true"></i>\n            </md-button>\n            <div\n                ng-class="{\'hide-sm\': !vm.showOptions, \'hide-xs\': !vm.showOptions}">\n                <md-button\n                    class="small-font"\n                    ui-sref="root"\n                    blur-on-click\n                    ng-if="vm.mode === \'librarybox\'">\n                        <i class="fa fa-arrow-left fa-lg"></i> Collections\n                        <md-tooltip>Up to Collection List</md-tooltip>\n                </md-button>\n\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'information\'}"\n                    ui-sref="main.information"\n                    blur-on-click>\n                        <i class="fa fa-info fa-lg"></i> Information\n                        <md-tooltip>View Information</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'files\'}"\n                    ui-sref="main.files"\n                    blur-on-click>\n                        <i class="fa fa-file-o fa-lg"></i> File Browser\n                        <md-tooltip>View Files</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'images\'}"\n                    ui-sref="main.images"\n                    blur-on-click\n                    ng-if="vm.itemData.images.length">\n                        <i class="fa fa-file-image-o fa-lg"></i> Images\n                        <md-tooltip>View Images</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'media\'}"\n                    ui-sref="main.media"\n                    blur-on-click\n                    ng-if="vm.itemData.media.length">\n                        <i class="fa fa-file-audio-o fa-lg"></i> Audio / Video\n                        <md-tooltip>View Audio / Video</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'documents\'}"\n                    ui-sref="main.documents"\n                    blur-on-click\n                    ng-if="vm.itemData.documents.length">\n                        <i class="fa fa-file-pdf-o fa-lg"></i> Documents\n                        <md-tooltip>View Documents</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-font"\n                    ng-class="{\'main-toolbar-selected\': vm.state === \'transcriptions\'}"\n                    ui-sref="main.transcriptions"\n                    blur-on-click\n                    ng-if="vm.mode === \'online\' && vm.itemData.transcriptions.length">\n                        <i class="fa fa-file-code-o fa-lg"></i> Transcriptions\n                        <md-tooltip>View Transcriptions</md-tooltip>\n                </md-button>\n            </div>\n        </div>\n    </md-toolbar>\n    <div layout="row" layout-align="center center" store-height element="headline">\n        <h3 class="md-headline">{{vm.itemData.title}}</h3>\n    </div>\n    <div layout="row" layout-align="center top">\n        <div ui-view class="main-viewer-panel"></div>\n    </div>\n</div>\n'},262:function(n,e,t){"use strict";function i(){this.$onInit=function(){},this.$onDestroy=function(){}}t(6).groupBy,t(6),n.exports={template:t(263),bindings:{collections:"<"},controller:i,controllerAs:"vm"},i.$inject=[]},263:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <div>\n        <div\n            layout="column"\n            layout-padding\n            ng-repeat="(k, collection) in vm.collections">\n            Collection: {{k}}\n            <div ng-repeat="item in collection" class="">\n                <span class="">\n                    <i class="fa fa-angle-right" aria-hidden="true"></i>\n                </span>\n\n                <a\n                    class="file-viewer-link-styling"\n                    ng-if="item.data.elements > 1"\n                    ui-sref="main.files({collectionId: k, itemId: item.itemId})">\n                    {{item.itemId}} - {{item.data.title}}\n                </a>\n\n                <span ng-if="item.data.elements === 1">\n                    <a\n                        class="file-viewer-link-styling"\n                        ng-if="item.data.images.length"\n                        ui-sref="main.images({collectionId: k, itemId: item.itemId})">\n                        {{item.itemId}} - {{item.data.title}}\n                    </a>\n                    <a\n                        class="file-viewer-link-styling"\n                        ng-if="item.data.documents.length"\n                        ui-sref="main.documents({collectionId: k, itemId: item.itemId})">\n                        {{item.itemId}} - {{item.data.title}}\n                    </a>\n                    <a\n                        class="file-viewer-link-styling"\n                        ng-if="item.data.media.length"\n                        ui-sref="main.media({collectionId: k, itemId: item.itemId})">\n                        {{item.itemId}} - {{item.data.title}}\n                    </a>\n                </span>\n            </div>\n        </div>\n    </div>\n</div>'},264:function(n,e,t){"use strict";var i=t(6);function a(){this.$onInit=function(){},this.$onDestroy=function(){}}i.groupBy,i.orderBy,t(6),n.exports={template:t(265),bindings:{collections:"<"},controller:a,controllerAs:"vm"},a.$inject=[]},265:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <div>\n        <div \n            layout="column" \n            layout-padding\n            ng-repeat="(k, items) in vm.collections">\n            <div layout="column">\n                Genre: {{k}}\n                <div class="row" ng-repeat="item in items">\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a\n                        class="file-viewer-link-styling"\n                        ng-if="item.data.elements > 1"\n                        ui-sref="main({collectionId: item.collectionId, itemId: item.itemId})">\n                        {{item.collectionId}} / {{item.itemId}} - {{item.data.title}} \n                    </a>\n                    <span ng-if="item.data.elements === 1">\n                        <a\n                            class="file-viewer-link-styling"\n                            ng-if="item.data.images.length"\n                            ui-sref="main.images({collectionId: item.collectionId, itemId: item.itemId})">\n                            {{item.itemId}} - {{item.data.title}}\n                        </a>\n                        <a\n                            class="file-viewer-link-styling"\n                            ng-if="item.data.documents.length"\n                            ui-sref="main.documents({collectionId: item.collectionId, itemId: item.itemId})">\n                            {{item.itemId}} - {{item.data.title}}\n                        </a>\n                        <a\n                            class="file-viewer-link-styling"\n                            ng-if="item.data.media.length"\n                            ui-sref="main.media({collectionId: item.collectionId, itemId: item.itemId})">\n                            {{item.itemId}} - {{item.data.title}}\n                        </a>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},266:function(n,e,t){"use strict";var i=t(6);function a(){this.$onInit=function(){},this.$onDestroy=function(){}}i.groupBy,i.includes,t(6),n.exports={template:t(267),bindings:{collections:"<"},controller:a,controllerAs:"vm"},a.$inject=[]},267:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <div>\n        <div \n            layout="column" \n            layout-padding\n            ng-repeat="(k, items) in vm.collections">\n            <div layout="column">\n                Speaker: {{k}}\n                <div class="row" ng-repeat="item in items">\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a\n                        class="file-viewer-link-styling"\n                        ng-if="item.data.elements > 1"\n                        ui-sref="main({collectionId: item.collectionId, itemId: item.itemId})">\n                        {{item.collectionId}} / {{item.itemId}} - {{item.data.title}} \n                    </a>\n                    <span ng-if="item.data.elements === 1">\n                        <a\n                            class="file-viewer-link-styling"\n                            ng-if="item.data.images.length"\n                            ui-sref="main.images({collectionId: item.collectionId, itemId: item.itemId})">\n                            {{item.itemId}} - {{item.data.title}}\n                        </a>\n                        <a\n                            class="file-viewer-link-styling"\n                            ng-if="item.data.documents.length"\n                            ui-sref="main.documents({collectionId: item.collectionId, itemId: item.itemId})">\n                            {{item.itemId}} - {{item.data.title}}\n                        </a>\n                        <a\n                            class="file-viewer-link-styling"\n                            ng-if="item.data.media.length"\n                            ui-sref="main.media({collectionId: item.collectionId, itemId: item.itemId})">\n                            {{item.itemId}} - {{item.data.title}}\n                        </a>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},268:function(n,e,t){"use strict";n.exports=["configuration","$window",function(n,e){return{template:"",restrict:"A",link:function(n){function t(){n.vm.panelStyle={position:"relative","max-width":window.innerWidth-15+"px","max-height":"800px",overflow:"scroll"}}t(),angular.element(e).bind("resize",function(){n.$apply(function(){t()})})}}}]},269:function(n,e,t){"use strict";function i(n,e){e.bind("click",function(){e.blur()})}n.exports=function(){return{template:"",restrict:"A",scope:{},link:i}},i.$inject=["scope","element"]},270:function(n,e,t){"use strict";n.exports=["configuration","$window",function(n,e){return{template:"",restrict:"A",scope:{element:"@"},link:function(t,i){function a(){n.header[t.element]=parseInt(i[0].clientHeight)}a(),angular.element(e).bind("resize",function(){t.$apply(function(){a()})})}}}]},271:function(n,e,t){"use strict";n.exports=angular.module("pdsc.services",[]).service("dataService",t(272)).service("eafParserService",t(274)).service("flextextParserService",t(275)).service("ixtParserService",t(276)).service("trsParserService",t(277))},272:function(n,e,t){"use strict";var i=Object.freeze(Object.defineProperties(["\n                    query($identifier: String!) {\n                        items(full_identifier: $identifier, limit: 1, page: 1) {\n                            results {\n                                identifier: full_identifier\n                                title\n                                description\n                                rights: access_condition_name\n                                access_condition_details: access_narrative\n                                permalink\n                                access_class\n                                date: originated_on\n                                citation\n                                collector {\n                                    name\n                                }\n                                roles: item_agents {\n                                    role_name\n                                    user_name\n                                }\n                                collection {\n                                    identifier\n                                    permalink\n                                }\n                                files: essences {\n                                    filename\n                                    mimetype\n                                }\n                            }\n                        }\n                    }\n                "],{raw:{value:Object.freeze(["\n                    query($identifier: String!) {\n                        items(full_identifier: $identifier, limit: 1, page: 1) {\n                            results {\n                                identifier: full_identifier\n                                title\n                                description\n                                rights: access_condition_name\n                                access_condition_details: access_narrative\n                                permalink\n                                access_class\n                                date: originated_on\n                                citation\n                                collector {\n                                    name\n                                }\n                                roles: item_agents {\n                                    role_name\n                                    user_name\n                                }\n                                collection {\n                                    identifier\n                                    permalink\n                                }\n                                files: essences {\n                                    filename\n                                    mimetype\n                                }\n                            }\n                        }\n                    }\n                "])}})),a=function(n){return n&&n.__esModule?n:{default:n}}(t(273)),o=t(6),r=(o.includes,o.isEmpty),s=(o.compact,o.isArray,o.each,o.map,o.flattenDeep,t(189)),c=(s.parseOAI,s.parseXML),l=s.createItemDataStructureFromGraphQL;function d(n,e,t,o,s,d,u,m,f,p,v){var g={getItem:function(t,s){if(g.data[t]||(g.data[t]={},g.data[t][s]={}),g.loading[t]||(g.loading[t]={}),g.loading[t][s]){var c=g.data[t][s];return Promise.resolve(c)}if(!g.loading[t][s]&&!r(g.data[t][s])){var d=g.data[t][s];return Promise.resolve(Object.assign({},d))}return g.loading[t][s]=!0,"online"===o.datasource.mode?function(n,e){return p.query({query:(0,a.default)(i),variables:{identifier:n+"-"+e}}).then(function(n){return l(n.data.items.results[0])}).catch(function(n){n.message.match(/401/)&&(v.location.href="http://catalog.paradisec.org.au")})}(t,s).then(u):"librarybox"===o.datasource.mode?h(t,s).then(u):(e.error("Unexpected mode set: "+o.datasource.mode),{});function u(e){return e.collectionId=t,e.itemId=s,e.collectionLink=o.datasource.collections+"/"+t,g.data[t][s]=e,g.loading[t][s]=!1,n.$broadcast("item data loaded"),Object.assign({},e)}},libraryBoxLoader:h,loadTranscription:function(n,i,a){var o=void 0;if("eaf"===n)o=function(n){return"xml"===a?{data:c(n,"xml")}:{data:s.parse(c(n))}};else if("trs"===n)o=function(n){return"xml"===a?{data:c(n,"xml")}:{data:d.parse(c(n))}};else if("ixt"===n)o=function(n){return"xml"===a?{data:c(n,"xml")}:{data:u.parse(c(n))}};else{if("flextext"!==n)return;o=function(n){return"xml"===a?{data:c(n,"xml")}:{data:m.parse(c(n))}}}return t.get(i.url,{transformResponse:o,withCredentials:!0}).then(function(n){return n.data.data}).catch(function(t){e.error("ParadisecService: error, couldn't get",i[n]),console.log(t)})},broadcastMediaElementTime:function(e){g.mediaElementTime=e,n.$broadcast("media time updated")},listenForMediaElementBroadcast:function(e){return n.$on("media time updated",e)},broadcastPlayFrom:function(e){g.playFrom=e,n.$broadcast("media play from")},listenForPlayFrom:function(e){return n.$on("media play from",e)},data:{},loading:{}};return g;function h(n,i){var a="/repository/index.json";return e.info("ds getItem "+a),t.get(a).then(function(e){return n&&i?e.data.filter(function(e){return e.collectionId===n&&e.itemId===i})[0].data:e.data}).catch(function(){return e.error("dataService: error, couldn't get",a)})}}n.exports=d,d.$inject=["$rootScope","$log","$http","configuration","eafParserService","trsParserService","ixtParserService","flextextParserService","lodash","apollo","$window"]},273:function(n,e,t){var i=t(606).parse;function a(n){return n.replace(/[\s,]+/g," ").trim()}var o={},r={};function s(n){return a(n.source.body.substring(n.start,n.end))}var c=!0,l=!1;function d(n){var e=a(n);if(o[e])return o[e];var t=i(n,{experimentalFragmentVariables:l});if(!t||"Document"!==t.kind)throw new Error("Not a valid GraphQL document.");return t=function n(e,t){var i=Object.prototype.toString.call(e);if("[object Array]"===i)return e.map(function(e){return n(e,t)});if("[object Object]"!==i)throw new Error("Unexpected input.");t&&e.loc&&delete e.loc,e.loc&&(delete e.loc.startToken,delete e.loc.endToken);var a,o,r,s=Object.keys(e);for(a in s)s.hasOwnProperty(a)&&(o=e[s[a]],"[object Object]"!==(r=Object.prototype.toString.call(o))&&"[object Array]"!==r||(e[s[a]]=n(o,!0)));return e}(t=function(n){for(var e={},t=[],i=0;i<n.definitions.length;i++){var a=n.definitions[i];if("FragmentDefinition"===a.kind){var o=a.name.value,l=s(a.loc);r.hasOwnProperty(o)&&!r[o][l]?(c&&console.warn("Warning: fragment with name "+o+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),r[o][l]=!0):r.hasOwnProperty(o)||(r[o]={},r[o][l]=!0),e[l]||(e[l]=!0,t.push(a))}else t.push(a)}return n.definitions=t,n}(t),!1),o[e]=t,t}function u(){for(var n=Array.prototype.slice.call(arguments),e=n[0],t="string"==typeof e?e:e[0],i=1;i<n.length;i++)n[i]&&n[i].kind&&"Document"===n[i].kind?t+=n[i].loc.source.body:t+=n[i],t+=e[i];return d(t)}u.default=u,u.resetCaches=function(){o={},r={}},u.disableFragmentWarnings=function(){c=!1},u.enableExperimentalFragmentVariables=function(){l=!0},u.disableExperimentalFragmentVariables=function(){l=!1},n.exports=u},274:function(n,e,t){"use strict";function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}return Array.from(n)}var o=t(6),r=(o.flatten,o.flattenDeep),s=(o.compact,o.groupBy),c=o.orderBy,l=o.map,d=o.isArray,u=o.isObject,m=o.each,f=(o.keys,o.trim);function p(){return{parse:v}}function v(n){var e=function(n){var e=l(n.ANNOTATION_DOCUMENT.TIME_ORDER.TIME_SLOT,function(n){return{id:n["@attributes"].TIME_SLOT_ID,time:parseFloat(n["@attributes"].TIME_VALUE/1e3)}});return s(e,function(n){return n.id})}(n);d(n.ANNOTATION_DOCUMENT.TIER)||(n.ANNOTATION_DOCUMENT.TIER=[n.ANNOTATION_DOCUMENT.TIER]);var t=function(n){var e=void 0,t=[];return m(n.ANNOTATION_DOCUMENT.TIER,function(n){try{n["@attributes"].PARENT_REF||(t=[].concat(a(t),[r(function(n){return u(n.ANNOTATION)&&(n.ANNOTATION=[n.ANNOTATION]),n.ANNOTATION=r(n.ANNOTATION),n.ANNOTATION.map(function(t){return{id:(e=t.ALIGNABLE_ANNOTATION)["@attributes"].ANNOTATION_ID,tierId:n["@attributes"].TIER_ID,time:{begin:e["@attributes"].TIME_SLOT_REF1,end:e["@attributes"].TIME_SLOT_REF2},value:i({},n["@attributes"].TIER_ID,{language:n["@attributes"].DEFAULT_LOCALE,text:f(e.ANNOTATION_VALUE["#text"])})}})}(n))]))}catch(e){console.log(JSON.stringify(n,null,2))}}),r(t)}(n),o=function(n,e){var t=[];return m(n.ANNOTATION_DOCUMENT.TIER,function(n){try{n["@attributes"].PARENT_REF&&(t=[].concat(a(t),[r(function(n){var e=void 0;return u(n.ANNOTATION)&&(n.ANNOTATION=[n.ANNOTATION]),n.ANNOTATION=r(n.ANNOTATION),n.ANNOTATION.map(function(t){return{id:(e=t.REF_ANNOTATION)["@attributes"].ANNOTATION_REF,value:i({},n["@attributes"].TIER_ID,{language:n["@attributes"].DEFAULT_LOCALE,text:f(e.ANNOTATION_VALUE["#text"])})}})}(n))]))}catch(e){console.log(JSON.stringify(n,null,2))}}),r(t)}(n),p=void 0,v=void 0;return t=t.map(function(n){return v=o.filter(function(e){return n.id===e.id}),p=Object.assign({},n),m(v,function(n){p.value=Object.assign({},p.value,n.value)}),p.value=l(p.value,function(n){return n}),p.time.begin=e[p.time.begin][0].time,p.time.end=e[p.time.end][0].time,p}),c(t,function(n){return n.time.begin})}n.exports=p,p.$inject=[]},275:function(n,e,t){"use strict";function i(n){return{parse:function(e){return n.map(e.document["interlinear-text"].paragraphs.paragraph,function(e){var t=n.map(e.phrases.phrase.words.word,function(e){try{n.isArray(e.morphemes.morph)||(e.morphemes.morph=[e.morphemes.morph])}catch(n){return{}}var t=n.map(e.morphemes.morph,function(n){try{return{text:n.item[0]["#text"],morpheme:n.item[2]["#text"],gloss:n.item[3]["#text"]}}catch(n){}});try{e={words:t}}catch(n){}return e});return{id:e.phrases.phrase["@attributes"]["begin-time-offset"],transcription:e.phrases.phrase.item[0]["#text"],translation:e.phrases.phrase.item[1]["#text"],time:{begin:parseFloat(e.phrases.phrase["@attributes"]["begin-time-offset"])},words:t}})}}}n.exports=i,i.$inject=["lodash"]},276:function(n,e,t){"use strict";function i(n){return{parse:function(e){return n.map(e.eopas.interlinear.phrase,function(e){var t=n.map(e.wordlist.word,function(e){try{n.isArray(e.morphemelist.morpheme)||(e.morphemelist.morpheme=[e.morphemelist.morpheme])}catch(n){return{}}var t=n.map(e.morphemelist.morpheme,function(n){return{morpheme:n.text[0]["#text"],gloss:n.text[1]["#text"]}});return{text:e.text["#text"],words:t}});return{id:e["@attributes"].startTime?e["@attributes"].startTime:0,transcription:e.transcription["#text"],translation:e.translation["#text"],time:{begin:parseFloat(e["@attributes"].startTime)},words:t}})}}}n.exports=i,i.$inject=["lodash"]},277:function(n,e,t){"use strict";function i(n){return{parse:function(e){if(!(e.html||e.parsererror&&e.parsererror["#text"].match(/Error/))){var t;e.Trans[1].Speakers?(t=n.map(e.Trans[1].Speakers.Speaker,function(n){return{id:n["@attributes"].id,name:n["@attributes"].name}}),t=n.groupBy(t,function(n){return n.id})):t={};var i=[];return n.isArray(e.Trans[1].Episode.Section.Turn)||(e.Trans[1].Episode.Section.Turn=[e.Trans[1].Episode.Section.Turn]),n.each(e.Trans[1].Episode.Section.Turn,function(e){var t;t=e["@attributes"]?e["@attributes"].speaker:"";var a,o=n.map(e["#text"],function(n){return n.trim()});o=n.without(o,""),n.isArray(e.Sync)?a=n.map(e.Sync,function(n){return n["@attributes"].time}):n.isObject(e.Sync)&&(a=[e.Sync["@attributes"].time]);var r=n.zip(a,o);r=n.map(r,function(n){return{id:n[0]?n[0]:0,time:{begin:n[0]?n[0]:0},value:n[1],referenceValue:"",speaker:t}}),i.push(r)}),e=n.groupBy(n.flatten(i),function(n){return n.id}),n.map(e,function(n){return n[0]})}}}}n.exports=i,i.$inject=["lodash"]},278:function(n,e,t){"use strict";n.exports=angular.module("pdsc.filters",[]).filter("extension",t(279)).filter("minutesSeconds",t(280)).filter("notEmpty",t(281)).filter("stripTime",t(282)).filter("trustAsHtml",t(283)).filter("escapeHtml",t(284))},279:function(n,e,t){"use strict";n.exports=[function(){return function(n){if(n)return n.split("/").pop().split(".")[1]}}]},280:function(n,e,t){"use strict";n.exports=["moment",function(n){return function(e){var t=Math.floor(parseInt(e)/60);return t+":"+n(e-60*t,"ss").format("ss")}}]},281:function(n,e,t){"use strict";n.exports=["lodash",function(n){return function(e){return!n.isEmpty(e)}}]},282:function(n,e,t){"use strict";n.exports=[function(){return function(n){return n.split("#")[0]}}]},283:function(n,e,t){"use strict";n.exports=["$sce",function(n){return function(e){return n.trustAsResourceUrl(e)}}]},284:function(n,e,t){"use strict";n.exports=[function(){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n[e]})}}]},285:function(n,e,t){"use strict";t(286),n.exports=angular.module("pdsc.fileViewer",[]).component("pdscFileViewerComponent",t(288))},288:function(n,e,t){"use strict";var i=t(36),a=t(6),o=a.isEmpty;function r(n,e,t,a,r,s){var c,l=this;function d(){var t=n.params.collectionId,i=n.params.itemId;s.getItem(t,i).then(function(n){l.loadingData=!1,o(n)||e.$apply(function(){l.item=n,l.item.images=l.item.images.map(function(n){return n.split("/").pop()}),l.item.documents=l.item.documents.map(function(n){return n.split("/").pop()}),l.hasAudio=l.item.media.filter(function(n){return"audio"===n.type}),l.hasVideo=l.item.media.filter(function(n){return"video"===n.type})})})}l.$onInit=function(){l.mode=i.datasource.mode,console.log(l.mode),l.loadingData=!0,c=t.$on("item data loaded",d),d()},l.$onDestroy=function(){c()}}a.each,a.map,n.exports={template:t(289),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$state","$rootScope","$scope","$location","$timeout","dataService"]},289:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    Available resources\n</div>\n<div\n    layout="column"\n    layout-gt-sm="row"\n    layout-padding\n    layout-margin\n    layout-align="center center"\n    layout-align-gt-sm="center start"\n    class="file-viewer-link-styling"\n    ng-if="!vm.loadingData">\n    <div >\n        Images ({{vm.item.images.length}})\n        <div>\n            <div ng-repeat="image in vm.item.images" track by $index>\n                <span class="">\n                    <i class="fa fa-angle-right" aria-hidden="true"></i>\n                </span>\n                <a\n                    class="file-viewer-link-styling"\n                    ui-sref="main.images.instance({imageId: image})">{{image}}</a>\n            </div>\n        </div>\n        <div ng-if="!vm.item.images.length">\n            No images registered.\n        </div>\n    </div>\n\n    <div class="column">\n        <div>\n            Audio ({{vm.hasAudio.length}})\n            <div>\n                <div ng-repeat="item in vm.item.media" track by $index>\n                    <span ng-if="item.type === \'audio\'">\n                        <span class="">\n                            <i class="fa fa-angle-right" aria-hidden="true"></i>\n                        </span>\n                        <a ui-sref="main.media.instance({mediaId: item.name})">{{item.name}}</a>\n                    </span>\n                </div>\n            </div>\n            <div ng-if="!vm.hasAudio.length">\n                No audio registered.\n            </div>\n        </div>\n        <div class="file-viewer-media-separator"></div>\n        <div>\n            Video ({{vm.hasVideo.length}})\n            <div>\n                <div ng-repeat="item in vm.item.media" track by $index>\n                    <span ng-if="item.type === \'video\'">\n                        <span class="">\n                            <i class="fa fa-angle-right" aria-hidden="true"></i>\n                        </span>\n                        <a ui-sref="main.media.instance({mediaId: item.name})">{{item.name}}</a>\n                    </span>\n                </div>\n            </div>\n            <div ng-if="!vm.hasVideo.length">\n                No video registered.\n            </div>\n        </div>\n    </div>\n    <div class="column">\n        <div>\n            Documents ({{vm.item.documents.length}})\n            <div>\n                <div ng-repeat="item in vm.item.documents" track by $index>\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a ui-sref="main.documents.instance({documentId: item})">{{item}}</a>\n                </div>\n            </div>\n            <div ng-if="!vm.item.documents.length">\n                No documents registered.\n            </div>\n        </div>\n        <div class="file-viewer-media-separator"></div>\n        <div ng-if="vm.mode === \'online\'">\n            Transcriptions ({{vm.item.transcriptions.length}})\n            <div>\n                <div ng-repeat="item in vm.item.transcriptions" track by $index>\n                    <span class="">\n                        <i class="fa fa-angle-right" aria-hidden="true"></i>\n                    </span>\n                    <a ui-sref="main.transcriptions.instance({transcriptionId: item.name})">{{item.name}}</a>\n                </div>\n            </div>\n            <div ng-if="!vm.item.transcriptions.length">\n                No transcriptions registered.\n            </div>\n        </div>\n    </div>\n\n</div>\n'},290:function(n,e,t){"use strict";t(291),n.exports=angular.module("pdsc.imageViewer",[]).component("pdscImageViewerComponent",t(293)).component("pdscImageViewerThumbnailStripComponent",t(295)).directive("showWhenReady",t(297))},293:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty,o=i.each,r=i.map;function s(n,e,t,i,s,c,l,d,u){var m,f=this;function p(){var e=n.params.collectionId,t=n.params.itemId;f.showImage=!1,f.loadingData=!0,d.getItem(e,t).then(function(e){if(f.loadingData=!1,!a(e)){if(f.item=e,a(f.item.images))return n.go("main");f.images=r(f.item.images,function(n){return n.split("/").pop()}),n.params.imageId||n.go("main.images.instance",{imageId:f.images[0]}),l(function(){var e=n.params.imageId;f.config.current=f.images.indexOf(e),function(){var e=n.params.imageId;o(f.images,function(n,t){n===e&&(f.config.current=t)})}(),f.image=f.item.images[f.config.current],function(){if(1===f.item.images.length)return f.showNext=!1,f.showPrevious=!1,void(f.disableThumbnailView=!0);0===f.current?(f.showNext=!0,f.showPrevious=!1):f.current===f.item.images.length-1?(f.showNext=!1,f.showPrevious=!0):(f.showNext=!0,f.showPrevious=!0)}()})}})}function v(){o(f.images,function(e,t){f.config.current===t&&(f.image=null,l(function(){f.image=f.item.images[f.config.current],n.go("main.images.instance",{imageId:e})}))})}f.$onInit=function(){m=e.$on("item data loaded",p),f.showImage=!1,f.config={disableThumbnailView:!1,scaleStep:.2,sideNavIsOpen:!1,current:null},p()},f.$onDestroy=function(){m()},f.previous=function(){0!==f.config.current&&(f.config.current-=1,v())},f.next=function(){f.config.current!==f.item.images.length-1&&(f.config.current+=1,v())},f.jumpToStart=function(){f.config.current=0,v()},f.jumpToEnd=function(){f.config.current=f.item.images.length-1,v()},f.toggleFilmstrip=function(){u("thumbnailFilmstrip").toggle()},f.jump=v,f.toggleFullScreen=function(n){ImageViewer().show(n)},f.selectItem=function(n){o(f.images,function(e,t){e===n&&(f.config.current=t)}),v()}}n.exports={template:t(294),bindings:{},controller:s,controllerAs:"vm"},s.$inject=["$state","$rootScope","$log","$window","$location","$anchorScroll","$timeout","dataService","$mdSidenav"]},294:function(n,e){n.exports='<div layout="column">\n    <div layout-gt-sm="column" layout-align="top center" flex-gt-sm="40">\n        <span ng-if="!vm.loadingData">\n            <div layout="row" layout-align="center center" ng-if="!vm.disableThumbnailView">\n                    <md-button class="small-button"\n                        aria-label="jump to start"\n                        ng-click="vm.jumpToStart()"\n                        ng-disabled="vm.config.current === 0"\n                        blur-on-click>\n                            <span class="fa fa-fast-backward fa-lg"></span>\n                            <md-tooltip>First Image</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="previous"\n                        ng-click="vm.previous()"\n                        ng-disabled="vm.config.current === 0"\n                        blur-on-click>\n                            <span class="fa fa-step-backward fa-lg"></span>\n                            <md-tooltip>Previous Image</md-tooltip>\n                    </md-button>\n                    <div class="md-subhead">\n                        Image {{vm.config.current + 1}}&nbsp;of&nbsp;{{vm.item.images.length}}\n                    </div>\n                    <md-button class="small-button"\n                        aria-label="next"\n                        ng-click="vm.next()"\n                        ng-disabled="vm.config.current === vm.images.length - 1"\n                        blur-on-click>\n                            <span class="fa fa-step-forward fa-lg"></span>\n                            <md-tooltip>Next Image</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="jump to end"\n                        ng-click="vm.jumpToEnd()"\n                        ng-disabled="vm.config.current === vm.images.length - 1"\n                        blur-on-click>\n                            <span class="fa fa-fast-forward fa-lg"></span>\n                            <md-tooltip>Last Image</md-tooltip>\n                    </md-button>\n            </div>\n            <div layout="row" layout-align="center center">\n                    <md-button class="small-button"\n                        aria-label="toggle filmstrip"\n                        ng-click="vm.toggleFilmstrip()"\n                        blur-on-click\n                        ng-if="!vm.disableThumbnailView">\n                            <span ng-show="showFilmstrip">hide thumbnails</span>\n                            <span ng-hide="showFilmstrip">show thumbnails</span>\n                            <md-tooltip>Toggle Thumbnail Strip</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="download item"\n                        ng-href="{{vm.item.images[vm.config.current]}}"\n                        download\n                        blur-on-click\n                        show-gt-sm>\n                            <i class="fa fa-download fa-lg"></i> Download {{vm.item.images[vm.config.current] | extension}}\n                            <md-tooltip>Download Image</md-tooltip>\n                    </md-button>\n                    <md-button class="small-button"\n                        aria-label="view item in full screen mode"\n                        ng-click="vm.toggleFullScreen(vm.image)">\n                            <i class="fa fa-expand fa-lg"></i>\n                            <md-tooltip>Toggle Fullscreen and Zoom</md-tooltip>\n                    </md-button>\n            </div>\n        </span>\n    </div>\n    <div layout="row" layout-align="center center" flex>\n        <div ng-show="!vm.showImage" style="width: 500px; margin: 10px 0;">\n            <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n        </div>\n        <img\n            class="pannable-image image-style"\n            id=\'largeImage\'\n            ng-src="{{vm.image}}"\n            ng-hide="!vm.showImage"\n            ng-if="vm.image && !vm.loadingData && !vm.showError"\n            show-when-ready>\n        <p ng-if="vm.showError">\n            Unfortunately we\'re unable to display this image at this time.\n        </p>\n    </div>\n</div>\n\n<md-sidenav\n    class="md-sidenav-right main-viewer-color"\n    md-component-id="thumbnailFilmstrip"\n    md-is-open="vm.config.sideNavIsOpen"\n    ng-if="!vm.loadingData">\n        <pdsc-image-viewer-thumbnail-strip-component\n            item="vm.item"\n            selected-item="vm.config.current"\n            load-item="vm.selectItem(item)"\n            is-open="vm.config.sideNavIsOpen"\n            ng-if="vm.config.sideNavIsOpen">\n        </pdsc-image-viewer-thumbnail-strip-component>\n</md-sidenav>\n'},295:function(n,e,t){"use strict";function i(n,e,t,i,a){var o=this;function r(){o.thumbnails=o.thumbnails.map(function(n,e){return n.selected=e===o.selectedItem?"image-viewer-filmstrip-highlight-current":"",n}),e(function(){var n=t.hash();t.hash(o.selectedItem),i(),t.hash(n)},1500)}o.$onInit=function(){o.thumbnails=o.item.thumbnails.map(function(n,e){return{id:e,source:n,name:n.split("/").pop().replace("-thumb-PDSC_ADMIN","")}}),r()},o.$onDestroy=function(){},o.loadImage=function(n){o.loadItem({item:n}),e(function(){r()})},o.highlightSelectedItem=r}n.exports={template:t(296),bindings:{item:"<",selectedItem:"<",loadItem:"&",isOpen:"<"},controller:i,controllerAs:"vm"},i.$inject=["$state","$timeout","$location","$anchorScroll","$mdSidenav"]},296:function(n,e){n.exports='<div layout="column" layout-align="center center" layout-margin ng-if="vm.isOpen">\n    <span ng-repeat="img in vm.thumbnails">\n        <div layout="row" layout-align="center center">\n            <span flex="20">\n                {{$index + 1}}\n            </span>\n            <a\n                flex="80"\n                ng-click="vm.loadImage(img.name)"\n                id="{{img.id}}"\n                ng-class="img.selected">\n                    <img ng-src="{{img.source}}" class="image-viewer-filmstrip-thumbnail" />\n            </a>\n        </div>\n    </span>\n</div>\n'},297:function(n,e,t){"use strict";function i(n,e){e.on("load",function(){n.$apply(function(){n.vm.showImage=!0})}),e.on("error",function(e){n.$apply(function(){n.vm.showImage=!0,n.vm.showError=!0})})}n.exports=function(){return{template:"",restrict:"A",link:i}},i.$inject=["scope","element"]},298:function(n,e,t){"use strict";n.exports=angular.module("pdsc.informationViewer",[]).component("pdscInformationViewerComponent",t(299)).component("pdscItemInformationComponent",t(301))},299:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty;function o(n,e,t,i){var o,r=this;function s(){var e=n.params.collectionId,o=n.params.itemId;r.showImage=!1,r.loadingData=!0,t.getItem(e,o).then(function(n){r.loadingData=!1,a(n)||i.$apply(function(){r.item=n})})}r.$onInit=function(){o=e.$on("item data loaded",s),s()},r.$onDestroy=function(){o()}}i.each,i.map,n.exports={template:t(300),bindings:{},controller:o,controllerAs:"vm"},o.$inject=["$state","$rootScope","dataService","$scope"]},300:function(n,e){n.exports='<pdsc-item-information-component item-data="vm.item"></pdsc-item-information-component>\n'},301:function(n,e,t){"use strict";function i(n){var e=this;e.$onInit=function(){e.url=n.absUrl()}}n.exports={template:t(302),bindings:{itemData:"<"},controller:i,controllerAs:"vm"},i.$inject=["$location"]},302:function(n,e){n.exports='<div layout="column" layout-padding>\n    <div layout="row" layout-align="center center">\n        <md-button\n            class="small-button md-primary md-raised"\n            ng-href="{{vm.itemData.collectionLink}}"\n            target="_blank">\n                <i class="fa fa-external-link fa-sm"></i>\n                View Collection in Catalog: {{vm.itemData.collectionId}}\n        </md-button>\n        <md-button\n            class="small-button md-primary md-raised"\n            ng-href="{{vm.itemData.identifier[1]}}"\n            target="_blank">\n                <i class="fa fa-external-link fa-sm"></i>\n                View Item in Catalog: {{vm.itemData.itemId}}\n        </md-button>\n    </div>\n    <div layout="column">\n        <div class="md-subhead">Contributors</div>\n        <div ng-repeat="contributor in vm.itemData.contributor" class="md-caption">\n            <li>{{contributor.name}} ({{contributor.role}})</li>\n        </div>\n    </div>\n    <div layout="column">\n        <div class="md-subhead">Description</div>\n        <div class="md-caption">{{vm.itemData.description}}</div>\n    </div>\n    <div layout="column">\n        <div class="md-subhead">\n            <div layout="row">\n                <div style="line-height: 40px;">Cite this item</div>\n                <div flex></div>\n                <md-button\n                    style="margin: 0; padding: 0;"\n                    class="small-button"\n                    data-clipboard-text="{{vm.itemData.citation}}"\n                    aria-label="copy citation to clipboard">\n                    <md-tooltip>\n                        Copy citation\n                    </md-tooltip>\n                    <i class="fa fa-clipboard fa-lg"></i>\n                </md-button>\n            </div>\n        </div>\n        <div style="word-wrap: break-word;" class="md-caption">{{vm.itemData.citation}}</div>\n\n    </div>\n    <md-divider></md-divider>\n    <div layout="column">\n        <div class="md-subhead">Zotero and Mendeley Integration.</div>\n        <div class="md-caption">\n            <p>This page has embedded metadata that is able to be read by both Zotero and Mendeley.</p>\n            <p>Zotero users with the appropriate browser plugin (<a href="https://www.zotero.org/download/" target="_blank">\n            https://www.zotero.org/download/</a>)\n            can save to Zotero directly whilst Mendeley users should install the <em>one click Web Importer</em>\n            (<a href="https://www.mendeley.com/import/" target="_blank">https://www.mendeley.com/import/</a>) to\n            enable the same functionality.</p>\n        </div>\n    </div>\n</div>\n'},303:function(n,e,t){"use strict";n.exports=angular.module("pdsc.documentViewer",[]).component("pdscDocumentViewerComponent",t(304))},304:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty,o=i.each;function r(n,e,t,i,r,s,c,l){var d,u=this,m="the-canvas";function f(){u.loadingData=!0;var n=t.params.collectionId,e=t.params.itemId;u.loadingData=!0,i.getItem(n,e).then(function(n){if(u.loadingData=!1,!a(n)){if(u.item=n,a(u.item.documents))return t.go("main");u.documents=u.item.documents.map(function(n){return n.split("/").pop()}),t.params.documentId||t.go("main.documents.instance",{documentId:u.documents[0]}),l(function(){var n=t.params.documentId;u.config.current=u.documents.indexOf(n),u.loadingData=!1,p()})}})}function p(){c.imageResourcePath="images/",c.cMapUrl="cmaps/",c.cMapPacked=!0,c.disableWorker=!0,c.disableRange=!0;var n={url:r.trustAsResourceUrl(u.item.documents[u.config.current]),withCredentials:!0};n.url&&c.getDocument(n).then(function(n){u.pdf=n,u.pdf.getMetadata().then(function(n){e.$apply(function(){u.config.pdfInfo.totalPages=u.pdf.numPages,u.config.pdfInfo.metadata=n})}),v()}).catch(function(n){e.$apply(function(){u.showError=!0})})}function v(){u.pdf.getPage(u.config.currentPage).then(function(n){var e=n.getViewport(u.config.scale),t=document.getElementById(m),i=t.getContext("2d");t.height=e.height,t.width=e.width;var a={canvasContext:i,viewport:e};n.render(a)})}function g(){o(u.documents,function(n,e){u.config.current===e&&(u.pdf=null,u.config.currentPage=1,l(function(){p(),t.go("main.documents.instance",{documentId:n})}))})}u.$onInit=function(){d=n.$on("item data loaded",f),u.config={showDocuments:!0,showItemInformation:!1,pdfInfo:{},current:0,scale:1,currentPage:1},f()},u.$onDestroy=function(){d()},u.nextDocument=function(){u.config.current!==u.item.documents.length-1&&(u.config.current+=1,g())},u.previousDocument=function(){0!==u.config.current&&(u.config.current-=1,g())},u.zoomIn=function(){u.config.scale+=.5,u.config.scale>3&&(u.config.scale=3),v()},u.zoomOut=function(){u.config.scale-=.5,u.config.scale<.5&&(u.config.scale=.5),v()},u.nextPage=function(){u.config.currentPage!==u.pdf.numPages&&(u.config.currentPage+=1,v())},u.previousPage=function(){1!==u.config.currentPage&&(u.config.currentPage-=1,v())},u.firstPage=function(){u.config.currentPage=1,v()},u.lastPage=function(){u.config.currentPage=u.pdf.numPages,v()}}n.exports={template:t(305),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$rootScope","$scope","$state","dataService","$sce","$window","pdfjs","$timeout"]},305:function(n,e){n.exports='<div\n    layout-gt-sm="row"\n    layout="column">\n    <div layout-gt-sm="column" layout-align="top center" flex-gt-sm="40">\n        <span ng-if="!vm.loadingData">\n            <div layout="row" layout-align="center center">\n                <md-button\n                    class="small-button"\n                    aria-label="previous document"\n                    ng-click="vm.previousDocument()"\n                    ng-disabled="vm.config.current === 0"\n                    blur-on-click>\n                        <span class="fa fa-step-backward fa-lg"></span>\n                        <md-tooltip>Previous Document</md-tooltip>\n                </md-button>\n                <div class="md-subhead">\n                    Document {{vm.config.current + 1}}&nbsp;of&nbsp;{{vm.item.documents.length}}\n                </div>\n                <md-button\n                    class="small-button"\n                    aria-label="next document"\n                    ng-click="vm.nextDocument()"\n                    ng-disabled="vm.config.current === vm.documents.length - 1"\n                    blur-on-click>\n                        <span class="fa fa-step-forward fa-lg"></span>\n                        <md-tooltip>Next Document</md-tooltip>\n                </md-button>\n            </div>\n            <div layout="row" layout-align="center center">\n                <md-button\n                    class="small-button"\n                    aria-label="first page"\n                    ng-click="vm.firstPage()"\n                    ng-disabled="vm.config.currentPage === 1"\n                    blur-on-click>\n                        <span class="fa fa-fast-backward fa-lg"></span>\n                        <md-tooltip>First Page</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-button"\n                    aria-label="previous page"\n                    ng-click="vm.previousPage()"\n                    ng-disabled="vm.config.currentPage === 1"\n                    blur-on-click>\n                        <span class="fa fa-step-backward fa-lg"></span>\n                        <md-tooltip>Previous Page</md-tooltip>\n                </md-button>\n                <span ng-if="vm.config.pdfInfo.totalPages">\n                    &nbsp;\n                    Page {{vm.config.currentPage}} of {{vm.config.pdfInfo.totalPages}}\n                    &nbsp;\n                </span>\n                <md-button\n                    class="small-button"\n                    aria-label="next page"\n                    ng-click="vm.nextPage()"\n                    ng-disabled="vm.config.currentPage === vm.config.pdfInfo.totalPages"\n                    blur-on-click>\n                        <span class="fa fa-step-forward fa-lg"></span>\n                        <md-tooltip>Next Page</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-button"\n                    aria-label="last page"\n                    ng-click="vm.lastPage()"\n                    ng-disabled="vm.config.currentPage === vm.config.pdfInfo.totalPages"\n                    blur-on-click>\n                        <span class="fa fa-fast-forward fa-lg"></span>\n                        <md-tooltip>Last Page</md-tooltip>\n                </md-button>\n            </div>\n            <div layout="row" layout-align="center center">\n                <md-button\n                    class="small-button"\n                    aria-label="zoom out"\n                    ng-click="vm.zoomOut()"\n                    blur-on-click>\n                        <span class="fa fa-minus fa-lg"></span>\n                        <md-tooltip>Zoom Out</md-tooltip>\n                </md-button>\n                <span>\n                    <small>{{vm.config.scale | number:1}}x</small>\n                </span>\n                <md-button\n                    class="small-button"\n                    aria-label="zoom in"\n                    ng-click="vm.zoomIn()"\n                    blur-on-click>\n                        <span class="fa fa-plus fa-lg"></span>\n                        <md-tooltip>Zoom In</md-tooltip>\n                </md-button>\n                <md-button\n                    class="small-button"\n                    aria-label="download document"\n                    ng-href="{{vm.item.documents[vm.config.current]}}"\n                    download>\n                        <i class="fa fa-download fa-lg"></i>\n                        Download {{vm.item.documents[vm.config.current] | extension}}\n                </md-button>\n            </div>\n        </span>\n    </div>\n    <div layout="row" layout-align="center center" flex ng-if="vm.showError">\n        <p>Unfortunately we are unable to display this document at this time.</p>\n    </div>\n    <div layout="row" layout-align="center center" flex ng-if="!vm.showError" style="margin: 10px;">\n        <div size-to-parent ng-style="panelStyle" style="overflow: auto;">\n            <canvas id="the-canvas" />\n        </div>\n    </div>\n</div>\n'},306:function(n,e,t){"use strict";n.exports=angular.module("pdsc.transcriptionViewer",[]).component("pdscTranscriptionViewerComponent",t(307))},307:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty;function o(n,e,t,i,o,r){var s,c=this;function l(){c.loadingData=!0,delete c.data;var e=n.params.collectionId,i=n.params.itemId;t.getItem(e,i).then(function(e){if(c.loadingData=!1,!a(e)){if(c.item=e,a(c.item.transcriptions))return n.go("main");n.params.transcriptionId||o(function(){n.go("main.transcriptions.instance",{transcriptionId:c.item.transcriptions[0].name})}),o(function(){d()})}})}function d(){c.selectedTranscription=c.item.transcriptions.filter(function(e){return e.name===n.params.transcriptionId})[0];var e=c.selectedTranscription.name.split(".").pop(),a=c.selectedTranscription;t.loadTranscription(e,a,"xml").then(function(n){i.configure({tabReplace:"    ",useBr:!0}),n=i.highlight("xml",n).value,c.data=n,i.initHighlighting()})}c.$onInit=function(){s=e.$on("item data loaded",l),c.config={current:0},l()},c.$onDestroy=function(){s()},c.jump=function(){o(function(){n.go("main.transcriptions.instance",{transcriptionId:c.selectedTranscription.name})}),o(function(){d()})}}i.each,n.exports={template:t(308),bindings:{},controller:o,controllerAs:"vm"},o.$inject=["$state","$rootScope","dataService","hljs","$timeout","$scope"]},308:function(n,e){n.exports='<div layout="column" layout-align="center center" ng-if="!vm.loadingData">\n    <md-select\n        ng-model="vm.selectedTranscription"\n        ng-change="vm.jump()"\n        aria-label="select the transcription to display">\n        <md-option\n            ng-repeat="transcription in vm.item.transcriptions"\n            ng-value="transcription">\n          {{transcription.name}}\n        </md-option>\n    </md-select>\n    <div layout="row" layout-align="center center" flex>\n        <div ng-show="!vm.loadingData" style="width: 500px; margin: 10px 0;">\n            <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n        </div>\n\n        <pre ng-if="vm.data">\n            <code ng-bind-html="vm.data" class="xml hljs"></code>\n        </pre>\n    </div>\n</div>\n'},309:function(n,e,t){"use strict";t(310),n.exports=angular.module("pdsc.mediaViewer",[]).directive("mediaReady",t(312)).directive("timeUpdate",t(313)).directive("transcriptionReady",t(314)).component("pdscMediaViewerComponent",t(315)).component("pdscAudioPlayerComponent",t(317)).component("pdscVideoPlayerComponent",t(319)).component("pdscTranscriptionRenderComponent",t(321)).component("pdscFragmentCitationComponent",t(323))},312:function(n,e,t){"use strict";n.exports=["$timeout","dataService",function(n,e){return{template:"",restrict:"A",link:function(n,e){e.on("canplaythrough",function(){n.$apply(function(){n.vm.mediaReadyToPlay=!0})})}}}]},313:function(n,e,t){"use strict";t(6).throttle,n.exports=["dataService",function(n){return{template:"",restrict:"A",link:function(e,t){t.on("timeupdate",function(t){e.$apply(function(){n.broadcastMediaElementTime(t.currentTarget.currentTime)})})}}}]},314:function(n,e,t){"use strict";n.exports=["$timeout",function(n){return{template:"",restrict:"A",link:function(e,t){t.ready(function(){e.$apply(function(){e.vm.loadingTranscriptions=!1,n(function(){e.vm.scrollTranscription()},500)})})}}}]},315:function(n,e,t){"use strict";var i=t(6),a=i.isEmpty,o=(i.keys,i.each);function r(n,e,t,i,r){var s,c=this;function l(){var e=n.params.collectionId,o=n.params.itemId;c.showMedia=!1,c.loadingData=!0,t.getItem(e,o).then(function(e){if(c.loadingData=!1,!a(e)){if(c.item=e,a(c.item.media))return n.go("main");c.media=c.item.media.map(function(n){return n.name}),n.params.mediaId||(r.search({}),n.go("main.media.instance",{mediaId:c.media[0]})),i(function(){var e=n.params.mediaId;c.config.current=c.media.indexOf(e),c.config.item=c.item.media[c.config.current]})}})}function d(){o(c.media,function(e,t){c.config.current===t&&(r.search({}),c.config.item=null,i(function(){c.config.item=c.item.media[c.config.current],n.go("main.media.instance",{mediaId:e})}))})}c.$onInit=function(){s=e.$on("item data loaded",l),c.config={current:0,item:null,showItemInformation:!1},l()},c.$onDestroy=function(){s()},c.previousItem=function(){0!==c.config.current&&(c.config.current-=1,d())},c.nextItem=function(){c.config.current!==c.item.media.length-1&&(c.config.current+=1,d())}}n.exports={template:t(316),bindings:{},controller:r,controllerAs:"vm"},r.$inject=["$state","$rootScope","dataService","$timeout","$location"]},316:function(n,e){n.exports='<div layout="column">\n    <div layout="row" layout-align="center center" flex ng-if="!vm.loadingData">\n        <md-button\n            class="small-button"\n            aria-label="previous item"\n            ng-click="vm.previousItem()"\n            ng-disabled="vm.config.current === 0"\n            blur-on-click>\n                <span class="fa fa-step-backward fa-lg"></span>\n                <md-tooltip>Previous Item</md-tooltip>\n        </md-button>\n        <div class="md-subhead">\n            Multimedia item {{vm.config.current + 1}}&nbsp;of&nbsp;{{vm.item.media.length}}\n        </div>\n        <md-button\n            class="small-button"\n            aria-label="next item"\n            ng-click="vm.nextItem()"\n            ng-disabled="vm.config.current === vm.item.media.length - 1"\n            blur-on-click>\n                <span class="fa fa-step-forward fa-lg"></span>\n                <md-tooltip>Next Item</md-tooltip>\n        </md-button>\n    </div>\n    <div ng-if="vm.config.item.type === \'audio\'">\n        <div layout="row" layout-align="center start" flex ng-hide="vm.config.showItemInformation">\n            <pdsc-audio-player-component\n                element="vm.config.item">\n            </pdsc-audio-player-component>\n        </div>\n        <div\n            layout="row"\n            layout-align="center center"\n            ng-if="\n                vm.config.item.eaf.length ||\n                vm.config.item.trs.length ||\n                vm.config.item.ixt.length ||\n                vm.config.item.flextext.length\n            "\n            ng-hide="vm.config.showItemInformation">\n            <pdsc-transcription-render-component\n                element="vm.config.item"\n                ng-if="vm.config.item">\n            </pdsc-transcription-render-component>\n        </div>\n    </div>\n    <div ng-if="vm.config.item.type === \'video\'">\n        <div layout="row"\n                layout-align="center start"\n                layout-padding\n                flex ng-hide="vm.config.showItemInformation">\n            <pdsc-video-player-component\n                element="vm.config.item">\n            </pdsc-video-player-component>\n            <div\n                layout="row"\n                class="hide-xs hide-sm"\n                ng-if="\n                    vm.config.item.eaf.length ||\n                    vm.config.item.trs.length ||\n                    vm.config.item.ixt.length ||\n                    vm.config.item.flextext.length\n                "\n                ng-hide="vm.config.showItemInformation">\n                <pdsc-transcription-render-component\n                    element="vm.config.item"\n                    ng-if="vm.config.item">\n                </pdsc-transcription-render-component>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},317:function(n,e,t){"use strict";function i(n,e,t,i){var a,o=this;function r(){var n=i.playFrom.start,t=i.playFrom.end,a=document.getElementById(o.element.name);a.currentTime=n,a.play(),e(function(){a.pause()},1e3*(t-n))}o.$onInit=function(){a=i.listenForPlayFrom(r),o.mediaReadyToPlay=!1,o.loginRequired=!1},o.$onDestroy=function(){a()}}n.exports={template:t(318),bindings:{element:"<"},controller:i,controllerAs:"vm"},i.$inject=["$state","$timeout","$location","dataService"]},318:function(n,e){n.exports='<div\n    layout="column">\n\n    <div layout="row">\n        <div ng-repeat="src in vm.element.files">\n            <md-button class="small-button" href="{{src | stripTime}}" download>\n                <i class="fa fa-download fa-lg"></i> Download {{src | stripTime | extension}}\n            </md-button>\n        </div>\n    </div>\n    \x3c!--\n    <div class="col-sm-12 col-md-12 col-lg-12" style="margin: 5px 0px;">\n        <img ng-src="{{itemData.audioVisualisations[k]}}" style="width: 100%;" alt="&nbsp;Visualisation unavailable at this time">\n    </div>\n    --\x3e\n    <div layout="row" layout-align="start center">\n        <audio\n            id="{{vm.element.name}}"\n            class="media-viewer-player-style"\n            controls\n            controlsList="nodownload"\n            preload="metadata"\n            media-ready\n            time-update>\n                <source ng-repeat="src in vm.element.files" ng-src="{{src}}" />\n        </audio>\n    </div>\n</div>\n'},319:function(n,e,t){"use strict";function i(n,e,t,i){var a,o=this;function r(){var n=i.playFrom.start,t=i.playFrom.end,a=document.getElementById(o.element.name);a.currentTime=n,a.play(),e(function(){a.pause()},1e3*(t-n))}o.$onInit=function(){a=i.listenForPlayFrom(r),o.mediaReadyToPlay=!1,o.loginRequired=!1},o.$onDestroy=function(){a()}}n.exports={template:t(320),bindings:{element:"<"},controller:i,controllerAs:"vm"},i.$inject=["$state","$timeout","$location","dataService"]},320:function(n,e){n.exports='<div\n    layout="column">\n\n    <div layout="row">\n        <div ng-repeat="src in vm.element.files">\n            <md-button class="small-button" href="{{src | stripTime}}" download>\n                <i class="fa fa-download fa-lg"></i> Download {{src | stripTime | extension}}\n            </md-button>\n        </div>\n    </div>\n    <div layout="row" layout-align="start center">\n        <video\n            id="{{vm.element.name}}"\n            class="media-viewer-player-style"\n            controls\n            controlsList="nodownload"\n            preload="metadata"\n            media-ready\n            time-update>\n                <source ng-repeat="src in vm.element.files" src="{{src}}" />\n        </video>\n    </div>\n</div>\n'},321:function(n,e,t){"use strict";var i=t(6),a=i.includes,o=i.map,r=i.isEmpty;function s(n,e,t,i,s,c){var l,d=this;function u(){d.selectedTranscription&&(d.loadingTranscriptions=!0,d.showTranscription=!1,d.showInterlinearText=!1,e(function(){a(["eaf","trs"],d.selectedType)?(d.showTranscription=!0,d.showInterlinearText=!1):a(["ixt","flextext"],d.selectedType)&&(d.showTranscription=!1,d.showInterlinearText=!0),f()},1e3))}function m(e,t){n.broadcastPlayFrom({start:0}),d.selectedType=e,d.selectedTranscriptionName=t||d.element[d.selectedType][0].name,d.selectedTranscription=d.transcriptionsByName[d.selectedTranscriptionName],i.search("transcription",d.selectedTranscriptionName),u()}function f(){var e=d.selectedTranscription.map(function(e){return e.time.begin>n.mediaElementTime?1:0});d.selectedIndex=_.indexOf(e,1,!0)-1;var t=i.hash();i.hash(d.selectedIndex),s(),i.hash(t)}d.$onInit=function(){c.params.segment&&n.broadcastMediaElementTime(c.params.segment),l=n.listenForMediaElementBroadcast(f),d.transcriptions={},d.transcriptionsByName={};var e=function(){var n=[];return r(d.element.eaf)||d.transcriptions.eaf||(d.transcriptions.eaf={},n.push("eaf")),r(d.element.trs)||d.transcriptions.trs||(d.transcriptions.trs={},n.push("trs")),r(d.element.ixt)||d.transcriptions.ixt||(d.transcriptions.ixt={},n.push("ixt")),r(d.element.flextext)||d.transcriptions.flextext||(d.transcriptions.flextext={},n.push("flextext")),n}();if(!r(e)){c.params.segment&&(n.mediaElementTime=c.params.segment);var i=t.when();return e.forEach(function(e){i=i.then(function(e){return function(){return function(e){var t=o(d.element[e],function(t){return n.loadTranscription(e,t).then(function(n){d.transcriptions[e][t.name]=n,d.transcriptionsByName[t.name]=n})});return Promise.all(t)}(e)}}(e))}),i.then(function(){c.params.transcription?(d.selectedTranscription=d.transcriptionsByName[c.params.transcription],d.selectedType=c.params.transcription.split(".").pop(),d.selectedTranscriptionName=c.params.transcription,u()):m(e[0])})}},d.$onDestroy=function(){l()},d.queueTranscription=m,d.play=function(e){n.broadcastPlayFrom(e)},d.scrollTranscription=f,d.transcriptionOptions=["eaf","trs","ixt","flextext"]}n.exports={template:t(322),bindings:{element:"<"},controller:s,controllerAs:"vm"},s.$inject=["dataService","$timeout","$q","$location","$anchorScroll","$state"]},322:function(n,e){n.exports='<div layout="row" layout-align="center center">\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.eaf.length"\n        ng-disabled="!vm.transcriptions[\'eaf\'] || vm.selectedType === \'eaf\'"\n        ng-click="vm.queueTranscription(\'eaf\')">\n            EAF\n    </md-button>\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.trs.length"\n        ng-disabled="!vm.transcriptions[\'trs\'] || vm.selectedType === \'trs\'"\n        ng-click="vm.queueTranscription(\'trs\')">\n            TRS\n    </md-button>\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.ixt.length"\n        ng-disabled="!vm.transcriptions[\'ixt\'] || vm.selectedType === \'ixt\'"\n        ng-click="vm.queueTranscription(\'ixt\')">\n            IXT\n    </md-button>\n    <md-button\n        class="md-primary small-button"\n        ng-if="vm.element.flextext.length"\n        ng-disabled="!vm.transcriptions[\'flextext\'] || vm.selectedType === \'flextext\'"\n        ng-click="vm.queueTranscription(\'flextext\')">\n            FLEXTEXT\n    </md-button>\n</div>\n<div layout="row" layout-align="center center">\n    <md-input-container ng-show="vm.element[vm.selectedType].length > 1">\n        <md-select\n            ng-model="vm.selectedTranscriptionName"\n            ng-change="vm.queueTranscription(vm.selectedType, vm.selectedTranscriptionName)"\n            aria-label="select the transcription to display">\n            <md-option\n                ng-repeat="transcription in vm.element[vm.selectedType]"\n                ng-value="transcription.name">\n              {{transcription.name}}\n            </md-option>\n        </md-select>\n    </md-input-container>\n</div>\n\n<div layout="row" layout-align="center center" flex>\n    <div ng-show="vm.loadingTranscriptions" style="width: 500px;">\n        <md-progress-linear md-mode="indeterminate"></md-progress-linear>\n    </div>\n</div>\n\n<div ng-if="!vm.selectedTranscription && !vm.loadingTranscriptions && (vm.showTranscription || vm.showInterlinearText)">\n    Unfortunately we\'re unable to show you the selected transcription. It\'s likely there is an error\n    in the file.\n</div>\n\n<div\n    class="media-viewer-transcription-panel media-viewer-transcription-panel-width"\n    ng-if="vm.showTranscription"\n    transcription-ready>\n    <div\n        layout="column" class="md-margin"\n        ng-repeat="(k, annotation) in vm.selectedTranscription" track by $index>\n        <div id="{{k}}"></div>\n        <div layout="row">\n            <div ng-if="vm.selectedType === \'eaf\'">\n                <md-button class="small-button" ng-click="vm.play({\n                    \'start\': annotation.time.begin,\n                    \'end\': annotation.time.end\n                })">\n                    <i class="fa fa-play fa-sm"></i>\n                    Play ({{annotation.time.begin | minutesSeconds}})\n                </md-button>\n            </div>\n            <div ng-if="vm.selectedType === \'trs\'">\n                <md-button class="small-button" ng-click="vm.play({\n                    \'start\': vm.selectedTranscription[k].time.begin,\n                    \'end\': vm.selectedTranscription[k+1].time.begin\n                })">\n                    <i class="fa fa-play fa-sm"></i>\n                    Play ({{annotation.time.begin | minutesSeconds}})\n                </md-button>\n            </div>\n            <div flex></div>\n            <div>\n                <pdsc-fragment-citation-component\n                    selected="vm.selectedTranscriptionName"\n                    element="vm.element"\n                    fragment="vm.selectedTranscription[k]">\n                </pdsc-fragment-citation>\n            </div>\n        </div>\n        <div ng-class="{ \'media-viewer-transcription-selected\': $index === vm.selectedIndex}" class="md-subhead">\n            <div ng-if="vm.selectedType === \'eaf\'">\n                <div layout="column" layout-padding>\n                    {{annotation.tierId}}\n                    <div ng-repeat="value in annotation.value" track by $index>\n                        <span ng-class="{\'media-viewer-highlight-translation md-title\': value.language === \'us\'}">\n                            {{value.text}}\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div ng-if="vm.selectedType === \'trs\'">\n                <div layout="row" layout-padding>\n                    {{annotation.value}}\n                    <br/>\n                    {{annotation.referenceValue}}\n                </div>\n            </div>\n        </div>\n        <md-divider ng-if="$index !== vm.selectedIndex"></md-divider>\n    </div>\n</div>\n\n<div\n    class="media-viewer-transcription-panel media-viewer-transcription-panel-width"\n    ng-if="vm.showInterlinearText"\n    transcription-ready>\n    <div ng-repeat="(k, sentence) in vm.selectedTranscription" layout="column" class="md-margin">\n        <div id="{{k}}"></div>\n        <div layout="row">\n            <div>\n                <md-button class="small-button" ng-click="vm.play({\n                    \'start\': vm.selectedTranscription[k].time.begin,\n                    \'end\': vm.selectedTranscription[k+1].time.begin\n                })">\n                    <i class="fa fa-play fa-sm"></i> Play ({{sentence.time.begin | minutesSeconds}})\n                </md-button>\n            </div>\n            <div flex></div>\n            <div>\n                <pdsc-fragment-citation-component\n                    selected="vm.selectedTranscriptionName"\n                    element="vm.element"\n                    fragment="vm.selectedTranscription[k]">\n                </pdsc-fragment-citation>\n            </div>\n        </div>\n        <div layout-padding>\n            <div class="" ng-class="{ \'media-viewer-transcription-selected\': $index === vm.selectedIndex}">{{sentence.transcription}}</div>\n            <div class="md-title media-viewer-highlight-translation">{{sentence.translation}}</div>\n            <div layout="row" layout-padding layout-wrap>\n                <table ng-repeat="word in sentence.words" class="media-viewer-table-style">\n                    <tbody class="md-caption media-viewer-highlight-word">\n                        <tr class="" ng-if="word.text">\n                            <td class="media-viewer-td-style" colspan="{{word.words.length}}">{{word.text}}</td>\n                        </tr>\n                        <tr class="" ng-if="!word.text">\n                            <td class="media-viewer-td-style" ng-repeat="w in word.words">{{w.text}}</td>\n                        </tr>\n                        <tr class="media-viewer-highlight-morpheme">\n                            <td class="media-viewer-td-style" ng-repeat="w in word.words">{{w.morpheme}}</td>\n                        </tr>\n                        <tr class="media-viewer-highlight-gloss">\n                            <td class="media-viewer-td-style" ng-repeat="w in word.words">{{w.gloss}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <md-divider ng-if="$index !== vm.selectedIndex"></md-divider>\n    </div>\n</div>\n'},323:function(n,e,t){"use strict";function i(n,e){var t=this;t.$onInit=function(){var i=n.absUrl().split(n.url())[0],a=e.params.collectionId,o=e.params.itemId,r=t.element.name,s=t.selected.split("/").pop(),c=t.fragment.time.begin;t.citation=i+"/"+a+"/"+o+"/media/"+r+"?transcription="+s+"&segment="+c},t.$onDestroy=function(){}}n.exports={template:t(324),bindings:{selected:"<",element:"<",fragment:"<"},controller:i,controllerAs:"vm"},i.$inject=["$location","$state"]},324:function(n,e){n.exports='<md-button\n    class="small-button"\n    data-clipboard-text="{{vm.citation}}"\n    aria-label="copy citation to clipboard"\n    ng-if="vm.citation">\n        <md-tooltip>\n            Copy fragment citation\n        </md-tooltip>\n        <i class="fa fa-clipboard fa-sm"></i>\n</md-button>\n'},325:function(n,e,t){"use strict";t(326),t(327),t(328),t(358),t(398)},326:function(n,e,t){"use strict";n.exports=angular.module("lodash",[]).factory("lodash",function(){return t(6)})},327:function(n,e,t){"use strict";n.exports=angular.module("moment",[]).factory("moment",function(){return t(2)})},328:function(n,e,t){"use strict";n.exports=angular.module("pdfjs",[]).factory("pdfjs",function(){return t(170)})},358:function(n,e,t){"use strict";n.exports=angular.module("jquery",[]).factory("jquery",function(){return t(206)})},36:function(n,e,t){"use strict";n.exports={datasource:{collections:"http://catalog.paradisec.org.au/collections",itemIdentifier:"oai:paradisec.org.au:{{collectionId}}-{{itemId}}",getItem:"http://catalog.paradisec.org.au/oai/item?verb=GetRecord&identifier={{itemId}}&metadataPrefix=olac",mode:"librarybox"},header:{}}},398:function(n,e,t){"use strict";n.exports=angular.module("highlightjs",[]).factory("hljs",function(){return t(235)})},606:function(n,e,t){"use strict";function i(n,e){if(!n)throw new Error(e)}t.r(e);var a=function n(e,t,a){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.body=e,this.name=t||"GraphQL request",this.locationOffset=a||{line:1,column:1},this.locationOffset.line>0||i(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||i(0,"column in locationOffset is 1-indexed and must be positive")};function o(n,e){for(var t=/\r\n|[\n\r]/g,i=1,a=e+1,o=void 0;(o=t.exec(n.body))&&o.index<e;)i+=1,a=e+1-(o.index+o[0].length);return{line:i,column:a}}function r(n,e){var t=e.line,i=n.locationOffset.line-1,a=function(n,e){return 1===e.line?n.locationOffset.column-1:0}(n,e),o=t+i,r=e.column+a,l=(o-1).toString(),d=o.toString(),u=(o+1).toString(),m=u.length,f=n.body.split(/\r\n|[\n\r]/g);return f[0]=s(n.locationOffset.column-1)+f[0],[n.name+" ("+o+":"+r+")",t>=2&&c(m,l)+": "+f[t-2],c(m,d)+": "+f[t-1],s(2+m+r-1)+"^",t<f.length&&c(m,u)+": "+f[t]].filter(Boolean).join("\n")}function s(n){return Array(n+1).join(" ")}function c(n,e){return s(n-e.length)+e}function l(n,e,t,i,a,r,s){var c=Array.isArray(e)?0!==e.length?e:void 0:e?[e]:void 0,d=t;if(!d&&c){var u=c[0];d=u&&u.loc&&u.loc.source}var m=i;!m&&c&&(m=c.reduce(function(n,e){return e.loc&&n.push(e.loc.start),n},[])),m&&0===m.length&&(m=void 0);var f=void 0;i&&t?f=i.map(function(n){return o(t,n)}):c&&(f=c.reduce(function(n,e){return e.loc&&n.push(o(e.loc.source,e.loc.start)),n},[])),Object.defineProperties(this,{message:{value:n,enumerable:!0,writable:!0},locations:{value:f||void 0,enumerable:!0},path:{value:a||void 0,enumerable:!0},nodes:{value:c||void 0},source:{value:d||void 0},positions:{value:m||void 0},originalError:{value:r},extensions:{value:s||r&&r.extensions}}),r&&r.stack?Object.defineProperty(this,"stack",{value:r.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}function d(n,e,t){return new l("Syntax Error: "+t,void 0,n,[e])}function u(n){for(var e=n.split(/\r\n|[\n\r]/g),t=null,i=1;i<e.length;i++){var a=e[i],o=m(a);if(o<a.length&&(null===t||o<t)&&0===(t=o))break}if(t)for(var r=1;r<e.length;r++)e[r]=e[r].slice(t);for(;e.length>0&&f(e[0]);)e.shift();for(;e.length>0&&f(e[e.length-1]);)e.pop();return e.join("\n")}function m(n){for(var e=0;e<n.length&&(" "===n[e]||"\t"===n[e]);)e++;return e}function f(n){return m(n)===n.length}function p(n,e){var t=new T(h.SOF,0,0,0,0,null);return{source:n,options:e,lastToken:t,token:t,line:1,lineStart:0,advance:v,lookahead:g}}function v(){return this.lastToken=this.token,this.token=this.lookahead()}function g(){var n=this.token;if(n.kind!==h.EOF)do{n=n.next||(n.next=E(this,n))}while(n.kind===h.COMMENT);return n}l.prototype=Object.create(Error.prototype,{constructor:{value:l},name:{value:"GraphQLError"},toString:{value:function(){return function(n){var e=[];if(n.nodes)n.nodes.forEach(function(n){n.loc&&e.push(r(n.loc.source,o(n.loc.source,n.loc.start)))});else if(n.source&&n.locations){var t=n.source;n.locations.forEach(function(n){e.push(r(t,n))})}return 0===e.length?n.message:[n.message].concat(e).join("\n\n")+"\n"}(this)}}}),Object.assign;var h=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function b(n){var e=n.value;return e?n.kind+' "'+e+'"':n.kind}var I=String.prototype.charCodeAt,y=String.prototype.slice;function T(n,e,t,i,a,o,r){this.kind=n,this.start=e,this.end=t,this.line=i,this.column=a,this.value=r,this.prev=o,this.next=null}function w(n){return isNaN(n)?h.EOF:n<127?JSON.stringify(String.fromCharCode(n)):'"\\u'+("00"+n.toString(16).toUpperCase()).slice(-4)+'"'}function E(n,e){var t=n.source,i=t.body,a=i.length,o=function(n,e,t){for(var i=n.length,a=e;a<i;){var o=I.call(n,a);if(9===o||32===o||44===o||65279===o)++a;else if(10===o)++a,++t.line,t.lineStart=a;else{if(13!==o)break;10===I.call(n,a+1)?a+=2:++a,++t.line,t.lineStart=a}}return a}(i,e.end,n),r=n.line,s=1+o-n.lineStart;if(o>=a)return new T(h.EOF,a,a,r,s,e);var c=I.call(i,o);if(c<32&&9!==c&&10!==c&&13!==c)throw d(t,o,"Cannot contain the invalid character "+w(c)+".");switch(c){case 33:return new T(h.BANG,o,o+1,r,s,e);case 35:return function(n,e,t,i,a){var o=n.body,r=void 0,s=e;do{r=I.call(o,++s)}while(null!==r&&(r>31||9===r));return new T(h.COMMENT,e,s,t,i,a,y.call(o,e+1,s))}(t,o,r,s,e);case 36:return new T(h.DOLLAR,o,o+1,r,s,e);case 38:return new T(h.AMP,o,o+1,r,s,e);case 40:return new T(h.PAREN_L,o,o+1,r,s,e);case 41:return new T(h.PAREN_R,o,o+1,r,s,e);case 46:if(46===I.call(i,o+1)&&46===I.call(i,o+2))return new T(h.SPREAD,o,o+3,r,s,e);break;case 58:return new T(h.COLON,o,o+1,r,s,e);case 61:return new T(h.EQUALS,o,o+1,r,s,e);case 64:return new T(h.AT,o,o+1,r,s,e);case 91:return new T(h.BRACKET_L,o,o+1,r,s,e);case 93:return new T(h.BRACKET_R,o,o+1,r,s,e);case 123:return new T(h.BRACE_L,o,o+1,r,s,e);case 124:return new T(h.PIPE,o,o+1,r,s,e);case 125:return new T(h.BRACE_R,o,o+1,r,s,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(n,e,t,i,a){for(var o=n.body,r=o.length,s=e+1,c=0;s!==r&&null!==(c=I.call(o,s))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++s;return new T(h.NAME,e,s,t,i,a,y.call(o,e,s))}(t,o,r,s,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(n,e,t,i,a,o){var r=n.body,s=t,c=e,l=!1;if(45===s&&(s=I.call(r,++c)),48===s){if((s=I.call(r,++c))>=48&&s<=57)throw d(n,c,"Invalid number, unexpected digit after 0: "+w(s)+".")}else c=N(n,c,s),s=I.call(r,c);return 46===s&&(l=!0,s=I.call(r,++c),c=N(n,c,s),s=I.call(r,c)),69!==s&&101!==s||(l=!0,43!==(s=I.call(r,++c))&&45!==s||(s=I.call(r,++c)),c=N(n,c,s)),new T(l?h.FLOAT:h.INT,e,c,i,a,o,y.call(r,e,c))}(t,o,c,r,s,e);case 34:return 34===I.call(i,o+1)&&34===I.call(i,o+2)?function(n,e,t,i,a){for(var o=n.body,r=e+3,s=r,c=0,l="";r<o.length&&null!==(c=I.call(o,r));){if(34===c&&34===I.call(o,r+1)&&34===I.call(o,r+2))return l+=y.call(o,s,r),new T(h.BLOCK_STRING,e,r+3,t,i,a,u(l));if(c<32&&9!==c&&10!==c&&13!==c)throw d(n,r,"Invalid character within String: "+w(c)+".");92===c&&34===I.call(o,r+1)&&34===I.call(o,r+2)&&34===I.call(o,r+3)?(l+=y.call(o,s,r)+'"""',s=r+=4):++r}throw d(n,r,"Unterminated string.")}(t,o,r,s,e):function(n,e,t,i,a){for(var o=n.body,r=e+1,s=r,c=0,l="";r<o.length&&null!==(c=I.call(o,r))&&10!==c&&13!==c;){if(34===c)return l+=y.call(o,s,r),new T(h.STRING,e,r+1,t,i,a,l);if(c<32&&9!==c)throw d(n,r,"Invalid character within String: "+w(c)+".");if(++r,92===c){switch(l+=y.call(o,s,r-1),c=I.call(o,r)){case 34:l+='"';break;case 47:l+="/";break;case 92:l+="\\";break;case 98:l+="\b";break;case 102:l+="\f";break;case 110:l+="\n";break;case 114:l+="\r";break;case 116:l+="\t";break;case 117:var u=x(I.call(o,r+1),I.call(o,r+2),I.call(o,r+3),I.call(o,r+4));if(u<0)throw d(n,r,"Invalid character escape sequence: \\u"+o.slice(r+1,r+5)+".");l+=String.fromCharCode(u),r+=4;break;default:throw d(n,r,"Invalid character escape sequence: \\"+String.fromCharCode(c)+".")}s=++r}}throw d(n,r,"Unterminated string.")}(t,o,r,s,e)}throw d(t,o,39===c?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character "+w(c)+".")}function N(n,e,t){var i=n.body,a=e,o=t;if(o>=48&&o<=57){do{o=I.call(i,++a)}while(o>=48&&o<=57);return a}throw d(n,a,"Invalid number, expected digit but got: "+w(o)+".")}function x(n,e,t,i){return k(n)<<12|k(e)<<8|k(t)<<4|k(i)}function k(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}T.prototype.toJSON=T.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var O=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",VARIABLE:"Variable",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension",DIRECTIVE_DEFINITION:"DirectiveDefinition"}),A=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function _(n,e){var t="string"==typeof n?new a(n):n;if(!(t instanceof a))throw new TypeError("Must provide Source. Received: "+String(t));return function(n){var e=n.token;yn(n,h.SOF);var t=[];do{t.push(P(n))}while(!In(n,h.EOF));return{kind:O.DOCUMENT,definitions:t,loc:gn(n,e)}}(p(t,e||{}))}function j(n,e){var t=p("string"==typeof n?new a(n):n,e||{});yn(t,h.SOF);var i=Y(t,!1);return yn(t,h.EOF),i}function D(n,e){var t=p("string"==typeof n?new a(n):n,e||{});yn(t,h.SOF);var i=W(t);return yn(t,h.EOF),i}function S(n){var e=yn(n,h.NAME);return{kind:O.NAME,value:e.value,loc:gn(n,e)}}function P(n){if(bn(n,h.NAME))switch(n.token.value){case"query":case"mutation":case"subscription":case"fragment":return C(n);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"extend":case"directive":return en(n)}else{if(bn(n,h.BRACE_L))return C(n);if(tn(n))return en(n)}throw wn(n)}function C(n){if(bn(n,h.NAME))switch(n.token.value){case"query":case"mutation":case"subscription":return R(n);case"fragment":return function(n){var e=n.token;return Tn(n,"fragment"),n.options.experimentalFragmentVariables?{kind:O.FRAGMENT_DEFINITION,name:q(n),variableDefinitions:L(n),typeCondition:(Tn(n,"on"),nn(n)),directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}:{kind:O.FRAGMENT_DEFINITION,name:q(n),typeCondition:(Tn(n,"on"),nn(n)),directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}}(n)}else if(bn(n,h.BRACE_L))return R(n);throw wn(n)}function R(n){var e=n.token;if(bn(n,h.BRACE_L))return{kind:O.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:B(n),loc:gn(n,e)};var t=$(n),i=void 0;return bn(n,h.NAME)&&(i=S(n)),{kind:O.OPERATION_DEFINITION,operation:t,name:i,variableDefinitions:L(n),directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}}function $(n){var e=yn(n,h.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw wn(n,e)}function L(n){return bn(n,h.PAREN_L)?En(n,h.PAREN_L,F,h.PAREN_R):[]}function F(n){var e=n.token;return{kind:O.VARIABLE_DEFINITION,variable:M(n),type:(yn(n,h.COLON),W(n)),defaultValue:In(n,h.EQUALS)?Y(n,!0):void 0,loc:gn(n,e)}}function M(n){var e=n.token;return yn(n,h.DOLLAR),{kind:O.VARIABLE,name:S(n),loc:gn(n,e)}}function B(n){var e=n.token;return{kind:O.SELECTION_SET,selections:En(n,h.BRACE_L,V,h.BRACE_R),loc:gn(n,e)}}function V(n){return bn(n,h.SPREAD)?function(n){var e=n.token;if(yn(n,h.SPREAD),bn(n,h.NAME)&&"on"!==n.token.value)return{kind:O.FRAGMENT_SPREAD,name:q(n),directives:H(n,!1),loc:gn(n,e)};var t=void 0;return"on"===n.token.value&&(n.advance(),t=nn(n)),{kind:O.INLINE_FRAGMENT,typeCondition:t,directives:H(n,!1),selectionSet:B(n),loc:gn(n,e)}}(n):function(n){var e=n.token,t=S(n),i=void 0,a=void 0;return In(n,h.COLON)?(i=t,a=S(n)):a=t,{kind:O.FIELD,alias:i,name:a,arguments:U(n,!1),directives:H(n,!1),selectionSet:bn(n,h.BRACE_L)?B(n):void 0,loc:gn(n,e)}}(n)}function U(n,e){var t=e?z:G;return bn(n,h.PAREN_L)?En(n,h.PAREN_L,t,h.PAREN_R):[]}function G(n){var e=n.token;return{kind:O.ARGUMENT,name:S(n),value:(yn(n,h.COLON),Y(n,!1)),loc:gn(n,e)}}function z(n){var e=n.token;return{kind:O.ARGUMENT,name:S(n),value:(yn(n,h.COLON),X(n)),loc:gn(n,e)}}function q(n){if("on"===n.token.value)throw wn(n);return S(n)}function Y(n,e){var t=n.token;switch(t.kind){case h.BRACKET_L:return function(n,e){var t=n.token,i=e?X:K;return{kind:O.LIST,values:function(n,e,t,i){yn(n,e);for(var a=[];!In(n,i);)a.push(t(n));return a}(n,h.BRACKET_L,i,h.BRACKET_R),loc:gn(n,t)}}(n,e);case h.BRACE_L:return function(n,e){var t=n.token;yn(n,h.BRACE_L);for(var i=[];!In(n,h.BRACE_R);)i.push(Q(n,e));return{kind:O.OBJECT,fields:i,loc:gn(n,t)}}(n,e);case h.INT:return n.advance(),{kind:O.INT,value:t.value,loc:gn(n,t)};case h.FLOAT:return n.advance(),{kind:O.FLOAT,value:t.value,loc:gn(n,t)};case h.STRING:case h.BLOCK_STRING:return J(n);case h.NAME:return"true"===t.value||"false"===t.value?(n.advance(),{kind:O.BOOLEAN,value:"true"===t.value,loc:gn(n,t)}):"null"===t.value?(n.advance(),{kind:O.NULL,loc:gn(n,t)}):(n.advance(),{kind:O.ENUM,value:t.value,loc:gn(n,t)});case h.DOLLAR:if(!e)return M(n)}throw wn(n)}function J(n){var e=n.token;return n.advance(),{kind:O.STRING,value:e.value,block:e.kind===h.BLOCK_STRING,loc:gn(n,e)}}function X(n){return Y(n,!0)}function K(n){return Y(n,!1)}function Q(n,e){var t=n.token;return{kind:O.OBJECT_FIELD,name:S(n),value:(yn(n,h.COLON),Y(n,e)),loc:gn(n,t)}}function H(n,e){for(var t=[];bn(n,h.AT);)t.push(Z(n,e));return t}function Z(n,e){var t=n.token;return yn(n,h.AT),{kind:O.DIRECTIVE,name:S(n),arguments:U(n,e),loc:gn(n,t)}}function W(n){var e=n.token,t=void 0;return In(n,h.BRACKET_L)?(t=W(n),yn(n,h.BRACKET_R),t={kind:O.LIST_TYPE,type:t,loc:gn(n,e)}):t=nn(n),In(n,h.BANG)?{kind:O.NON_NULL_TYPE,type:t,loc:gn(n,e)}:t}function nn(n){var e=n.token;return{kind:O.NAMED_TYPE,name:S(n),loc:gn(n,e)}}function en(n){var e=tn(n)?n.lookahead():n.token;if(e.kind===h.NAME)switch(e.value){case"schema":return function(n){var e=n.token;Tn(n,"schema");var t=H(n,!0),i=En(n,h.BRACE_L,on,h.BRACE_R);return{kind:O.SCHEMA_DEFINITION,directives:t,operationTypes:i,loc:gn(n,e)}}(n);case"scalar":return function(n){var e=n.token,t=an(n);Tn(n,"scalar");var i=S(n),a=H(n,!0);return{kind:O.SCALAR_TYPE_DEFINITION,description:t,name:i,directives:a,loc:gn(n,e)}}(n);case"type":return function(n){var e=n.token,t=an(n);Tn(n,"type");var i=S(n),a=rn(n),o=H(n,!0),r=sn(n);return{kind:O.OBJECT_TYPE_DEFINITION,description:t,name:i,interfaces:a,directives:o,fields:r,loc:gn(n,e)}}(n);case"interface":return function(n){var e=n.token,t=an(n);Tn(n,"interface");var i=S(n),a=H(n,!0),o=sn(n);return{kind:O.INTERFACE_TYPE_DEFINITION,description:t,name:i,directives:a,fields:o,loc:gn(n,e)}}(n);case"union":return function(n){var e=n.token,t=an(n);Tn(n,"union");var i=S(n),a=H(n,!0),o=un(n);return{kind:O.UNION_TYPE_DEFINITION,description:t,name:i,directives:a,types:o,loc:gn(n,e)}}(n);case"enum":return function(n){var e=n.token,t=an(n);Tn(n,"enum");var i=S(n),a=H(n,!0),o=mn(n);return{kind:O.ENUM_TYPE_DEFINITION,description:t,name:i,directives:a,values:o,loc:gn(n,e)}}(n);case"input":return function(n){var e=n.token,t=an(n);Tn(n,"input");var i=S(n),a=H(n,!0),o=pn(n);return{kind:O.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:i,directives:a,fields:o,loc:gn(n,e)}}(n);case"extend":return function(n){var e=n.lookahead();if(e.kind===h.NAME)switch(e.value){case"scalar":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"scalar");var t=S(n),i=H(n,!0);if(0===i.length)throw wn(n);return{kind:O.SCALAR_TYPE_EXTENSION,name:t,directives:i,loc:gn(n,e)}}(n);case"type":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"type");var t=S(n),i=rn(n),a=H(n,!0),o=sn(n);if(0===i.length&&0===a.length&&0===o.length)throw wn(n);return{kind:O.OBJECT_TYPE_EXTENSION,name:t,interfaces:i,directives:a,fields:o,loc:gn(n,e)}}(n);case"interface":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"interface");var t=S(n),i=H(n,!0),a=sn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.INTERFACE_TYPE_EXTENSION,name:t,directives:i,fields:a,loc:gn(n,e)}}(n);case"union":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"union");var t=S(n),i=H(n,!0),a=un(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.UNION_TYPE_EXTENSION,name:t,directives:i,types:a,loc:gn(n,e)}}(n);case"enum":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"enum");var t=S(n),i=H(n,!0),a=mn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.ENUM_TYPE_EXTENSION,name:t,directives:i,values:a,loc:gn(n,e)}}(n);case"input":return function(n){var e=n.token;Tn(n,"extend"),Tn(n,"input");var t=S(n),i=H(n,!0),a=pn(n);if(0===i.length&&0===a.length)throw wn(n);return{kind:O.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:i,fields:a,loc:gn(n,e)}}(n)}throw wn(n,e)}(n);case"directive":return function(n){var e=n.token,t=an(n);Tn(n,"directive"),yn(n,h.AT);var i=S(n),a=ln(n);Tn(n,"on");var o=function(n){In(n,h.PIPE);var e=[];do{e.push(vn(n))}while(In(n,h.PIPE));return e}(n);return{kind:O.DIRECTIVE_DEFINITION,description:t,name:i,arguments:a,locations:o,loc:gn(n,e)}}(n)}throw wn(n,e)}function tn(n){return bn(n,h.STRING)||bn(n,h.BLOCK_STRING)}function an(n){if(tn(n))return J(n)}function on(n){var e=n.token,t=$(n);yn(n,h.COLON);var i=nn(n);return{kind:O.OPERATION_TYPE_DEFINITION,operation:t,type:i,loc:gn(n,e)}}function rn(n){var e=[];if("implements"===n.token.value){n.advance(),In(n,h.AMP);do{e.push(nn(n))}while(In(n,h.AMP)||n.options.allowLegacySDLImplementsInterfaces&&bn(n,h.NAME))}return e}function sn(n){return n.options.allowLegacySDLEmptyFields&&bn(n,h.BRACE_L)&&n.lookahead().kind===h.BRACE_R?(n.advance(),n.advance(),[]):bn(n,h.BRACE_L)?En(n,h.BRACE_L,cn,h.BRACE_R):[]}function cn(n){var e=n.token,t=an(n),i=S(n),a=ln(n);yn(n,h.COLON);var o=W(n),r=H(n,!0);return{kind:O.FIELD_DEFINITION,description:t,name:i,arguments:a,type:o,directives:r,loc:gn(n,e)}}function ln(n){return bn(n,h.PAREN_L)?En(n,h.PAREN_L,dn,h.PAREN_R):[]}function dn(n){var e=n.token,t=an(n),i=S(n);yn(n,h.COLON);var a=W(n),o=void 0;In(n,h.EQUALS)&&(o=X(n));var r=H(n,!0);return{kind:O.INPUT_VALUE_DEFINITION,description:t,name:i,type:a,defaultValue:o,directives:r,loc:gn(n,e)}}function un(n){var e=[];if(In(n,h.EQUALS)){In(n,h.PIPE);do{e.push(nn(n))}while(In(n,h.PIPE))}return e}function mn(n){return bn(n,h.BRACE_L)?En(n,h.BRACE_L,fn,h.BRACE_R):[]}function fn(n){var e=n.token,t=an(n),i=S(n),a=H(n,!0);return{kind:O.ENUM_VALUE_DEFINITION,description:t,name:i,directives:a,loc:gn(n,e)}}function pn(n){return bn(n,h.BRACE_L)?En(n,h.BRACE_L,dn,h.BRACE_R):[]}function vn(n){var e=n.token,t=S(n);if(A.hasOwnProperty(t.value))return t;throw wn(n,e)}function gn(n,e){if(!n.options.noLocation)return new hn(e,n.lastToken,n.source)}function hn(n,e,t){this.start=n.start,this.end=e.end,this.startToken=n,this.endToken=e,this.source=t}function bn(n,e){return n.token.kind===e}function In(n,e){var t=n.token.kind===e;return t&&n.advance(),t}function yn(n,e){var t=n.token;if(t.kind===e)return n.advance(),t;throw d(n.source,t.start,"Expected "+e+", found "+b(t))}function Tn(n,e){var t=n.token;if(t.kind===h.NAME&&t.value===e)return n.advance(),t;throw d(n.source,t.start,'Expected "'+e+'", found '+b(t))}function wn(n,e){var t=e||n.token;return d(n.source,t.start,"Unexpected "+b(t))}function En(n,e,t,i){yn(n,e);for(var a=[t(n)];!In(n,i);)a.push(t(n));return a}t.d(e,"parse",function(){return _}),t.d(e,"parseValue",function(){return j}),t.d(e,"parseType",function(){return D}),t.d(e,"parseConstValue",function(){return X}),t.d(e,"parseTypeReference",function(){return W}),t.d(e,"parseNamedType",function(){return nn}),hn.prototype.toJSON=hn.prototype.inspect=function(){return{start:this.start,end:this.end}}}});